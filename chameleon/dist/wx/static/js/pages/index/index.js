var __CML__GLOBAL = require("../../manifest.js");
__CML__GLOBAL.webpackJsonp([1],{

/***/ "../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/babel-loader/lib/index.js?{\"filename\":\"/Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/chameleon.js\"}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/chameleon-loader/src/selector.js?type=script&index=0&fileType=page&media=dev&cmlType=wx&isInjectBaseStyle=true&check={\"enable\":true,\"enableTypes\":[]}!./src/pages/index/index.cml":
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _RongIMLib240Min = __webpack_require__("./src/assets/js/RongIMLib-2.4.0.min.js");

var _RongIMLib240Min2 = _interopRequireDefault(_RongIMLib240Min);

var _protobuf234Min = __webpack_require__("./src/assets/js/protobuf-2.3.4.min.js");

var _protobuf234Min2 = _interopRequireDefault(_protobuf234Min);

var _chameleonRuntime = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module \"chameleon-runtime\""); e.code = 'MODULE_NOT_FOUND'; throw e; }()));

var _chameleonRuntime2 = _interopRequireDefault(_chameleonRuntime);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function setListener(appKey, callback) {
  console.log('setListener');
  _RongIMLib240Min2.default.RongIMClient.init(appKey, null, {
    protobuf: _protobuf234Min2.default
  });
  // 设置连接监听状态 （ status 标识当前连接状态 ）
  // 连接状态监听器
  _RongIMLib240Min2.default.RongIMClient.setConnectionStatusListener({
    onChanged: function onChanged(status) {
      callback(status);
      switch (status) {
        case _RongIMLib240Min2.default.ConnectionStatus.CONNECTED:
          console.log('链接成功');
          break;
        case _RongIMLib240Min2.default.ConnectionStatus.CONNECTING:
          console.log('正在链接');
          break;
        case _RongIMLib240Min2.default.ConnectionStatus.DISCONNECTED:
          console.log('断开连接');
          break;
        case _RongIMLib240Min2.default.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT:
          console.log('其他设备登录');
          break;
        case _RongIMLib240Min2.default.ConnectionStatus.DOMAIN_INCORRECT:
          console.log('域名不正确');
          break;
        case _RongIMLib240Min2.default.ConnectionStatus.NETWORK_UNAVAILABLE:
          console.log('网络不可用');
          break;
      }
    }
  });
  // 消息监听器
  _RongIMLib240Min2.default.RongIMClient.setOnReceiveMessageListener({
    // 接收到的消息
    onReceived: function onReceived(message) {
      // 判断消息类型
      switch (message.messageType) {
        case RongIMClient.MessageType.TextMessage:
          // message.content.content => 消息内容
          break;
        case RongIMClient.MessageType.VoiceMessage:
          // 对声音进行预加载                
          // message.content.content 格式为 AMR 格式的 base64 码
          break;
        case RongIMClient.MessageType.ImageMessage:
          // message.content.content => 图片缩略图 base64。
          // message.content.imageUri => 原图 URL。
          break;
        case RongIMClient.MessageType.DiscussionNotificationMessage:
          // message.content.extension => 讨论组中的人员。
          break;
        case RongIMClient.MessageType.LocationMessage:
          // message.content.latiude => 纬度。
          // message.content.longitude => 经度。
          // message.content.content => 位置图片 base64。
          break;
        case RongIMClient.MessageType.RichContentMessage:
          // message.content.content => 文本消息内容。
          // message.content.imageUri => 图片 base64。
          // message.content.url => 原图 URL。
          break;
        case RongIMClient.MessageType.InformationNotificationMessage:
          // do something...
          break;
        case RongIMClient.MessageType.ContactNotificationMessage:
          // do something...
          break;
        case RongIMClient.MessageType.ProfileNotificationMessage:
          // do something...
          break;
        case RongIMClient.MessageType.CommandNotificationMessage:
          // do something...
          break;
        case RongIMClient.MessageType.CommandMessage:
          // do something...
          break;
        case RongIMClient.MessageType.UnknownMessage:
          // do something...
          break;
        default:
        // do something...
      }
    }
  });
}
function connect(data, callback) {
  var cml = this;
  var token = data.token;
  var userId = data.userId;
  _RongIMLib240Min2.default.RongIMClient.connect(token, {
    onSuccess: function onSuccess(userId) {
      console.log("Connect successfully." + userId);
      callback(userId);
    },
    onTokenIncorrect: function onTokenIncorrect() {
      console.log('token无效');
      callback();
    },
    onError: function onError(errorCode) {
      var info = '';
      switch (errorCode) {
        case _RongIMLib240Min2.default.ErrorCode.TIMEOUT:
          info = '超时';
          break;
        case _RongIMLib240Min2.default.ConnectionState.UNACCEPTABLE_PAROTOCOL_VERSION:
          info = '不可接受的协议版本';
          break;
        case _RongIMLib240Min2.default.ConnectionState.IDENTIFIER_REJECTED:
          info = 'appkey不正确';
          break;
        case _RongIMLib240Min2.default.ConnectionState.SERVER_UNAVAILABLE:
          info = '服务器不可用';
          break;
      }
      console.log(errorCode);
    }
  });
}

var Index = function Index() {
  _classCallCheck(this, Index);

  this.data = {
    title: 'Chameleon框架-连接融云服务demo',
    appkey: 'vnroth0kvbf4o',
    token: 'dvKz9A78l1XTOefuNW1XN+vX7mzajXCPhVdLzaVlxBArcMENdNOjkzB3EDvQjyIobIeFv0Cezh/32gSONIAXOA==',
    userId: '1001',
    initResult: []
  };
  this.computed = {
    message2: function message2() {
      return 'computed' + this.message;
    }
  };
  this.methods = {
    test: function test() {
      console.log('appkey', this.appkey);
    },
    init: function init() {
      var cml = this;
      var appkey = cml.appkey;
      var data = {
        token: this.token,
        userId: this.userId
      };
      console.log('data: ', data);
      setListener(appkey, function (status) {
        switch (status) {
          case _RongIMLib240Min2.default.ConnectionStatus.CONNECTED:
            cml.initResult.push('链接成功');
            break;
          case _RongIMLib240Min2.default.ConnectionStatus.CONNECTING:
            cml.initResult.push('正在链接');
            break;
          case _RongIMLib240Min2.default.ConnectionStatus.DISCONNECTED:
            cml.initResult.push('断开连接');
            break;
          case _RongIMLib240Min2.default.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT:
            cml.initResult.push('其他设备登录');
            break;
          case _RongIMLib240Min2.default.ConnectionStatus.DOMAIN_INCORRECT:
            cml.initResult.push('域名不正确');
            break;
          case _RongIMLib240Min2.default.ConnectionStatus.NETWORK_UNAVAILABLE:
            cml.initResult.push('网络不可用');
            break;
        }
      });
      connect(data, function (userId) {
        if (userId) {
          cml.initResult.push("Connect successfully." + userId);
        } else {
          cml.initResult.push('token无效');
        }
      });
    }
  };
};

exports.default = new Index();


exports.default = _chameleonRuntime2.default.createPage(exports.default).getOptions();

/***/ }),

/***/ "../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/cml-extract-css-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/vue-style-loader/index.js!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/css-loader/index.js?{\"sourceMap\":false}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/chameleon-css-loader/index.js?{\"platform\":\"miniapp\",\"cmlType\":\"wx\"}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/postcss-loader/lib/index.js?{\"sourceMap\":false,\"config\":{\"path\":\"/Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/configs/postcss/wx/.postcssrc.js\"}}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/less-loader/dist/cjs.js?{\"sourceMap\":false}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/chameleon-css-loader/index.js?{\"media\":true,\"cmlType\":\"wx\"}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/chameleon-loader/src/selector.js?type=styles&index=0&fileType=page&media=dev&cmlType=wx&isInjectBaseStyle=true&check={\"enable\":true,\"enableTypes\":[]}!./src/pages/index/index.cml":
/***/ (function(module, exports) {

throw new Error("Module build failed: ModuleBuildError: Module build failed: Error: Failed to find 'chameleon-runtime/src/platform/wx/style/index.css'\n  in [\n    /Users/wangyonghao/work/02_github/temp/websdk-demo/chameleon/src/pages/index,\n        /Users/wangyonghao/work/02_github/temp/websdk-demo/chameleon/src/app\n  ]\n    at resolveModule.catch.catch (/Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/postcss-import/lib/resolve-id.js:35:13)\n    at runLoaders (/Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/webpack/lib/NormalModule.js:195:19)\n    at /Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/loader-runner/lib/LoaderRunner.js:364:11\n    at /Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/loader-runner/lib/LoaderRunner.js:230:18\n    at context.callback (/Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/loader-runner/lib/LoaderRunner.js:111:13)\n    at Promise.resolve.then.then.catch (/Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/postcss-loader/lib/index.js:194:71)");

/***/ }),

/***/ "../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/process/browser.js":
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./src/assets/js/RongIMLib-2.4.0.min.js":
/***/ (function(module, exports, __webpack_require__) {

!function(a,b){if(true)module.exports=b();else if("function"==typeof define&&(define.amd||define.cmd))define(b);else{var c=b(),d=c.RongIMClient,e=!!a.RongIMLib;if(e){var f=RongIMLib.RongIMClient||{};for(var g in f)d[g]=f[g]}a.RongIMLib=c,a.RongIMClient=d}}(window,function(){var Polling={SetUserStatusInput:function(){var a={};this.setStatus=function(b){a.status=b},this.toArrayBuffer=function(){return a}},SetUserStatusOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GetUserStatusInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GetUserStatusOutput:function(){var a={};this.setStatus=function(b){a.status=b},this.setSubUserId=function(b){a.subUserId=b},this.toArrayBuffer=function(){return a}},VoipDynamicInput:function(){var a={};this.setEngineType=function(b){a.engineType=b},this.setChannelName=function(b){a.channelName=b},this.setChannelExtra=function(b){a.channelExtra=b},this.toArrayBuffer=function(){return a}},VoipDynamicOutput:function(){var a={};this.setDynamicKey=function(b){a.dynamicKey=b},this.toArrayBuffer=function(){return a}},SubUserStatusInput:function(){var a={};this.setUserid=function(b){a.userid=b},this.toArrayBuffer=function(){return a}},SubUserStatusOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},CleanHisMsgInput:function(){var a={};this.setTargetId=function(b){a.targetId=b},this.setDataTime=function(b){a.dataTime=b},this.setConversationType=function(b){a.conversationType=b},this.toArrayBuffer=function(){return a}},DeleteMsgInput:function(){var a={};this.setType=function(b){a.type=b},this.setConversationId=function(b){a.conversationId=b},this.setMsgs=function(b){a.msgs=b},this.toArrayBuffer=function(){return a}},DeleteMsg:function(){var a={};this.setMsgId=function(b){a.msgId=b},this.setMsgDataTime=function(b){a.msgDataTime=b},this.setDirect=function(b){a.direct=b},this.toArrayBuffer=function(){return a}},DeleteMsgOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},SearchMpInput:function(){var a={};this.setType=function(b){a.type=b},this.setId=function(b){a.id=b},this.toArrayBuffer=function(){return a}},SearchMpOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.setInfo=function(b){a.info=b},this.toArrayBuffer=function(){return a}},MpInfo:function(){var a={};this.setMpid=function(b){a.mpid=b},this.setName=function(b){a.name=b},this.setType=function(b){a.type=b},this.setTime=function(b){a.time=b},this.setPortraitUri=function(b){a.portraitUrl=b},this.setExtra=function(b){a.extra=b},this.toArrayBuffer=function(){return a}},PullMpInput:function(){var a={};this.setMpid=function(b){a.mpid=b},this.setTime=function(b){a.time=b},this.toArrayBuffer=function(){return a}},PullMpOutput:function(){var a={};this.setStatus=function(b){a.status=b},this.setInfo=function(b){a.info=b},this.toArrayBuffer=function(){return a}},MPFollowInput:function(){var a={};this.setId=function(b){a.id=b},this.toArrayBuffer=function(){return a}},MPFollowOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.setInfo=function(b){a.info=b},this.toArrayBuffer=function(){return a}},NotifyMsg:function(){var a={};this.setType=function(b){a.type=b},this.setTime=function(b){a.time=b},this.setChrmId=function(b){a.chrmId=b},this.toArrayBuffer=function(){return a}},SyncRequestMsg:function(){var a={};this.setSyncTime=function(b){a.syncTime=b||0},this.setIspolling=function(b){a.ispolling=!!b},this.setIsweb=function(b){a.isweb=!!b},this.setIsPullSend=function(b){a.isPullSend=!!b},this.setSendBoxSyncTime=function(b){a.sendBoxSyncTime=b},this.toArrayBuffer=function(){return a}},UpStreamMessage:function(){var a={};this.setSessionId=function(b){a.sessionId=b},this.setClassname=function(b){a.classname=b},this.setContent=function(b){b&&(a.content=b)},this.setPushText=function(b){a.pushText=b},this.setUserId=function(b){a.userId=b},this.setAppData=function(b){a.appData=b},this.toArrayBuffer=function(){return a}},DownStreamMessages:function(){var a={};this.setList=function(b){a.list=b},this.setSyncTime=function(b){a.syncTime=b},this.setFinished=function(b){a.finished=b},this.toArrayBuffer=function(){return a}},DownStreamMessage:function(){var a={};this.setFromUserId=function(b){a.fromUserId=b},this.setType=function(b){a.type=b},this.setGroupId=function(b){a.groupId=b},this.setClassname=function(b){a.classname=b},this.setContent=function(b){b&&(a.content=b)},this.setDataTime=function(b){a.dataTime=b},this.setStatus=function(b){a.status=b},this.setMsgId=function(b){a.msgId=b},this.toArrayBuffer=function(){return a}},CreateDiscussionInput:function(){var a={};this.setName=function(b){a.name=b},this.toArrayBuffer=function(){return a}},CreateDiscussionOutput:function(){var a={};this.setId=function(b){a.id=b},this.toArrayBuffer=function(){return a}},ChannelInvitationInput:function(){var a={};this.setUsers=function(b){a.users=b},this.toArrayBuffer=function(){return a}},LeaveChannelInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},QueryChatroomInfoInput:function(){var a={};this.setCount=function(b){a.count=b},this.setOrder=function(b){a.order=b},this.toArrayBuffer=function(){return a}},QueryChatroomInfoOutput:function(){var a={};this.setUserTotalNums=function(b){a.userTotalNums=b},this.setUserInfos=function(b){a.userInfos=b},this.toArrayBuffer=function(){return a}},ChannelEvictionInput:function(){var a={};this.setUser=function(b){a.user=b},this.toArrayBuffer=function(){return a}},RenameChannelInput:function(){var a={};this.setName=function(b){a.name=b},this.toArrayBuffer=function(){return a}},ChannelInfoInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},ChannelInfoOutput:function(){var a={};this.setType=function(b){a.type=b},this.setChannelId=function(b){a.channelId=b},this.setChannelName=function(b){a.channelName=b},this.setAdminUserId=function(b){a.adminUserId=b},this.setFirstTenUserIds=function(b){a.firstTenUserIds=b},this.setOpenStatus=function(b){a.openStatus=b},this.toArrayBuffer=function(){return a}},ChannelInfosInput:function(){var a={};this.setPage=function(b){a.page=b},this.setNumber=function(b){a.number=b},this.toArrayBuffer=function(){return a}},ChannelInfosOutput:function(){var a={};this.setChannels=function(b){a.channels=b},this.setTotal=function(b){a.total=b},this.toArrayBuffer=function(){return a}},MemberInfo:function(){var a={};this.setUserId=function(b){a.userId=b},this.setUserName=function(b){a.userName=b},this.setUserPortrait=function(b){a.userPortrait=b},this.setExtension=function(b){a.extension=b},this.toArrayBuffer=function(){return a}},GroupMembersInput:function(){var a={};this.setPage=function(b){a.page=b},this.setNumber=function(b){a.number=b},this.toArrayBuffer=function(){return a}},GroupMembersOutput:function(){var a={};this.setMembers=function(b){a.members=b},this.setTotal=function(b){a.total=b},this.toArrayBuffer=function(){return a}},GetUserInfoInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GetUserInfoOutput:function(){var a={};this.setUserId=function(b){a.userId=b},this.setUserName=function(b){a.userName=b},this.setUserPortrait=function(b){a.userPortrait=b},this.toArrayBuffer=function(){return a}},GetSessionIdInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GetSessionIdOutput:function(){var a={};this.setSessionId=function(b){a.sessionId=b},this.toArrayBuffer=function(){return a}},GetQNupTokenInput:function(){var a={};this.setType=function(b){a.type=b},this.toArrayBuffer=function(){return a}},GetQNupTokenOutput:function(){var a={};this.setDeadline=function(b){a.deadline=b},this.setToken=function(b){a.token=b},this.toArrayBuffer=function(){return a}},GetQNdownloadUrlInput:function(){var a={};this.setType=function(b){a.type=b},this.setKey=function(b){a.key=b},this.setFileName=function(b){a.fileName=b},this.toArrayBuffer=function(){return a}},GetQNdownloadUrlOutput:function(){var a={};this.setDownloadUrl=function(b){a.downloadUrl=b},this.toArrayBuffer=function(){return a}},Add2BlackListInput:function(){var a={};this.setUserId=function(b){a.userId=b},this.toArrayBuffer=function(){return a}},RemoveFromBlackListInput:function(){var a={};this.setUserId=function(b){a.userId=b},this.toArrayBuffer=function(){return a}},QueryBlackListInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},QueryBlackListOutput:function(){var a={};this.setUserIds=function(b){a.userIds=b},this.toArrayBuffer=function(){return a}},BlackListStatusInput:function(){var a={};this.setUserId=function(b){a.userId=b},this.toArrayBuffer=function(){return a}},BlockPushInput:function(){var a={};this.setBlockeeId=function(b){a.blockeeId=b},this.toArrayBuffer=function(){return a}},ModifyPermissionInput:function(){var a={};this.setOpenStatus=function(b){a.openStatus=b},this.toArrayBuffer=function(){return a}},GroupInput:function(){var a={};this.setGroupInfo=function(b){for(var c=0,d=[];c<b.length;c++)d.push({id:b[c].getContent().id,name:b[c].getContent().name});a.groupInfo=d},this.toArrayBuffer=function(){return a}},GroupOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GroupInfo:function(){var a={};this.setId=function(b){a.id=b},this.setName=function(b){a.name=b},this.getContent=function(){return a},this.toArrayBuffer=function(){return a}},GroupHashInput:function(){var a={};this.setUserId=function(b){a.userId=b},this.setGroupHashCode=function(b){a.groupHashCode=b},this.toArrayBuffer=function(){return a}},GroupHashOutput:function(){var a={};this.setResult=function(b){a.result=b},this.toArrayBuffer=function(){return a}},ChrmInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},ChrmOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},ChrmPullMsg:function(){var a={};this.setSyncTime=function(b){a.syncTime=b},this.setCount=function(b){a.count=b},this.toArrayBuffer=function(){return a}},RelationsInput:function(){var a={};this.setType=function(b){a.type=b},this.setMsg=function(b){a.msg=b},this.setCount=function(b){a.count=b},this.toArrayBuffer=function(){return a}},RelationsOutput:function(){var a={};this.setInfo=function(b){a.info=b},this.toArrayBuffer=function(){return a}},RelationInfo:function(){var a={};this.setType=function(b){a.type=b},this.setUserId=function(b){a.userId=b},this.setMsg=function(b){a.msg=b},this.toArrayBuffer=function(){return a}},HistoryMessageInput:function(){var a={};this.setTargetId=function(b){a.targetId=b},this.setDataTime=function(b){a.dataTime=b},this.setSize=function(b){a.size=b},this.toArrayBuffer=function(){return a}},HistoryMessagesOuput:function(){var a={};this.setList=function(b){a.list=b},this.setSyncTime=function(b){a.syncTime=b},this.setHasMsg=function(b){a.hasMsg=b},this.toArrayBuffer=function(){return a}},HistoryMsgInput:function(){var a={};this.setTargetId=function(b){a.targetId=b},this.setTime=function(b){a.time=b},this.setCount=function(b){a.count=b},this.setOrder=function(b){a.order=b},this.toArrayBuffer=function(){return a}},HistoryMsgOuput:function(){var a={};this.setList=function(b){a.list=b},this.setSyncTime=function(b){a.syncTime=b},this.setHasMsg=function(b){a.hasMsg=b},this.toArrayBuffer=function(){return a}}};for(var f in Polling)Polling[f].decode=function(b){var back={},val=JSON.parse(b)||eval("("+b+")");for(var i in val)back[i]=val[i],back["get"+i.charAt(0).toUpperCase()+i.slice(1)]=function(){return val[i]};return back};var md5=function(){"use strict";function a(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function b(a,b){return a<<b|a>>>32-b}function c(c,d,e,f,g,h){return a(b(a(a(d,c),a(f,h)),g),e)}function d(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)}function e(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)}function f(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)}function g(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)}function h(b,c){b[c>>5]|=128<<c%32,b[14+(c+64>>>9<<4)]=c;var h,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(h=0;h<b.length;h+=16)i=m,j=n,k=o,l=p,m=d(m,n,o,p,b[h],7,-680876936),p=d(p,m,n,o,b[h+1],12,-389564586),o=d(o,p,m,n,b[h+2],17,606105819),n=d(n,o,p,m,b[h+3],22,-1044525330),m=d(m,n,o,p,b[h+4],7,-176418897),p=d(p,m,n,o,b[h+5],12,1200080426),o=d(o,p,m,n,b[h+6],17,-1473231341),n=d(n,o,p,m,b[h+7],22,-45705983),m=d(m,n,o,p,b[h+8],7,1770035416),p=d(p,m,n,o,b[h+9],12,-1958414417),o=d(o,p,m,n,b[h+10],17,-42063),n=d(n,o,p,m,b[h+11],22,-1990404162),m=d(m,n,o,p,b[h+12],7,1804603682),p=d(p,m,n,o,b[h+13],12,-40341101),o=d(o,p,m,n,b[h+14],17,-1502002290),n=d(n,o,p,m,b[h+15],22,1236535329),m=e(m,n,o,p,b[h+1],5,-165796510),p=e(p,m,n,o,b[h+6],9,-1069501632),o=e(o,p,m,n,b[h+11],14,643717713),n=e(n,o,p,m,b[h],20,-373897302),m=e(m,n,o,p,b[h+5],5,-701558691),p=e(p,m,n,o,b[h+10],9,38016083),o=e(o,p,m,n,b[h+15],14,-660478335),n=e(n,o,p,m,b[h+4],20,-405537848),m=e(m,n,o,p,b[h+9],5,568446438),p=e(p,m,n,o,b[h+14],9,-1019803690),o=e(o,p,m,n,b[h+3],14,-187363961),n=e(n,o,p,m,b[h+8],20,1163531501),m=e(m,n,o,p,b[h+13],5,-1444681467),p=e(p,m,n,o,b[h+2],9,-51403784),o=e(o,p,m,n,b[h+7],14,1735328473),n=e(n,o,p,m,b[h+12],20,-1926607734),m=f(m,n,o,p,b[h+5],4,-378558),p=f(p,m,n,o,b[h+8],11,-2022574463),o=f(o,p,m,n,b[h+11],16,1839030562),n=f(n,o,p,m,b[h+14],23,-35309556),m=f(m,n,o,p,b[h+1],4,-1530992060),p=f(p,m,n,o,b[h+4],11,1272893353),o=f(o,p,m,n,b[h+7],16,-155497632),n=f(n,o,p,m,b[h+10],23,-1094730640),m=f(m,n,o,p,b[h+13],4,681279174),p=f(p,m,n,o,b[h],11,-358537222),o=f(o,p,m,n,b[h+3],16,-722521979),n=f(n,o,p,m,b[h+6],23,76029189),m=f(m,n,o,p,b[h+9],4,-640364487),p=f(p,m,n,o,b[h+12],11,-421815835),o=f(o,p,m,n,b[h+15],16,530742520),n=f(n,o,p,m,b[h+2],23,-995338651),m=g(m,n,o,p,b[h],6,-198630844),p=g(p,m,n,o,b[h+7],10,1126891415),o=g(o,p,m,n,b[h+14],15,-1416354905),n=g(n,o,p,m,b[h+5],21,-57434055),m=g(m,n,o,p,b[h+12],6,1700485571),p=g(p,m,n,o,b[h+3],10,-1894986606),o=g(o,p,m,n,b[h+10],15,-1051523),n=g(n,o,p,m,b[h+1],21,-2054922799),m=g(m,n,o,p,b[h+8],6,1873313359),p=g(p,m,n,o,b[h+15],10,-30611744),o=g(o,p,m,n,b[h+6],15,-1560198380),n=g(n,o,p,m,b[h+13],21,1309151649),m=g(m,n,o,p,b[h+4],6,-145523070),p=g(p,m,n,o,b[h+11],10,-1120210379),o=g(o,p,m,n,b[h+2],15,718787259),n=g(n,o,p,m,b[h+9],21,-343485551),m=a(m,i),n=a(n,j),o=a(o,k),p=a(p,l);return[m,n,o,p]}function i(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function j(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function k(a){return i(h(j(a),8*a.length))}function l(a,b){var c,d,e=j(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=h(e,8*a.length)),c=0;c<16;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=h(f.concat(j(b)),512+8*b.length),i(h(g.concat(d),640))}function m(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function n(a){return unescape(encodeURIComponent(a))}function o(a){return k(n(a))}function p(a){return m(o(a))}function q(a,b){return l(n(a),n(b))}function r(a,b){return m(q(a,b))}function s(a,b,c){return b?c?q(b,a):r(b,a):c?o(a):p(a)}return s}(),RongIMLib;!function(a){!function(a){a[a.ALL=1]="ALL",a[a.PART=2]="PART"}(a.MentionedType||(a.MentionedType={}));a.MentionedType;!function(a){a[a.CUSTOMER_SERVICE=1]="CUSTOMER_SERVICE",a[a.RECALL=2]="RECALL"}(a.MethodType||(a.MethodType={}));a.MethodType;!function(a){a[a.IN_BLACK_LIST=0]="IN_BLACK_LIST",a[a.NOT_IN_BLACK_LIST=1]="NOT_IN_BLACK_LIST"}(a.BlacklistStatus||(a.BlacklistStatus={}));a.BlacklistStatus;!function(a){a[a.XHR_POLLING=0]="XHR_POLLING",a[a.WEBSOCKET=1]="WEBSOCKET",a[a.HTTP=0]="HTTP",a[a.HTTPS=1]="HTTPS"}(a.ConnectionChannel||(a.ConnectionChannel={}));a.ConnectionChannel;!function(a){a[a.ONLY_ROBOT=1]="ONLY_ROBOT",a[a.ONLY_HUMAN=2]="ONLY_HUMAN",a[a.ROBOT_FIRST=3]="ROBOT_FIRST",a[a.HUMAN_FIRST=4]="HUMAN_FIRST"}(a.CustomerType||(a.CustomerType={}));a.CustomerType;!function(a){a[a.NONE=0]="NONE",a[a.SQQUENCE=1]="SQQUENCE",a[a.REVERSE=2]="REVERSE"}(a.GetChatRoomType||(a.GetChatRoomType={}));a.GetChatRoomType;!function(a){a[a.CONNECTED=0]="CONNECTED",a[a.CONNECTING=1]="CONNECTING",a[a.DISCONNECTED=2]="DISCONNECTED",a[a.KICKED_OFFLINE_BY_OTHER_CLIENT=6]="KICKED_OFFLINE_BY_OTHER_CLIENT",a[a.WEBSOCKET_UNAVAILABLE=7]="WEBSOCKET_UNAVAILABLE",a[a.NETWORK_UNAVAILABLE=3]="NETWORK_UNAVAILABLE",a[a.DOMAIN_INCORRECT=12]="DOMAIN_INCORRECT",a[a.CONNECTION_CLOSED=4]="CONNECTION_CLOSED",a[a.ULTRALIMIT=1101]="ULTRALIMIT",a[a.REQUEST_NAVI=201]="REQUEST_NAVI",a[a.RESPONSE_NAVI=202]="RESPONSE_NAVI"}(a.ConnectionStatus||(a.ConnectionStatus={}));a.ConnectionStatus;!function(a){a[a.DO_NOT_DISTURB=0]="DO_NOT_DISTURB",a[a.NOTIFY=1]="NOTIFY"}(a.ConversationNotificationStatus||(a.ConversationNotificationStatus={}));a.ConversationNotificationStatus;!function(a){a[a.NONE=0]="NONE",a[a.PRIVATE=1]="PRIVATE",a[a.DISCUSSION=2]="DISCUSSION",a[a.GROUP=3]="GROUP",a[a.CHATROOM=4]="CHATROOM",a[a.CUSTOMER_SERVICE=5]="CUSTOMER_SERVICE",a[a.SYSTEM=6]="SYSTEM",a[a.APP_PUBLIC_SERVICE=7]="APP_PUBLIC_SERVICE",a[a.PUBLIC_SERVICE=8]="PUBLIC_SERVICE"}(a.ConversationType||(a.ConversationType={}));a.ConversationType;!function(a){a[a.OPENED=0]="OPENED",a[a.CLOSED=1]="CLOSED"}(a.DiscussionInviteStatus||(a.DiscussionInviteStatus={}));a.DiscussionInviteStatus;!function(a){a[a.RECALL_MESSAGE=25101]="RECALL_MESSAGE",a[a.SEND_FREQUENCY_TOO_FAST=20604]="SEND_FREQUENCY_TOO_FAST",a[a.RC_MSG_UNAUTHORIZED=20406]="RC_MSG_UNAUTHORIZED",a[a.RC_DISCUSSION_GROUP_ID_INVALID=20407]="RC_DISCUSSION_GROUP_ID_INVALID",a[a.FORBIDDEN_IN_GROUP=22408]="FORBIDDEN_IN_GROUP",a[a.NOT_IN_DISCUSSION=21406]="NOT_IN_DISCUSSION",a[a.NOT_IN_GROUP=22406]="NOT_IN_GROUP",a[a.NOT_IN_CHATROOM=23406]="NOT_IN_CHATROOM",a[a.FORBIDDEN_IN_CHATROOM=23408]="FORBIDDEN_IN_CHATROOM",a[a.RC_CHATROOM_USER_KICKED=23409]="RC_CHATROOM_USER_KICKED",a[a.RC_CHATROOM_NOT_EXIST=23410]="RC_CHATROOM_NOT_EXIST",a[a.RC_CHATROOM_IS_FULL=23411]="RC_CHATROOM_IS_FULL",a[a.RC_CHATROOM_PATAMETER_INVALID=23412]="RC_CHATROOM_PATAMETER_INVALID",a[a.CHATROOM_GET_HISTORYMSG_ERROR=23413]="CHATROOM_GET_HISTORYMSG_ERROR",a[a.CHATROOM_NOT_OPEN_HISTORYMSG_STORE=23414]="CHATROOM_NOT_OPEN_HISTORYMSG_STORE",a[a.SENSITIVE_SHIELD=21501]="SENSITIVE_SHIELD",a[a.SENSITIVE_REPLACE=21502]="SENSITIVE_REPLACE",a[a.TIMEOUT=-1]="TIMEOUT",a[a.UNKNOWN=-2]="UNKNOWN",a[a.JOIN_IN_DISCUSSION=21407]="JOIN_IN_DISCUSSION",a[a.CREATE_DISCUSSION=21408]="CREATE_DISCUSSION",a[a.INVITE_DICUSSION=21409]="INVITE_DICUSSION",a[a.GET_USERINFO_ERROR=23407]="GET_USERINFO_ERROR",a[a.REJECTED_BY_BLACKLIST=405]="REJECTED_BY_BLACKLIST",a[a.RC_NET_CHANNEL_INVALID=30001]="RC_NET_CHANNEL_INVALID",a[a.RC_NET_UNAVAILABLE=30002]="RC_NET_UNAVAILABLE",a[a.RC_MSG_RESP_TIMEOUT=30003]="RC_MSG_RESP_TIMEOUT",a[a.RC_HTTP_SEND_FAIL=30004]="RC_HTTP_SEND_FAIL",a[a.RC_HTTP_REQ_TIMEOUT=30005]="RC_HTTP_REQ_TIMEOUT",a[a.RC_HTTP_RECV_FAIL=30006]="RC_HTTP_RECV_FAIL",a[a.RC_NAVI_RESOURCE_ERROR=30007]="RC_NAVI_RESOURCE_ERROR",a[a.RC_NODE_NOT_FOUND=30008]="RC_NODE_NOT_FOUND",a[a.RC_DOMAIN_NOT_RESOLVE=30009]="RC_DOMAIN_NOT_RESOLVE",a[a.RC_SOCKET_NOT_CREATED=30010]="RC_SOCKET_NOT_CREATED",a[a.RC_SOCKET_DISCONNECTED=30011]="RC_SOCKET_DISCONNECTED",a[a.RC_PING_SEND_FAIL=30012]="RC_PING_SEND_FAIL",a[a.RC_PONG_RECV_FAIL=30013]="RC_PONG_RECV_FAIL",a[a.RC_MSG_SEND_FAIL=30014]="RC_MSG_SEND_FAIL",a[a.RC_CONN_ACK_TIMEOUT=31e3]="RC_CONN_ACK_TIMEOUT",a[a.RC_CONN_PROTO_VERSION_ERROR=31001]="RC_CONN_PROTO_VERSION_ERROR",a[a.RC_CONN_ID_REJECT=31002]="RC_CONN_ID_REJECT",a[a.RC_CONN_SERVER_UNAVAILABLE=31003]="RC_CONN_SERVER_UNAVAILABLE",a[a.RC_CONN_USER_OR_PASSWD_ERROR=31004]="RC_CONN_USER_OR_PASSWD_ERROR",a[a.RC_CONN_NOT_AUTHRORIZED=31005]="RC_CONN_NOT_AUTHRORIZED",a[a.RC_CONN_REDIRECTED=31006]="RC_CONN_REDIRECTED",a[a.RC_CONN_PACKAGE_NAME_INVALID=31007]="RC_CONN_PACKAGE_NAME_INVALID",a[a.RC_CONN_APP_BLOCKED_OR_DELETED=31008]="RC_CONN_APP_BLOCKED_OR_DELETED",a[a.RC_CONN_USER_BLOCKED=31009]="RC_CONN_USER_BLOCKED",a[a.RC_DISCONN_KICK=31010]="RC_DISCONN_KICK",a[a.RC_DISCONN_EXCEPTION=31011]="RC_DISCONN_EXCEPTION",a[a.RC_QUERY_ACK_NO_DATA=32001]="RC_QUERY_ACK_NO_DATA",a[a.RC_MSG_DATA_INCOMPLETE=32002]="RC_MSG_DATA_INCOMPLETE",a[a.BIZ_ERROR_CLIENT_NOT_INIT=33001]="BIZ_ERROR_CLIENT_NOT_INIT",a[a.BIZ_ERROR_DATABASE_ERROR=33002]="BIZ_ERROR_DATABASE_ERROR",a[a.BIZ_ERROR_INVALID_PARAMETER=33003]="BIZ_ERROR_INVALID_PARAMETER",a[a.BIZ_ERROR_NO_CHANNEL=33004]="BIZ_ERROR_NO_CHANNEL",a[a.BIZ_ERROR_RECONNECT_SUCCESS=33005]="BIZ_ERROR_RECONNECT_SUCCESS",a[a.BIZ_ERROR_CONNECTING=33006]="BIZ_ERROR_CONNECTING",a[a.MSG_ROAMING_SERVICE_UNAVAILABLE=33007]="MSG_ROAMING_SERVICE_UNAVAILABLE",a[a.MSG_INSERT_ERROR=33008]="MSG_INSERT_ERROR",a[a.MSG_DEL_ERROR=33009]="MSG_DEL_ERROR",a[a.CONVER_REMOVE_ERROR=34001]="CONVER_REMOVE_ERROR",a[a.CONVER_GETLIST_ERROR=34002]="CONVER_GETLIST_ERROR",a[a.CONVER_SETOP_ERROR=34003]="CONVER_SETOP_ERROR",a[a.CONVER_TOTAL_UNREAD_ERROR=34004]="CONVER_TOTAL_UNREAD_ERROR",a[a.CONVER_TYPE_UNREAD_ERROR=34005]="CONVER_TYPE_UNREAD_ERROR",a[a.CONVER_ID_TYPE_UNREAD_ERROR=34006]="CONVER_ID_TYPE_UNREAD_ERROR",a[a.CONVER_CLEAR_ERROR=34007]="CONVER_CLEAR_ERROR",a[a.CLEAR_HIS_ERROR=34010]="CLEAR_HIS_ERROR",a[a.CLEAR_HIS_TYPE_ERROR=34008]="CLEAR_HIS_TYPE_ERROR",a[a.CLEAR_HIS_TIME_ERROR=34011]="CLEAR_HIS_TIME_ERROR",a[a.CONVER_GET_ERROR=34009]="CONVER_GET_ERROR",a[a.GROUP_SYNC_ERROR=35001]="GROUP_SYNC_ERROR",a[a.GROUP_MATCH_ERROR=35002]="GROUP_MATCH_ERROR",a[a.CHATROOM_ID_ISNULL=36001]="CHATROOM_ID_ISNULL",a[a.CHARTOOM_JOIN_ERROR=36002]="CHARTOOM_JOIN_ERROR",a[a.CHATROOM_HISMESSAGE_ERROR=36003]="CHATROOM_HISMESSAGE_ERROR",a[a.BLACK_ADD_ERROR=37001]="BLACK_ADD_ERROR",a[a.BLACK_GETSTATUS_ERROR=37002]="BLACK_GETSTATUS_ERROR",a[a.BLACK_REMOVE_ERROR=37003]="BLACK_REMOVE_ERROR",a[a.DRAF_GET_ERROR=38001]="DRAF_GET_ERROR",a[a.DRAF_SAVE_ERROR=38002]="DRAF_SAVE_ERROR",a[a.DRAF_REMOVE_ERROR=38003]="DRAF_REMOVE_ERROR",a[a.SUBSCRIBE_ERROR=39001]="SUBSCRIBE_ERROR",a[a.QNTKN_FILETYPE_ERROR=41001]="QNTKN_FILETYPE_ERROR",a[a.QNTKN_GET_ERROR=41002]="QNTKN_GET_ERROR",a[a.COOKIE_ENABLE=51001]="COOKIE_ENABLE",a[a.GET_MESSAGE_BY_ID_ERROR=61001]="GET_MESSAGE_BY_ID_ERROR",a[a.HAVNODEVICEID=24001]="HAVNODEVICEID",a[a.DEVICEIDISHAVE=24002]="DEVICEIDISHAVE",a[a.SUCCESS=0]="SUCCESS",a[a.FEILD=24009]="FEILD",a[a.VOIPISNULL=24013]="VOIPISNULL",a[a.NOENGINETYPE=24010]="NOENGINETYPE",a[a.NULLCHANNELNAME=24011]="NULLCHANNELNAME",a[a.VOIPDYANMICERROR=24012]="VOIPDYANMICERROR",a[a.NOVOIP=24014]="NOVOIP",a[a.INTERNALERRROR=24015]="INTERNALERRROR",a[a.VOIPCLOSE=24016]="VOIPCLOSE",a[a.CLOSE_BEFORE_OPEN=51001]="CLOSE_BEFORE_OPEN",a[a.ALREADY_IN_USE=51002]="ALREADY_IN_USE",a[a.INVALID_CHANNEL_NAME=51003]="INVALID_CHANNEL_NAME",a[a.VIDEO_CONTAINER_IS_NULL=51004]="VIDEO_CONTAINER_IS_NULL",a[a.DELETE_MESSAGE_ID_IS_NULL=61001]="DELETE_MESSAGE_ID_IS_NULL",a[a.CANCEL=1]="CANCEL",a[a.REJECT=2]="REJECT",a[a.HANGUP=3]="HANGUP",a[a.BUSYLINE=4]="BUSYLINE",a[a.NO_RESPONSE=5]="NO_RESPONSE",a[a.ENGINE_UN_SUPPORTED=6]="ENGINE_UN_SUPPORTED",a[a.NETWORK_ERROR=7]="NETWORK_ERROR",a[a.REMOTE_CANCEL=11]="REMOTE_CANCEL",a[a.REMOTE_REJECT=12]="REMOTE_REJECT",a[a.REMOTE_HANGUP=13]="REMOTE_HANGUP",a[a.REMOTE_BUSYLINE=14]="REMOTE_BUSYLINE",a[a.REMOTE_NO_RESPONSE=15]="REMOTE_NO_RESPONSE",a[a.REMOTE_ENGINE_UN_SUPPORTED=16]="REMOTE_ENGINE_UN_SUPPORTED",a[a.REMOTE_NETWORK_ERROR=17]="REMOTE_NETWORK_ERROR",a[a.VOIP_NOT_AVALIABLE=18]="VOIP_NOT_AVALIABLE"}(a.ErrorCode||(a.ErrorCode={}));a.ErrorCode;!function(a){a[a.MEDIA_AUDIO=1]="MEDIA_AUDIO",a[a.MEDIA_VEDIO=2]="MEDIA_VEDIO"}(a.VoIPMediaType||(a.VoIPMediaType={}));a.VoIPMediaType;!function(a){a[a.IMAGE=1]="IMAGE",a[a.AUDIO=2]="AUDIO",a[a.VIDEO=3]="VIDEO",a[a.FILE=100]="FILE"}(a.MediaType||(a.MediaType={}));a.MediaType;!function(a){a[a.SEND=1]="SEND",a[a.RECEIVE=2]="RECEIVE"}(a.MessageDirection||(a.MessageDirection={}));a.MessageDirection;!function(a){a[a.IMAGE=1]="IMAGE",a[a.AUDIO=2]="AUDIO",a[a.VIDEO=3]="VIDEO",a[a.FILE=4]="FILE"}(a.FileType||(a.FileType={}));a.FileType;!function(a){a[a.RC_REAL_TIME_LOCATION_NOT_INIT=-1]="RC_REAL_TIME_LOCATION_NOT_INIT",a[a.RC_REAL_TIME_LOCATION_SUCCESS=0]="RC_REAL_TIME_LOCATION_SUCCESS",a[a.RC_REAL_TIME_LOCATION_GPS_DISABLED=1]="RC_REAL_TIME_LOCATION_GPS_DISABLED",a[a.RC_REAL_TIME_LOCATION_CONVERSATION_NOT_SUPPORT=2]="RC_REAL_TIME_LOCATION_CONVERSATION_NOT_SUPPORT",a[a.RC_REAL_TIME_LOCATION_IS_ON_GOING=3]="RC_REAL_TIME_LOCATION_IS_ON_GOING",a[a.RC_REAL_TIME_LOCATION_EXCEED_MAX_PARTICIPANT=4]="RC_REAL_TIME_LOCATION_EXCEED_MAX_PARTICIPANT",a[a.RC_REAL_TIME_LOCATION_JOIN_FAILURE=5]="RC_REAL_TIME_LOCATION_JOIN_FAILURE",a[a.RC_REAL_TIME_LOCATION_START_FAILURE=6]="RC_REAL_TIME_LOCATION_START_FAILURE",a[a.RC_REAL_TIME_LOCATION_NETWORK_UNAVAILABLE=7]="RC_REAL_TIME_LOCATION_NETWORK_UNAVAILABLE"}(a.RealTimeLocationErrorCode||(a.RealTimeLocationErrorCode={}));a.RealTimeLocationErrorCode;!function(a){a[a.RC_REAL_TIME_LOCATION_STATUS_IDLE=0]="RC_REAL_TIME_LOCATION_STATUS_IDLE",a[a.RC_REAL_TIME_LOCATION_STATUS_INCOMING=1]="RC_REAL_TIME_LOCATION_STATUS_INCOMING",a[a.RC_REAL_TIME_LOCATION_STATUS_OUTGOING=2]="RC_REAL_TIME_LOCATION_STATUS_OUTGOING",a[a.RC_REAL_TIME_LOCATION_STATUS_CONNECTED=3]="RC_REAL_TIME_LOCATION_STATUS_CONNECTED"}(a.RealTimeLocationStatus||(a.RealTimeLocationStatus={}));a.RealTimeLocationStatus;!function(a){a[a.READ=1]="READ",a[a.LISTENED=2]="LISTENED",a[a.DOWNLOADED=4]="DOWNLOADED",a[a.RETRIEVED=8]="RETRIEVED",a[a.UNREAD=0]="UNREAD"}(a.ReceivedStatus||(a.ReceivedStatus={}));a.ReceivedStatus;!function(a){a[a.READ=1]="READ",a[a.LISTENED=2]="LISTENED",a[a.DOWNLOADED=4]="DOWNLOADED",a[a.RETRIEVED=8]="RETRIEVED",a[a.UNREAD=0]="UNREAD"}(a.ReadStatus||(a.ReadStatus={}));a.ReadStatus;!function(a){a[a.EXACT=0]="EXACT",a[a.FUZZY=1]="FUZZY"}(a.SearchType||(a.SearchType={}));a.SearchType;!function(a){a[a.SENDING=10]="SENDING",a[a.FAILED=20]="FAILED",a[a.SENT=30]="SENT",a[a.RECEIVED=40]="RECEIVED",a[a.READ=50]="READ",a[a.DESTROYED=60]="DESTROYED"}(a.SentStatus||(a.SentStatus={}));a.SentStatus;!function(a){a[a.ACCEPTED=0]="ACCEPTED",a[a.UNACCEPTABLE_PROTOCOL_VERSION=1]="UNACCEPTABLE_PROTOCOL_VERSION",a[a.IDENTIFIER_REJECTED=2]="IDENTIFIER_REJECTED",a[a.SERVER_UNAVAILABLE=3]="SERVER_UNAVAILABLE",a[a.TOKEN_INCORRECT=4]="TOKEN_INCORRECT",a[a.NOT_AUTHORIZED=5]="NOT_AUTHORIZED",a[a.REDIRECT=6]="REDIRECT",a[a.PACKAGE_ERROR=7]="PACKAGE_ERROR",a[a.APP_BLOCK_OR_DELETE=8]="APP_BLOCK_OR_DELETE",a[a.BLOCK=9]="BLOCK",a[a.TOKEN_EXPIRE=10]="TOKEN_EXPIRE",a[a.DEVICE_ERROR=11]="DEVICE_ERROR"}(a.ConnectionState||(a.ConnectionState={}));a.ConnectionState;!function(a){a[a.ROOM=1]="ROOM",a[a.PERSON=2]="PERSON"}(a.RTCAPIType||(a.RTCAPIType={}));a.RTCAPIType}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(){}return b.getInstance=function(){if(!b._instance)throw new Error("RongIMClient is not initialized. Call .init() method first.");return b._instance},b.showError=function(a){console&&console.error&&console.error(JSON.stringify(a))},b.logger=function(a){var c=a.code,d=b.LogFactory[c]||a;d.funcName=a.funcName,d.msg=a.msg||d.msg,b._memoryStore.depend.showError&&b.showError(d)},b.logCallback=function(a,c){return{onSuccess:a.onSuccess,onError:function(d){b.logger({code:d,funcName:c}),a.onError(d)}}},b.logSendCallback=function(a,c){return{onSuccess:a.onSuccess,onError:function(d,e){b.logger({code:d,funcName:c}),a.onError(d,e)},onBefore:a.onBefore}},b.init=function(c,d,e,f){if(b._instance)return b._memoryStore.sdkInfo;b._instance=new b,e=e||{};var g="http://",h="ws://";"https:"==location.protocol&&(h="wss://",g="https://");var i=!1;"function"!=typeof WebSocket&&(i=!0);var j=function(){var a=typeof WebSocket,b="number"==typeof WebSocket.OPEN;return a&&b};"object"==typeof WebSocket&&j()&&(i=!1);var k=function(){return document.documentElement.addBehavior};a.RongUtil.supportLocalStorage()?b._storageProvider=new a.LocalStorageProvider:k()?b._storageProvider=new a.UserDataProvider:b._storageProvider=new a.MemeoryProvider;var l=b._storageProvider.getItem("serverIndex");b.serverStore.index=l||0;var m="{0}{1}",n={navi:"nav.cn.ronghub.com",api:"api.cn.ronghub.com"};a.RongUtil.forEach(n,function(b,c){n[c]=a.RongUtil.stringFormat(m,[g,b])}),a.RongUtil.forEach(n,function(b,c){var d=c in e,f={path:e[c],tmpl:m,protocol:g,sub:!0};b=d?a.RongUtil.formatProtoclPath(f):b,e[c]=b});var o={protobuf:"cdn.ronghub.com/protobuf-2.3.4.min.js"};a.RongUtil.forEach(o,function(b,c){o[c]=a.RongUtil.stringFormat(m,[g,b])}),a.RongUtil.extend(o,e);var p={isPolling:i,wsScheme:h,protocol:g,showError:!0,openMp:!0,snifferTime:2e3};a.RongUtil.extend(p,e),a.RongUtil.isFunction(e.protobuf)&&(b.Protobuf=e.protobuf),b.userStatusObserver=new a.RongObserver,(new a.FeaturePatcher).patchAll();var q={token:"",callback:null,lastReadTime:new a.LimitableMap,historyMessageLimit:new a.MemoryCache,conversationList:[],appKey:c,publicServiceMap:new a.PublicServiceMap,providerType:1,deltaTime:0,filterMessages:[],isSyncRemoteConverList:!0,otherDevice:!1,custStore:{},converStore:{latestMessage:{}},connectAckTime:0,voipStategy:0,isFirstPingMsg:!0,depend:e,listenerList:b._memoryStore.listenerList,notification:{}};b._memoryStore=q,d&&"[object Object]"==Object.prototype.toString.call(d)?b._dataAccessProvider=d:b._dataAccessProvider=new a.ServerDataProvider,e.appCallback=f;var r=b._dataAccessProvider.init(c,e);return b._memoryStore.sdkInfo=r,b._dataAccessProvider.setServerInfo({navi:location.protocol+e.navi+"/navi.xml"}),b.MessageParams={TextMessage:{objectName:"RC:TxtMsg",msgTag:new a.MessageTag(!0,!0)},ImageMessage:{objectName:"RC:ImgMsg",msgTag:new a.MessageTag(!0,!0)},DiscussionNotificationMessage:{objectName:"RC:DizNtf",msgTag:new a.MessageTag(!1,!0)},VoiceMessage:{objectName:"RC:VcMsg",msgTag:new a.MessageTag(!0,!0)},RichContentMessage:{objectName:"RC:ImgTextMsg",msgTag:new a.MessageTag(!0,!0)},FileMessage:{objectName:"RC:FileMsg",msgTag:new a.MessageTag(!0,!0)},HandshakeMessage:{objectName:"",msgTag:new a.MessageTag(!0,!0)},UnknownMessage:{objectName:"",msgTag:new a.MessageTag(!0,!0)},LocationMessage:{objectName:"RC:LBSMsg",msgTag:new a.MessageTag(!0,!0)},InformationNotificationMessage:{objectName:"RC:InfoNtf",msgTag:new a.MessageTag(!1,!0)},ContactNotificationMessage:{objectName:"RC:ContactNtf",msgTag:new a.MessageTag(!1,!0)},ProfileNotificationMessage:{objectName:"RC:ProfileNtf",msgTag:new a.MessageTag(!1,!0)},CommandNotificationMessage:{objectName:"RC:CmdNtf",msgTag:new a.MessageTag(!0,!0)},PublicServiceRichContentMessage:{objectName:"RC:PSImgTxtMsg",msgTag:new a.MessageTag(!0,!0)},PublicServiceMultiRichContentMessage:{objectName:"RC:PSMultiImgTxtMsg",msgTag:new a.MessageTag(!0,!0)},JrmfRedPacketMessage:{objectName:"RCJrmf:RpMsg",msgTag:new a.MessageTag(!0,!0)},JrmfRedPacketOpenedMessage:{objectName:"RCJrmf:RpOpendMsg",msgTag:new a.MessageTag(!0,!0)},GroupNotificationMessage:{objectName:"RC:GrpNtf",msgTag:new a.MessageTag(!1,!0)},CommandMessage:{objectName:"RC:CmdMsg",msgTag:new a.MessageTag(!1,!1)},TypingStatusMessage:{objectName:"RC:TypSts",msgTag:new a.MessageTag(!1,!1)},PublicServiceCommandMessage:{objectName:"RC:PSCmd",msgTag:new a.MessageTag(!1,!1)},RecallCommandMessage:{objectName:"RC:RcCmd",msgTag:new a.MessageTag(!1,!0)},SyncReadStatusMessage:{objectName:"RC:SRSMsg",msgTag:new a.MessageTag(!1,!1)},ReadReceiptRequestMessage:{objectName:"RC:RRReqMsg",msgTag:new a.MessageTag(!1,!1)},ReadReceiptResponseMessage:{objectName:"RC:RRRspMsg",msgTag:new a.MessageTag(!1,!1)},ChangeModeResponseMessage:{objectName:"RC:CsChaR",msgTag:new a.MessageTag(!1,!1)},ChangeModeMessage:{objectName:"RC:CSCha",msgTag:new a.MessageTag(!1,!1)},
EvaluateMessage:{objectName:"RC:CsEva",msgTag:new a.MessageTag(!1,!1)},CustomerContact:{objectName:"RC:CsContact",msgTag:new a.MessageTag(!1,!1)},HandShakeMessage:{objectName:"RC:CsHs",msgTag:new a.MessageTag(!1,!1)},HandShakeResponseMessage:{objectName:"RC:CsHsR",msgTag:new a.MessageTag(!1,!1)},SuspendMessage:{objectName:"RC:CsSp",msgTag:new a.MessageTag(!1,!1)},TerminateMessage:{objectName:"RC:CsEnd",msgTag:new a.MessageTag(!1,!1)},CustomerStatusUpdateMessage:{objectName:"RC:CsUpdate",msgTag:new a.MessageTag(!1,!1)},ReadReceiptMessage:{objectName:"RC:ReadNtf",msgTag:new a.MessageTag(!1,!1)}},b.MessageParams.AcceptMessage={objectName:"RC:VCAccept",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.RingingMessage={objectName:"RC:VCRinging",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.SummaryMessage={objectName:"RC:VCSummary",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.HungupMessage={objectName:"RC:VCHangup",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.InviteMessage={objectName:"RC:VCInvite",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.MediaModifyMessage={objectName:"RC:VCModifyMedia",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.MemberModifyMessage={objectName:"RC:VCModifyMem",msgTag:new a.MessageTag(!1,!1)},b.MessageType={TextMessage:"TextMessage",ImageMessage:"ImageMessage",DiscussionNotificationMessage:"DiscussionNotificationMessage",VoiceMessage:"VoiceMessage",RichContentMessage:"RichContentMessage",HandshakeMessage:"HandshakeMessage",UnknownMessage:"UnknownMessage",LocationMessage:"LocationMessage",InformationNotificationMessage:"InformationNotificationMessage",ContactNotificationMessage:"ContactNotificationMessage",ProfileNotificationMessage:"ProfileNotificationMessage",CommandNotificationMessage:"CommandNotificationMessage",CommandMessage:"CommandMessage",TypingStatusMessage:"TypingStatusMessage",ChangeModeResponseMessage:"ChangeModeResponseMessage",ChangeModeMessage:"ChangeModeMessage",EvaluateMessage:"EvaluateMessage",HandShakeMessage:"HandShakeMessage",HandShakeResponseMessage:"HandShakeResponseMessage",SuspendMessage:"SuspendMessage",TerminateMessage:"TerminateMessage",CustomerContact:"CustomerContact",CustomerStatusUpdateMessage:"CustomerStatusUpdateMessage",SyncReadStatusMessage:"SyncReadStatusMessage",ReadReceiptRequestMessage:"ReadReceiptRequestMessage",ReadReceiptResponseMessage:"ReadReceiptResponseMessage",FileMessage:"FileMessage",AcceptMessage:"AcceptMessage",RingingMessage:"RingingMessage",SummaryMessage:"SummaryMessage",HungupMessage:"HungupMessage",InviteMessage:"InviteMessage",MediaModifyMessage:"MediaModifyMessage",MemberModifyMessage:"MemberModifyMessage",JrmfRedPacketMessage:"JrmfRedPacketMessage",JrmfRedPacketOpenedMessage:"JrmfRedPacketOpenedMessage",GroupNotificationMessage:"GroupNotificationMessage",PublicServiceRichContentMessage:"PublicServiceRichContentMessage",PublicServiceMultiRichContentMessage:"PublicServiceMultiRichContentMessage",PublicServiceCommandMessage:"PublicServiceCommandMessage",RecallCommandMessage:"RecallCommandMessage",ReadReceiptMessage:"ReadReceiptMessage"},b.LogFactory={"-1":{code:"-1",msg:"服务器超时"},"-2":{code:"-2",msg:"未知原因失败"},"-3":{code:"-3",msg:"参数错误"},"-4":{code:"-4",msg:"参数不正确或尚未实例化"},25101:{code:"25101",msg:"撤回消息参数错误",desc:"请检查撤回消息参数 https://rongcloud.github.io/websdk-demo/api-test.html"},25102:{code:"25101",msg:"只能撤回自发发送的消息"},20604:{code:"20604",msg:"发送频率过快",desc:"https://developer.rongcloud.cn/ticket/info/9Q3L6vRKd1cLS7rycA==?type=1"},20406:{code:"20406",msg:"被禁言"},23407:{code:"23407",msg:"获取用户失败"},20407:{code:"20407",msg:"群组Id无效"},22408:{code:"22408",msg:"群组被禁言"},22406:{code:"22406",msg:"不在群组"},35001:{code:"35001",msg:"群组同步异常"},35002:{code:"35002",msg:"匹配群信息异常"},21406:{code:"21406",msg:"不在讨论组"},21407:{code:"21407",msg:"加入讨论失败"},21408:{code:"21408",msg:"创建讨论组失败"},21409:{code:"21409",msg:"设置讨论组邀请状态失败"},23406:{code:"23406",msg:"不在聊天室"},23408:{code:"23408",msg:"聊天室被禁言"},23409:{code:"23409",msg:"聊天室中成员被踢出"},23410:{code:"23410",msg:"聊天室不存在"},23411:{code:"23411",msg:"聊天室成员已满"},23412:{code:"23412",msg:"获取聊天室信息参数无效"},23413:{code:"23413",msg:"聊天室异常"},23414:{code:"23414",msg:"没有打开聊天室消息存储"},36001:{code:"36001",msg:"加入聊天室Id为空"},36002:{code:"36002",msg:"加入聊天室失败"},36003:{code:"36003",msg:"拉取聊天室历史消息失败"},24001:{code:"24001",msg:"没有注册DeviveId 也就是用户没有登陆"},24002:{code:"24002",msg:"用户已经存在"},0:{code:"0",msg:"成功"},24009:{code:"24009",msg:"没有对应的用户或token"},24013:{code:"24013",msg:"voip为空"},24010:{code:"24010",msg:"不支持的Voip引擎"},24011:{code:"24011",msg:"channelName 是空"},24012:{code:"24012",msg:"生成Voipkey失败"},24014:{code:"24014",msg:"没有配置voip"},24015:{code:"24015",msg:"服务器内部错误"},24016:{code:"24016",msg:"VOIP close"},30001:{code:"30001",msg:"通信过程中，当前Socket不存在"},30002:{code:"30002",msg:"Socket连接不可用"},30003:{code:"30003",msg:"通信超时"},30004:{code:"30004",msg:"导航操作时，Http请求失败"},30005:{code:"30005",msg:"HTTP请求失败"},30006:{code:"30006",msg:"HTTP接收失败"},30007:{code:"30007",msg:"导航资源错误"},30008:{code:"30008",msg:"没有有效数据"},30009:{code:"30009",msg:"不存在有效 IP 地址"},30010:{code:"30010",msg:"创建 Socket 失败"},30011:{code:"30011",msg:" Socket 被断开"},30012:{code:"30012",msg:"PING 操作失败"},30013:{code:"30013",msg:"PING 超时"},30014:{code:"30014",msg:"消息发送失败"},30016:{code:"30016",msg:"消息大小超限，最大 128 KB"},31000:{code:"31000",msg:"做 connect 连接时，收到的 ACK 超时"},31001:{code:"31001",msg:"参数错误"},31002:{code:"31002",msg:"参数错误，App Id 错误"},31003:{code:"31003",msg:"服务器不可用"},31004:{code:"31004",msg:"Token 错误"},31005:{code:"31005",msg:"App Id 与 Token 不匹配"},31006:{code:"31006",msg:"重定向，地址错误"},31007:{code:"31007",msg:"NAME 与后台注册信息不一致"},31008:{code:"31008",msg:"APP 被屏蔽、删除或不存在"},31009:{code:"31009",msg:"用户被屏蔽"},31010:{code:"31010",msg:"Disconnect，由服务器返回，比如用户互踢"},31011:{code:"31011",msg:"Disconnect，由服务器返回，比如用户互踢"},32001:{code:"32001",msg:"协议层内部错误。query，上传下载过程中数据错误"},32002:{code:"32002",msg:"协议层内部错误"},33001:{code:"33001",msg:"未调用 init 初始化函数"},33002:{code:"33002",msg:"数据库初始化失败"},33003:{code:"33003",msg:"传入参数无效"},33004:{code:"33004",msg:"通道无效"},33005:{code:"33005",msg:"重新连接成功"},33006:{code:"33006",msg:"连接中，再调用 connect 被拒绝"},33007:{code:"33007",msg:"消息漫游服务未开通"},33008:{code:"33008",msg:"消息添加失败"},33009:{code:"33009",msg:"消息删除失败"},34001:{code:"34001",msg:"删除会话失败"},34002:{code:"34002",msg:"拉取历史消息失败"},34003:{code:"34003",msg:"会话指定异常"},34004:{code:"34004",msg:"获取会话未读消息总数失败"},34005:{code:"34005",msg:"获取指定会话类型未读消息数异常"},34006:{code:"34006",msg:"获取指定用户ID&会话类型未读消息数异常"},34007:{code:"34007",msg:"清除会话消息异常"},34008:{code:"34008",msg:"获取会话消息异常"},34009:{code:"34009",msg:"清除历史消息会话类型不正确"},34010:{code:"34010",msg:"清除历史消息失败，请检查传入参数"},37001:{code:"37001",msg:"加入黑名单异常"},37002:{code:"37002",msg:"获得指定人员再黑名单中的状态异常"},37003:{code:"37003",msg:"移除黑名单异常"},405:{code:"405",msg:"在黑名单中"},38001:{code:"38001",msg:"获取草稿失败"},38002:{code:"38002",msg:"保存草稿失败"},38003:{code:"38003",msg:"删除草稿失败"},39001:{code:"39001",msg:"关注公众号失败"},41001:{code:"41001",msg:"文件类型错误"},41002:{code:"41002",msg:"获取七牛token失败"},51001:{code:"51001",msg:"未安装或未启动插件"},51002:{code:"51002",msg:"视频已经存在"},51003:{code:"51003",msg:"无效的channelName"},51004:{code:"51004",msg:"视频内容为空"},61001:{code:"61001",msg:"删除消息数组长度为 0"}},r},b.initApp=function(a,c){b.init(a.appkey,a.dataAccessProvider,a.opts,function(){var a=b._instance;c(null,a)})},b.connect=function(c,d,e,f){a.CheckParam.getInstance().check(["string","object","string|null|object|global|undefined","object|null|global|undefined"],"connect",!0,arguments);var g={onSuccess:d.onSuccess,onTokenIncorrect:d.onTokenIncorrect,onError:function(a){b.logger({code:a,funcName:"connect"}),d.onError(a)}};b._dataAccessProvider.connect(c,g,e,f)},b.reconnect=function(a,c){var d={onSuccess:a.onSuccess,onTokenIncorrect:a.onTokenIncorrect,onError:function(c){b.logger({code:c,funcName:"connect"}),a.onError(c)}};b._dataAccessProvider.reconnect(d,c)},b.registerMessageType=function(a,c,d,e,f){b._dataAccessProvider.registerMessageType(a,c,d,e,f),b.RegisterMessage[a].messageName=a,b.MessageType[a]=a,b.MessageParams[a]={objectName:c,msgTag:d}},b.prototype.registerMessageTypes=function(a){a=a||{},b._dataAccessProvider.registerMessageTypes(a)},b.setConnectionStatusListener=function(a){b._dataAccessProvider?b._dataAccessProvider.setConnectionStatusListener(a):b._memoryStore.listenerList.push(a)},b.statusWatch=function(a){"function"==typeof a&&b.statusListeners.push(a)},b.setOnReceiveMessageListener=function(a){b._dataAccessProvider?b._dataAccessProvider.setOnReceiveMessageListener(a):b._memoryStore.listenerList.push(a)},b.prototype.logout=function(){b._dataAccessProvider.logout()},b.prototype.disconnect=function(){b._dataAccessProvider.disconnect()},b.prototype.startCustomService=function(c,d,e){if(c&&d){var f=new a.HandShakeMessage(e),g=this;a.RongIMClient._memoryStore.custStore.isInit=!0,b.getInstance().sendMessage(a.ConversationType.CUSTOMER_SERVICE,c,f,{onSuccess:function(a){a.isBlack?(d.onError(),g.stopCustomeService(c,{onSuccess:function(){},onError:function(){}})):d.onSuccess()},onError:function(){d.onError()},onBefore:function(){}})}},b.prototype.stopCustomeService=function(c,d){if(c&&d){var e=b._memoryStore.custStore[c];if(e){var f=new a.SuspendMessage({sid:e.sid,uid:e.uid,pid:e.pid});this.sendCustMessage(c,f,{onSuccess:function(){setTimeout(function(){d.onSuccess()})},onError:function(){setTimeout(function(){d.onError()})}})}}},b.prototype.switchToHumanMode=function(c,d){if(c&&d){var e=b._memoryStore.custStore[c];if(e){var f=new a.ChangeModeMessage({sid:e.sid,uid:e.uid,pid:e.pid});this.sendCustMessage(c,f,d)}}},b.prototype.evaluateRebotCustomService=function(c,d,e,f){if(c&&f){var g=b._memoryStore.custStore[c];if(g){var h=new a.EvaluateMessage({sid:g.sid,uid:g.uid,pid:g.pid,isRobotResolved:d,sugest:e,type:0});this.sendCustMessage(c,h,f)}}},b.prototype.evaluateHumanCustomService=function(c,d,e,f){if(c&&f){var g=b._memoryStore.custStore[c];if(g){var h=new a.EvaluateMessage({sid:g.sid,uid:g.uid,pid:g.pid,humanValue:d,sugest:e,type:1});this.sendCustMessage(c,h,f)}}},b.prototype.sendCustMessage=function(c,d,e){b.getInstance().sendMessage(a.ConversationType.CUSTOMER_SERVICE,c,d,{onSuccess:function(a){e.onSuccess()},onError:function(){e.onError()},onBefore:function(){}})},b.prototype.getCurrentConnectionStatus=function(){return b._dataAccessProvider.getCurrentConnectionStatus()},b.prototype.getConnectionChannel=function(){return a.Transportations._TransportType==a.Socket.XHR_POLLING?a.ConnectionChannel.XHR_POLLING:a.Transportations._TransportType==a.Socket.WEBSOCKET?a.ConnectionChannel.WEBSOCKET:void 0},b.prototype.getStorageProvider=function(){return 1==b._memoryStore.providerType?"ServerDataProvider":"OtherDataProvider"},b.prototype.setFilterMessages=function(a){"[object Array]"==Object.prototype.toString.call(a)&&(b._memoryStore.filterMessages=a)},b.prototype.getAgoraDynamicKey=function(a,c,d){b._dataAccessProvider.getAgoraDynamicKey(a,c,d)},b.prototype.getCurrentUserId=function(){return a.Bridge._client.userId},b.prototype.getDeltaTime=function(){return b._dataAccessProvider.getDelaTime()},b.prototype.getMessage=function(a,c){b._dataAccessProvider.getMessage(a,b.logCallback(c,"getMessage"))},b.prototype.deleteLocalMessages=function(a,c,d,e){b._dataAccessProvider.removeLocalMessage(a,c,d,b.logCallback(e,"deleteLocalMessages"))},b.prototype.updateMessage=function(a,c){b._dataAccessProvider.updateMessage(a,b.logCallback(c,"updateMessage"))},b.prototype.clearData=function(){return b._dataAccessProvider.clearData()},b.prototype.clearMessages=function(a,c,d){b._dataAccessProvider.clearMessages(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"clearMessages"}),d.onError(a)})}})},b.prototype.clearMessagesUnreadStatus=function(a,c,d){b._dataAccessProvider.updateMessages(a,c,"readStatus",null,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"clearMessagesUnreadStatus"}),d.onError(a)})}})},b.prototype.deleteRemoteMessages=function(c,d,e,f){if(a.CheckParam.getInstance().check(["number","string|number","array","object"],"deleteRemoteMessages",!1,arguments),0==e.length){var g=a.ErrorCode.DELETE_MESSAGE_ID_IS_NULL;return b.logger({code:g,funcName:"deleteRemoteMessages"}),void f.onError(a.ErrorCode.DELETE_MESSAGE_ID_IS_NULL)}e.length>100&&(e.length=100),f.onSuccess(!0)},b.prototype.deleteMessages=function(a,c,d,e){b._dataAccessProvider.removeMessage(a,c,d,{onSuccess:function(a){setTimeout(function(){e.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"deleteMessages"}),e.onError(a)})}})},b.prototype.sendLocalMessage=function(c,d){a.CheckParam.getInstance().check(["object","object"],"sendLocalMessage",!1,arguments),b._dataAccessProvider.updateMessage(c),this.sendMessage(c.conversationType,c.targetId,c.content,b.logSendCallback(d,"sendLocalMessage"))},b.prototype.sendMessage=function(c,d,e,f,g,h,i,j,k){a.CheckParam.getInstance().check(["number","string|number","object","object","undefined|object|null|global|boolean","undefined|object|null|global|string","undefined|object|null|global|string","undefined|object|null|global|number","undefined|object|null|global"],"sendMessage",!1,arguments),b._dataAccessProvider.sendMessage(c,d,e,b.logSendCallback(f,"sendMessage"),g,h,i,j,k)},b.prototype.sendReceiptResponse=function(a,c,d){b._dataAccessProvider.sendReceiptResponse(a,c,b.logSendCallback(d,"sendReceiptResponse"))},b.prototype.sendTypingStatusMessage=function(a,c,d,e){b._dataAccessProvider.sendTypingStatusMessage(a,c,d,b.logSendCallback(e,"sendTypingStatusMessage"))},b.prototype.sendStatusMessage=function(a,b,c){throw new Error("Not implemented yet")},b.prototype.sendTextMessage=function(a,c,d,e){b._dataAccessProvider.sendTextMessage(a,c,d,b.logSendCallback(e,"sendTextMessage"))},b.prototype.sendRecallMessage=function(c,d){var e=b.logSendCallback(d,"sendRecallMessage");if(c.senderUserId!=a.Bridge._client.userId){var e=b.logSendCallback(d,"sendRecallMessage");return void e.onError(a.ErrorCode.RECALL_MESSAGE,c)}b._dataAccessProvider.sendRecallMessage(c,e)},b.prototype.insertMessage=function(a,c,d,e){b._dataAccessProvider.addMessage(a,c,d,b.logCallback(e,"insertMessage"))},b.prototype.setMessageContent=function(a,c,d){b._dataAccessProvider.setMessageContent(a,c,d)},b.prototype.getHistoryMessages=function(c,d,e,f,g,h,i){if(a.CheckParam.getInstance().check(["number","string|number","number|null|global|object","number","object","undefined|object|null|global|string","number|null|global|object"],"getHistoryMessages",!1,arguments),f>20)throw new Error("HistroyMessage count must be less than or equal to 20!");if(c.valueOf()<0)throw new Error("ConversationType must be greater than -1");b._dataAccessProvider.getHistoryMessages(c,d,e,f,b.logCallback(g,"getHistoryMessages"),h,i)},b.prototype.getRemoteHistoryMessages=function(c,d,e,f,g,h){a.CheckParam.getInstance().check(["number","string|number","number|null|global|object","number","object","undefined|null|global|object"],"getRemoteHistoryMessages",!1,arguments);var i={errorCode:a.ErrorCode.RC_CONN_PROTO_VERSION_ERROR,funcName:"getRemoteHistoryMessages"};return f>20?(b.logger(i),void g.onError(a.ErrorCode.RC_CONN_PROTO_VERSION_ERROR)):c.valueOf()<0?(b.logger(i),void g.onError(a.ErrorCode.RC_CONN_PROTO_VERSION_ERROR)):void b._dataAccessProvider.getRemoteHistoryMessages(c,d,e,f,b.logCallback(g,"getRemoteHistoryMessages"),h)},b.prototype.clearHistoryMessages=function(a,c){b._dataAccessProvider.clearHistoryMessages(a,c)},b.prototype.clearRemoteHistoryMessages=function(a,c){b._dataAccessProvider.clearRemoteHistoryMessages(a,b.logCallback(c,"clearRemoteHistoryMessages"))},b.prototype.hasRemoteUnreadMessages=function(a,c){b._dataAccessProvider.hasRemoteUnreadMessages(a,b.logCallback(c,"hasRemoteUnreadMessages"))},b.prototype.getTotalUnreadCount=function(a,c){b._dataAccessProvider.getTotalUnreadCount({onSuccess:function(b){setTimeout(function(){a.onSuccess(b)})},onError:function(c){setTimeout(function(){b.logger({code:c,funcName:"getTotalUnreadCount"}),a.onError(c)})}},c)},b.prototype.getConversationUnreadCount=function(a,c){b._dataAccessProvider.getConversationUnreadCount(a,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"getConversationUnreadCount"}),c.onError(a)})}})},b.prototype.getUnreadCount=function(a,c,d){b._dataAccessProvider.getUnreadCount(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"getUnreadCount"}),d.onError(a)})}})},b.prototype.setUnreadCount=function(c,d,e){a.CheckParam.getInstance().check(["number","string","number"],"setUnreadCount",!1,arguments),b._dataAccessProvider.setUnreadCount(c,d,e)},b.prototype.clearUnreadCountByTimestamp=function(a,c,d,e){b._dataAccessProvider.clearUnreadCountByTimestamp(a,c,d,b.logCallback(e,"clearUnreadCountByTimestamp"))},b.prototype.clearUnreadCount=function(a,c,d){b._dataAccessProvider.clearUnreadCount(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"clearUnreadCount"}),d.onError(a)})}})},b.prototype.clearTotalUnreadCount=function(a){b._dataAccessProvider.clearTotalUnreadCount({onSuccess:function(b){a.onSuccess(b)},onError:function(c){setTimeout(function(){b.logger({code:c,funcName:"clearTotalUnreadCount"}),a.onError(c)})}})},b.prototype.clearLocalStorage=function(a){b._storageProvider.clearItem(),a()},b.prototype.setMessageExtra=function(a,c,d){b._dataAccessProvider.setMessageExtra(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"setMessageExtra"}),d.onError(a)})}})},b.prototype.setMessageReceivedStatus=function(a,c,d){b._dataAccessProvider.setMessageReceivedStatus(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"setMessageReceivedStatus"}),d.onError(a)})}})},b.prototype.setMessageStatus=function(a,c,d,e,f){b._dataAccessProvider.setMessageStatus(a,c,d,e,b.logCallback(f,"setMessageStatus"))},b.prototype.setMessageSentStatus=function(a,c,d){b._dataAccessProvider.setMessageSentStatus(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"setMessageSentStatus"}),d.onError(a)})}})},b.prototype.clearTextMessageDraft=function(c,d){a.CheckParam.getInstance().check(["number","string|number","object"],"clearTextMessageDraft",!1,arguments);var e="darf_"+c+"_"+d;return delete b._memoryStore[e],!0},b.prototype.getTextMessageDraft=function(c,d){if(a.CheckParam.getInstance().check(["number","string|number","object"],"getTextMessageDraft",!1,arguments),""==d||c<0)throw new Error("params error : "+a.ErrorCode.DRAF_GET_ERROR);var e="darf_"+c+"_"+d;return b._memoryStore[e]},b.prototype.saveTextMessageDraft=function(c,d,e){a.CheckParam.getInstance().check(["number","string|number","string","object"],"saveTextMessageDraft",!1,arguments);var f="darf_"+c+"_"+d;return b._memoryStore[f]=e,!0},b.prototype.searchConversationByContent=function(a,c,d){b._dataAccessProvider.searchConversationByContent(a,b.logCallback(c,"searchConversationByContent"),d)},b.prototype.searchMessageByContent=function(a,c,d,e,f,g,h){b._dataAccessProvider.searchMessageByContent(a,c,d,e,f,g,b.logCallback(h,"searchMessageByContent"))},b.prototype.clearCache=function(){b._dataAccessProvider.clearCache()},b.prototype.clearConversations=function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];0==d.length&&(d=[a.ConversationType.CHATROOM,a.ConversationType.CUSTOMER_SERVICE,a.ConversationType.DISCUSSION,a.ConversationType.GROUP,a.ConversationType.PRIVATE,a.ConversationType.SYSTEM,a.ConversationType.PUBLIC_SERVICE,a.ConversationType.APP_PUBLIC_SERVICE]),b._dataAccessProvider.clearConversations(d,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"clearConversations"}),c.onError(a)})}})},b.prototype.getConversation=function(c,d,e){a.CheckParam.getInstance().check(["number","string|number","object"],"getConversation",!1,arguments),b._dataAccessProvider.getConversation(c,d,{onSuccess:function(a){setTimeout(function(){e.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"getConversation"}),e.onError(a)})}})},b.prototype.pottingConversation=function(c){var d=this,e=!1;b._dataAccessProvider.getConversation(c.type,c.userId,{onSuccess:function(f){f?e=!0:f=new a.Conversation,f.conversationType=c.type,f.targetId=c.userId,f.latestMessage=a.MessageUtil.messageParser(c.msg),f.latestMessageId=f.latestMessage.messageId,f.objectName=f.latestMessage.objectName,f.receivedStatus=f.latestMessage.receivedStatus,f.receivedTime=f.latestMessage.receiveTime,f.sentStatus=f.latestMessage.sentStatus,f.sentTime=f.latestMessage.sentTime;var g=b._storageProvider.getItem("mentioneds_"+a.Bridge._client.userId+"_"+f.conversationType+"_"+f.targetId);if(g){var h=JSON.parse(g);f.mentionedMsg=h[c.type+"_"+c.userId]}if(!e)if(a.RongUtil.supportLocalStorage()){var i=b._storageProvider.getItem("cu"+a.Bridge._client.userId+c.type+c.userId);f.unreadMessageCount=Number(i)}else f.unreadMessageCount=0;f.conversationType==a.ConversationType.DISCUSSION&&d.getDiscussion(c.userId,{onSuccess:function(a){f.conversationTitle=a.name},onError:function(a){}}),b._dataAccessProvider.addConversation(f,{onSuccess:function(a){}})},onError:function(a){}})},b.prototype.addConversation=function(a,c){b._dataAccessProvider.addConversation(a,c)},b.prototype.sortConversationList=function(a){for(var c=[],d=0,e=a.length;d<e;d++)if(a[d])if(a[d].isTop)c.push(a[d]),a.splice(d,1);else for(var f=0;f<e-d-1;f++)if(a[f].sentTime<a[f+1].sentTime){var g=a[f];a[f]=a[f+1],a[f+1]=g}return b._memoryStore.conversationList=c.concat(a)},b.prototype.getConversationList=function(c,d,e,f){a.CheckParam.getInstance().check(["object","null|undefined|array|object|global","number|undefined|null|object|global","boolean|undefined|null|object|global"],"getConversationList",!1,arguments);b._dataAccessProvider.getConversationList({onSuccess:function(a){d||b._dataAccessProvider?setTimeout(function(){c.onSuccess(a)}):setTimeout(function(){c.onSuccess(b._memoryStore.conversationList)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"getConversationList"}),c.onError(a)})}},d,e,f)},b.prototype.getRemoteConversationList=function(c,d,e,f){a.CheckParam.getInstance().check(["object","null|array|object|global","number|undefined|null|object|global","boolean|undefined|null|object|global"],"getRemoteConversationList",!1,arguments),b._dataAccessProvider.getRemoteConversationList(b.logCallback(c,"getRemoteConversationList"),d,e,f)},b.prototype.updateConversation=function(a){return b._dataAccessProvider.updateConversation(a)},b.prototype.createConversation=function(b,c,d){a.CheckParam.getInstance().check(["number","string|number","string"],"createConversation",!1,arguments);var e=new a.Conversation;return e.targetId=c,e.conversationType=b,e.conversationTitle=d,e.latestMessage={},e.unreadMessageCount=0,e},b.prototype.removeConversation=function(c,d,e){a.CheckParam.getInstance().check(["number","string|number","object"],"removeConversation",!1,arguments),b._dataAccessProvider.removeConversation(c,d,b.logCallback(e,"removeConversation"))},b.prototype.setConversationHidden=function(c,d,e){a.CheckParam.getInstance().check(["number","string|number","boolean"],"setConversationHidden",!1,arguments),b._dataAccessProvider.setConversationHidden(c,d,e)},b.prototype.setConversationToTop=function(c,d,e,f){a.CheckParam.getInstance().check(["number","string|number","boolean","object"],"setConversationToTop",!1,arguments),b._dataAccessProvider.setConversationToTop(c,d,e,{onSuccess:function(a){setTimeout(function(){f.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"setConversationToTop"}),f.onError(a)})}})},b.prototype.getConversationNotificationStatus=function(a,c,d){var e={conversationType:a,targetId:c};b._dataAccessProvider.getConversationNotificationStatus(e,b.logCallback(d,"getConversationNotificationStatus"))},b.prototype.setConversationNotificationStatus=function(a,c,d,e){var f={conversationType:a,targetId:c,status:status};b._dataAccessProvider.setConversationNotificationStatus(f,b.logCallback(e,"setConversationNotificationStatus"))},b.prototype.getNotificationQuietHours=function(a){throw new Error("Not implemented yet")},b.prototype.removeNotificationQuietHours=function(a){throw new Error("Not implemented yet")},b.prototype.setNotificationQuietHours=function(a,b,c){throw new Error("Not implemented yet")},b.prototype.addMemberToDiscussion=function(c,d,e){a.CheckParam.getInstance().check(["string","array","object"],"addMemberToDiscussion",!1,arguments),b._dataAccessProvider.addMemberToDiscussion(c,d,b.logCallback(e,"addMemberToDiscussion"))},b.prototype.createDiscussion=function(c,d,e){a.CheckParam.getInstance().check(["string","array","object"],"createDiscussion",!1,arguments),b._dataAccessProvider.createDiscussion(c,d,e)},b.prototype.getDiscussion=function(c,d){a.CheckParam.getInstance().check(["string","object"],"getDiscussion",!1,arguments),b._dataAccessProvider.getDiscussion(c,b.logCallback(d,"getDiscussion"))},b.prototype.quitDiscussion=function(c,d){a.CheckParam.getInstance().check(["string","object"],"quitDiscussion",!1,arguments),b._dataAccessProvider.quitDiscussion(c,b.logCallback(d,"quitDiscussion"))},b.prototype.removeMemberFromDiscussion=function(c,d,e){a.CheckParam.getInstance().check(["string","string","object"],"removeMemberFromDiscussion",!1,arguments),b._dataAccessProvider.removeMemberFromDiscussion(c,d,b.logCallback(e,"removeMemberFromDiscussion"))},b.prototype.setDiscussionInviteStatus=function(c,d,e){a.CheckParam.getInstance().check(["string","number","object"],"setDiscussionInviteStatus",!1,arguments),b._dataAccessProvider.setDiscussionInviteStatus(c,d,b.logCallback(e,"setDiscussionInviteStatus"))},b.prototype.setDiscussionName=function(c,d,e){a.CheckParam.getInstance().check(["string","string","object"],"setDiscussionName",!1,arguments),b._dataAccessProvider.setDiscussionName(c,d,b.logCallback(e,"setDiscussionName"))},b.prototype.joinChatRoom=function(c,d,e){if(a.CheckParam.getInstance().check(["string|number","number","object"],"joinChatRoom",!1,arguments),""==c)return void setTimeout(function(){var c=a.ErrorCode.CHATROOM_ID_ISNULL;b.logger({code:c,funcName:"joinChatRoom"}),e.onError(a.ErrorCode.CHATROOM_ID_ISNULL)});b._dataAccessProvider.joinChatRoom(c,d,b.logCallback(e,"joinChatRoom"))},b.prototype.setDeviceInfo=function(a){b._dataAccessProvider.setDeviceInfo(a)},b.prototype.setChatroomHisMessageTimestamp=function(c,d){a.CheckParam.getInstance().check(["string|number","number"],"setChatroomHisMessageTimestamp",!1,arguments),b._dataAccessProvider.setChatroomHisMessageTimestamp(c,d)},b.prototype.getChatRoomHistoryMessages=function(c,d,e,f){a.CheckParam.getInstance().check(["string|number","number","number","object"],"getChatRoomHistoryMessages",!1,arguments),b._dataAccessProvider.getChatRoomHistoryMessages(c,d,e,b.logCallback(f,"getChatRoomHistoryMessages"))},b.prototype.getChatRoomInfo=function(c,d,e,f){a.CheckParam.getInstance().check(["string|number","number","number","object"],"getChatRoomInfo",!1,arguments),b._dataAccessProvider.getChatRoomInfo(c,d,e,b.logCallback(f,"getChatRoomInfo"))},b.prototype.quitChatRoom=function(c,d){a.CheckParam.getInstance().check(["string|number","object"],"quitChatRoom",!1,arguments),b._dataAccessProvider.quitChatRoom(c,b.logCallback(d,"quitChatRoom"))},b.prototype.getRemotePublicServiceList=function(a,c){b._dataAccessProvider.getRemotePublicServiceList(b.logCallback(a,"getRemotePublicServiceList"),c)},b.prototype.getPublicServiceList=function(c){b._memoryStore.depend.openMp&&(a.CheckParam.getInstance().check(["object"],"getPublicServiceList",!1,arguments),this.getRemotePublicServiceList(b.logCallback(c,"getPublicServiceList")))},b.prototype.getPublicServiceProfile=function(c,d,e){b._memoryStore.depend.openMp&&(a.CheckParam.getInstance().check(["number","string|number","object"],"getPublicServiceProfile",!1,arguments),b._dataAccessProvider.getPublicServiceProfile(c,d,b.logCallback(e,"getPublicServiceProfile")))},b.prototype.pottingPublicSearchType=function(a,c){if(b._memoryStore.depend.openMp){var d=0;return 0==a?(d|=3,d|=0==c?12:48):1==a?(d|=1,d|=0==c?8:32):(d|=2,d|=0==a?4:16),d}},b.prototype.searchPublicService=function(c,d,e){if(b._memoryStore.depend.openMp){a.CheckParam.getInstance().check(["number","string","object"],"searchPublicService",!1,arguments);var f=new b.Protobuf.SearchMpInput;f.setType(this.pottingPublicSearchType(0,c)),f.setId(d),b.bridge.queryMsg(29,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,b.logCallback(e,"searchPublicService"),"SearchMpOutput")}},b.prototype.searchPublicServiceByType=function(c,d,e,f){if(b._memoryStore.depend.openMp){a.CheckParam.getInstance().check(["number","number","string","object"],"searchPublicServiceByType",!1,arguments);var g=c==a.ConversationType.APP_PUBLIC_SERVICE?2:1,h=new b.Protobuf.SearchMpInput;h.setType(this.pottingPublicSearchType(g,d)),h.setId(e),b.bridge.queryMsg(29,a.MessageUtil.ArrayForm(h.toArrayBuffer()),a.Bridge._client.userId,b.logCallback(f,"searchPublicServiceByType"),"SearchMpOutput")}},b.prototype.subscribePublicService=function(c,d,e){if(b._memoryStore.depend.openMp){a.CheckParam.getInstance().check(["number","string|number","object"],"subscribePublicService",!1,arguments);var f=new b.Protobuf.MPFollowInput,g=this,h=c==a.ConversationType.APP_PUBLIC_SERVICE?"mcFollow":"mpFollow";f.setId(d),b.bridge.queryMsg(h,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(){g.getRemotePublicServiceList({onSuccess:function(){},onError:function(){}}),e.onSuccess()},onError:function(a){var c=a;b.logger({code:c,funcName:"subscribePublicService"}),e.onError(a)}},"MPFollowOutput")}},b.prototype.unsubscribePublicService=function(c,d,e){if(b._memoryStore.depend.openMp){a.CheckParam.getInstance().check(["number","string|number","object"],"unsubscribePublicService",!1,arguments);var f=new b.Protobuf.MPFollowInput,g=c==a.ConversationType.APP_PUBLIC_SERVICE?"mcUnFollow":"mpUnFollow";f.setId(d),b.bridge.queryMsg(g,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(){b._memoryStore.publicServiceMap.remove(c,d),e.onSuccess()},onError:function(a){var c=a;b.logger({code:c,funcName:"unsubscribePublicService"}),e.onError(a)}},"MPFollowOutput")}},b.prototype.addToBlacklist=function(c,d){a.CheckParam.getInstance().check(["string|number","object"],"addToBlacklist",!1,arguments),b._dataAccessProvider.addToBlacklist(c,b.logCallback(d,"addToBlacklist"))},b.prototype.getBlacklist=function(c){a.CheckParam.getInstance().check(["object"],"getBlacklist",!1,arguments),b._dataAccessProvider.getBlacklist(c)},b.prototype.getBlacklistStatus=function(c,d){a.CheckParam.getInstance().check(["string|number","object"],"getBlacklistStatus",!1,arguments),b._dataAccessProvider.getBlacklistStatus(c,b.logCallback(d,"getBlacklistStatus"))},b.prototype.removeFromBlacklist=function(c,d){a.CheckParam.getInstance().check(["string|number","object"],"removeFromBlacklist",!1,arguments),b._dataAccessProvider.removeFromBlacklist(c,b.logCallback(d,"removeFromBlacklist"))},b.prototype.getFileToken=function(c,d){a.CheckParam.getInstance().check(["number","object"],"getQngetFileTokenTkn",!1,arguments),b._dataAccessProvider.getFileToken(c,b.logCallback(d,"getFileToken"))},b.prototype.getFileUrl=function(c,d,e,f){a.CheckParam.getInstance().check(["number","string","string|global|object|null","object"],"getFileUrl",!1,arguments),b._dataAccessProvider.getFileUrl(c,d,e,b.logCallback(f,"getFileUrl"))},
b.prototype.addRealTimeLocationListener=function(a,b,c){throw new Error("Not implemented yet")},b.prototype.getRealTimeLocation=function(a,b){throw new Error("Not implemented yet")},b.prototype.getRealTimeLocationCurrentState=function(a,b){throw new Error("Not implemented yet")},b.prototype.getRealTimeLocationParticipants=function(a,b){throw new Error("Not implemented yet")},b.prototype.joinRealTimeLocation=function(a,b){throw new Error("Not implemented yet")},b.prototype.quitRealTimeLocation=function(a,b){throw new Error("Not implemented yet")},b.prototype.startRealTimeLocation=function(a,b){throw new Error("Not implemented yet")},b.prototype.updateRealTimeLocationStatus=function(a,b,c,d){throw new Error("Not implemented yet")},b.prototype.startCall=function(c,d,e,f,g,h){if(a.CheckParam.getInstance().check(["number","string|number","array","number","string","object"],"startCall",!1,arguments),b._memoryStore.voipStategy)b._voipProvider.startCall(c,d,e,f,g,b.logCallback(h,"startCall"));else{var i=a.ErrorCode.VOIP_NOT_AVALIABLE;b.logger({code:i,funcName:"startCall"}),h.onError(a.ErrorCode.VOIP_NOT_AVALIABLE)}},b.prototype.joinCall=function(c,d){if(a.CheckParam.getInstance().check(["number","object"],"joinCall",!1,arguments),b._memoryStore.voipStategy)b._voipProvider.joinCall(c,b.logCallback(d,"joinCall"));else{var e=a.ErrorCode.VOIP_NOT_AVALIABLE;b.logger({code:e,funcName:"joinCall"}),d.onError(a.ErrorCode.VOIP_NOT_AVALIABLE)}},b.prototype.hungupCall=function(c,d,e){a.CheckParam.getInstance().check(["number","string","number"],"hungupCall",!1,arguments),b._memoryStore.voipStategy&&b._voipProvider.hungupCall(c,d,e)},b.prototype.changeMediaType=function(c,d,e,f){if(a.CheckParam.getInstance().check(["number","string","number","object"],"changeMediaType",!1,arguments),b._memoryStore.voipStategy)b._voipProvider.changeMediaType(c,d,e,b.logCallback(f,"changeMediaType"));else{var g=a.ErrorCode.VOIP_NOT_AVALIABLE;b.logger({code:g,funcName:"changeMediaType"}),f.onError(a.ErrorCode.VOIP_NOT_AVALIABLE)}},b.prototype.getUnreadMentionedMessages=function(a,c){return b._dataAccessProvider.getUnreadMentionedMessages(a,c)},b.prototype.clearListeners=function(){b._dataAccessProvider.clearListeners()},b.prototype.getUserStatus=function(a,c){b._dataAccessProvider.getUserStatus(a,b.logCallback(c,"getUserStatus"))},b.prototype.setUserStatus=function(a,c){b._dataAccessProvider.setUserStatus(a,b.logCallback(c,"setUserStatus"))},b.prototype.setUserStatusListener=function(a,c){var d=a.userIds,e=a.multiple;b.userStatusObserver.watch({key:d,func:c,multiple:e}),b._dataAccessProvider.setUserStatusListener(a,c)},b.messageWatch=function(a){b.RTCListener=a},b.prototype.getRTCUserInfoList=function(c,d){a.CheckParam.getInstance().check(["object","object"],"getRTCUserInfoList",!1,arguments),b._dataAccessProvider.getRTCUserInfoList(c,d)},b.prototype.getRTCUserList=function(c,d){a.CheckParam.getInstance().check(["object","object"],"getRTCUserList",!1,arguments),b._dataAccessProvider.getRTCUserList(c,d)},b.prototype.setRTCUserInfo=function(c,d,e){a.CheckParam.getInstance().check(["object","object","object"],"setRTCUserInfo",!1,arguments),b._dataAccessProvider.setRTCUserInfo(c,d,e)},b.prototype.removeRTCUserInfo=function(c,d,e){a.CheckParam.getInstance().check(["object","object","object"],"removeRTCUserInfo",!1,arguments),b._dataAccessProvider.removeRTCUserInfo(c,d,e)},b.prototype.getRTCRoomInfo=function(c,d){a.CheckParam.getInstance().check(["object","object"],"getRTCRoomInfo",!1,arguments),b._dataAccessProvider.getRTCRoomInfo(c,d)},b.prototype.setRTCRoomInfo=function(c,d,e){a.CheckParam.getInstance().check(["object","object","object"],"setRTCRoomInfo",!1,arguments),b._dataAccessProvider.setRTCRoomInfo(c,d,e)},b.prototype.removeRTCRoomInfo=function(c,d,e){a.CheckParam.getInstance().check(["object","object","object"],"removeRTCRoomInfo",!1,arguments),b._dataAccessProvider.removeRTCRoomInfo(c,d,e)},b.prototype.joinRTCRoom=function(c,d){a.CheckParam.getInstance().check(["object","object"],"joinRTCRoom",!1,arguments),b._dataAccessProvider.joinRTCRoom(c,d)},b.prototype.quitRTCRoom=function(c,d){a.CheckParam.getInstance().check(["object","object"],"quitRTCRoom",!1,arguments),b._dataAccessProvider.quitRTCRoom(c,d)},b.prototype.RTCPing=function(c,d){a.CheckParam.getInstance().check(["object","object"],"RTCPing",!1,arguments),b._dataAccessProvider.RTCPing(c,d)},b.prototype.setRTCUserData=function(c,d,e,f,g,h){a.CheckParam.getInstance().check(["string","string","string","boolean","object","global|object|null|undefined"],"setRTCUserData",!1,arguments),b._dataAccessProvider.setRTCUserData(c,d,e,f,g,h)},b.prototype.getRTCUserData=function(c,d,e,f){a.CheckParam.getInstance().check(["string","array","boolean","object","global|object|null"],"getRTCUserData",!1,arguments),b._dataAccessProvider.getRTCUserData(c,d,e,f)},b.prototype.removeRTCUserData=function(c,d,e,f,g){a.CheckParam.getInstance().check(["string","array","boolean","object","global|object|null|undefined"],"removeRTCUserData",!1,arguments),b._dataAccessProvider.removeRTCUserData(c,d,e,f,g)},b.prototype.setRTCRoomData=function(c,d,e,f,g,h){a.CheckParam.getInstance().check(["string","string","string","boolean","object","global|object|null|undefined"],"setRTCRoomData",!1,arguments),b._dataAccessProvider.setRTCRoomData(c,d,e,f,g,h)},b.prototype.getRTCRoomData=function(c,d,e,f){a.CheckParam.getInstance().check(["string","array","boolean","object"],"getRTCRoomData",!1,arguments),b._dataAccessProvider.getRTCRoomData(c,d,e,f)},b.prototype.removeRTCRoomData=function(c,d,e,f,g){a.CheckParam.getInstance().check(["string","array","boolean","object","global|object|null|undefined"],"removeRTCRoomData",!1,arguments),b._dataAccessProvider.removeRTCRoomData(c,d,e,f,g)},b.prototype.getNavi=function(){return b._dataAccessProvider.getNavi()},b.prototype.getRTCToken=function(c,d){return a.CheckParam.getInstance().check(["object","object"],"getRTCToken",!1,arguments),b._dataAccessProvider.getRTCToken(c,d)},b.prototype.getAppInfo=function(){return{appKey:b._memoryStore.appKey}},b.RTCListener=function(){},b.LogFactory={},b.MessageType={},b.RegisterMessage={},b._memoryStore={listenerList:[],isPullFinished:!1,syncMsgQueue:[]},b.isNotPullMsg=!1,b.userStatusObserver=null,b.sdkver="2.4.0",b.otherDeviceLoginCount=0,b.serverStore={index:0},b.isFirstConnect=!0,b.statusListeners=[],b.userStatusListener=null,b}();a.RongIMClient=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){!function(a){a[a.AT_MOST_ONCE=0]="AT_MOST_ONCE",a[a.AT_LEAST_ONCE=1]="AT_LEAST_ONCE",a[a.EXACTLY_ONCE=2]="EXACTLY_ONCE",a[a.DEFAULT=3]="DEFAULT"}(a.Qos||(a.Qos={}));var b=a.Qos;!function(a){a[a.CONNECT=1]="CONNECT",a[a.CONNACK=2]="CONNACK",a[a.PUBLISH=3]="PUBLISH",a[a.PUBACK=4]="PUBACK",a[a.QUERY=5]="QUERY",a[a.QUERYACK=6]="QUERYACK",a[a.QUERYCON=7]="QUERYCON",a[a.SUBSCRIBE=8]="SUBSCRIBE",a[a.SUBACK=9]="SUBACK",a[a.UNSUBSCRIBE=10]="UNSUBSCRIBE",a[a.UNSUBACK=11]="UNSUBACK",a[a.PINGREQ=12]="PINGREQ",a[a.PINGRESP=13]="PINGRESP",a[a.DISCONNECT=14]="DISCONNECT"}(a.Type||(a.Type={}));var c=(a.Type,["invtDiz","crDiz","qnUrl","userInf","dizInf","userInf","joinGrp","quitDiz","exitGrp","evctDiz",["","ppMsgP","pdMsgP","pgMsgP","chatMsg","pcMsgP","","pmcMsgN","pmpMsgN","","","","prMsgS"],"pdOpen","rename","uGcmpr","qnTkn","destroyChrm","createChrm","exitChrm","queryChrm","joinChrm","pGrps","addBlack","rmBlack","getBlack","blackStat","addRelation","qryRelation","delRelation","pullMp","schMp","qnTkn","qnUrl","qryVoipK","delMsg","qryCHMsg","getUserStatus","setUserStatus","subUserStatus","cleanHisMsg"]),d=function(){function b(c,d){this.connectionStatus=-1;var f=d.appId,g=encodeURIComponent(d.token),h=d.sdkVer,i=d.apiVer;this.self=d,this.socket=e.getInstance().createServer();var j=this,k=a.RongIMClient._storageProvider,l=k.getItem("servers");l=JSON.parse(l)||[];var m=a.RongIMClient._memoryStore.depend,n=function(b){j.url=a.RongUtil.tplEngine("{host}/websocket?appId={appId}&token={token}&sdkVer={sdkVer}&apiVer={apiVer}",{host:b,appId:f,token:g,sdkVer:h,apiVer:i}),j.socket.connect(j.url,c);var d=k.getItem("rong_current_user");a.Navigation.Endpoint={host:b,userId:d}};({ws:function(){for(var b=new a.Timer({timeout:15e3}),c=[],d=[],e=!1,f=function(){for(var a=0;a<c.length;a++){var b=c[a];clearTimeout(b)}for(var a=0;a<d.length;a++){d[a].abort()}c.length=0,d.length=0},g=function(g,h){var i=g.url,j=g.time;if(!e){var k=setTimeout(function(){var c=function(){e||(f(),e=!0,b.pause(),h(i))},g=a.MessageUtil.detectCMP({url:i,success:c,fail:function(a){console.log(a)}});d.push(g)},j);c.push(k)}},h=function(a){var b=/(http|https):\/\/([^\/]+)/i,c=a.match(b)[2];n(c)},i="{protocol}{server}/ping?r={random}",k=0;k<l.length;k++){var o=l[k];o&&(o=a.RongUtil.tplEngine(i,{protocol:m.protocol,server:o,random:a.RongUtil.getTimestamp()}),g({url:o,time:1e3*k},h))}b.resume(function(){a.Navigation.clear(),f(),j.socket.fire("StatusChanged",a.ConnectionStatus.NETWORK_UNAVAILABLE)})},comet:function(){var a=l[0];n(a)}})[m.isPolling?"comet":"ws"]();var o=b._ConnectionStatusListener,p="object"==typeof o,q=this;q.socket.on("StatusChanged",function(b){if(!p)throw new Error("setConnectStatusListener:Parameter format is incorrect");var c=b==a.ConnectionStatus.NETWORK_UNAVAILABLE,e=!a.RongIMClient._memoryStore.depend.isPolling;a.RongIMClient.isFirstConnect&&c&&e&&(b=a.ConnectionStatus.WEBSOCKET_UNAVAILABLE),q.connectionStatus=b,setTimeout(function(){o.onChanged(b)}),b==a.ConnectionStatus.DISCONNECTED&&d.clearHeartbeat(),b==a.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT&&a.RongIMClient.otherDeviceLoginCount++,b==a.ConnectionStatus.CONNECTED&&(a.RongIMClient.isFirstConnect=!1),b==a.ConnectionStatus.WEBSOCKET_UNAVAILABLE&&(q.changeConnectType(),a.RongIMClient.isFirstConnect=!1,a.RongIMClient.connect(d.token,a.RongIMClient._memoryStore.callback))}),this.socket.on("message",d.handler.handleMessage),this.socket.on("disconnect",function(a){j.socket.fire("StatusChanged",a||2)})}return b.prototype.changeConnectType=function(){a.RongIMClient._memoryStore.depend.isPolling=!a.RongIMClient._memoryStore.depend.isPolling,new a.FeatureDectector},b.prototype.writeAndFlush=function(a){this.socket.send(a)},b.prototype.reconnect=function(b){a.MessageIdHandler.clearMessageId(),this.socket=this.socket.reconnect(),b&&(this.self.reconnectObj=b)},b.prototype.disconnect=function(a){this.socket.disconnect(a)},b}();a.Channel=d;var e=function(){function b(){this.socket=null,this._events={}}return b.getInstance=function(){return new b},b.prototype.connect=function(b,c){return this.socket&&(b&&(a.RongIMClient._storageProvider.setItem("rongSDK",this.checkTransport()),this.on("connect",c||new Function)),b&&(this.currentURL=b),this.socket.createTransport(b)),this},b.prototype.createServer=function(){var a=this.getTransport(this.checkTransport());if(null===a)throw new Error("the channel was not supported");return a},b.prototype.getTransport=function(c){return c==b.XHR_POLLING?this.socket=new a.PollingTransportation(this):c==b.WEBSOCKET&&(this.socket=new a.SocketTransportation(this)),this},b.prototype.send=function(a){this.socket&&(this.checkTransport()==b.WEBSOCKET?this.socket.send(a):this.socket.send(this._encode(a)))},b.prototype.onMessage=function(a){this.fire("message",a)},b.prototype.disconnect=function(a){return this.socket.disconnect(a),this.fire("disconnect",a),this},b.prototype.reconnect=function(){if(this.currentURL&&a.RongIMClient._storageProvider.getItem("rongSDK"))return this.connect(this.currentURL,null);throw new Error("reconnect:no have URL")},b.prototype.checkTransport=function(){return a.RongIMClient._memoryStore.depend.isPolling&&(a.Transportations._TransportType=b.XHR_POLLING),a.Transportations._TransportType},b.prototype.fire=function(a,b){if(a in this._events)for(var c=0,d=this._events[a].length;c<d;c++)this._events[a][c](b);return this},b.prototype.on=function(b,c){return"function"==typeof c&&b?(b in this._events?-1==a.MessageUtil.indexOf(this._events,c)&&this._events[b].push(c):this._events[b]=[c],this):this},b.prototype.removeEvent=function(a,b){if(a in this._events)for(var c=0,d=this._events[a].length;c<d;c++)this._events[a][c]==b&&this._events[a].splice(c,1);return this},b.prototype._encode=function(b){var c="?messageid="+b.getMessageId()+"&header="+b.getHeaderFlag()+"&sessionid="+a.RongIMClient._storageProvider.getItem("sId"+a.Navigation.Endpoint.userId);return/(PubAckMessage|QueryConMessage)/.test(b._name)||(c+="&topic="+b.getTopic()+"&targetid="+(b.getTargetId()||"")),{url:c,data:"getData"in b?b.getData():""}},b.XHR_POLLING="xhr-polling",b.WEBSOCKET="websocket",b}();a.Socket=e;var f=function(){function c(b,c){this.timeoutMillis=6e3,this.timeout_=0,this.sdkVer="",this.apiVer=Math.floor(1e6*Math.random()),this.channel=null,this.handler=null,this.userId="",this.reconnectObj={},this.heartbeat=0,this.pullMsgHearbeat=0,this.chatroomId="",this.SyncTimeQueue=[],this.cacheMessageIds=[],this.token=b,this.appId=c,this.SyncTimeQueue.state="complete",this.sdkVer=a.RongIMClient.sdkver}return c.prototype.resumeTimer=function(){var a=this;this.timeout_=setTimeout(function(){a.channel.disconnect()},this.timeoutMillis)},c.prototype.pauseTimer=function(){this.timeout_&&(clearTimeout(this.timeout_),this.timeout_=0)},c.prototype.connect=function(b){this.handler=new h(this),this.handler.setConnectCallback(b);var c=this;this.channel=new d(function(){a.Transportations._TransportType==e.WEBSOCKET&&c.keepLive()},this),this.channel.socket.fire("StatusChanged",a.ConnectionStatus.CONNECTING)},c.prototype.checkSocket=function(b){this.channel.writeAndFlush(new a.PingReqMessage);var c=0,d=setInterval(function(){a.RongIMClient._memoryStore.isFirstPingMsg?c>15&&(clearInterval(d),b.onError()):(clearInterval(d),b.onSuccess()),c++},100)},c.prototype.keepLive=function(){this.heartbeat>0&&clearInterval(this.heartbeat);var b=this;b.heartbeat=setInterval(function(){b.resumeTimer(),b.channel.writeAndFlush(new a.PingReqMessage)},3e4),b.pullMsgHearbeat>0&&clearInterval(b.pullMsgHearbeat),b.pullMsgHearbeat=setInterval(function(){b.syncTime(!0,void 0,void 0,!1)},18e4)},c.prototype.clearHeartbeat=function(){clearInterval(this.heartbeat),this.heartbeat=0,this.pauseTimer(),clearInterval(this.pullMsgHearbeat),this.pullMsgHearbeat=0},c.prototype.publishMessage=function(c,d,e,f,g){var h=a.MessageIdHandler.messageIdPlus(this.channel.reconnect);if(h){var i=new a.PublishMessage(c,d,e);i.setMessageId(h),f?(i.setQos(b.AT_LEAST_ONCE),this.handler.putCallback(new a.PublishCallback(f.onSuccess,f.onError),i.getMessageId(),g)):i.setQos(b.AT_MOST_ONCE),this.channel.writeAndFlush(i)}},c.prototype.queryMessage=function(b,d,e,f,g,h){if("userInf"==b&&c.userInfoMapping[e])return void g.onSuccess(c.userInfoMapping[e]);var i=a.MessageIdHandler.messageIdPlus(this.channel.reconnect);if(i){var j=new a.QueryMessage(b,d,e);j.setMessageId(i),j.setQos(f),this.handler.putCallback(new a.QueryCallback(g.onSuccess,g.onError),j.getMessageId(),h),this.channel.writeAndFlush(j)}},c.prototype.invoke=function(c,d,e){var f,h,i,j,k=this,l=this.SyncTimeQueue.shift();if(void 0!=l){this.SyncTimeQueue.state="pending";var m=a.SyncTimeUtil.get(),n=m.sent;if(2!=l.type)f=m.received,h=new a.RongIMClient.Protobuf.SyncRequestMsg,h.setIspolling(!1),i="pullMsg",j=this.userId,h.setSendBoxSyncTime(n);else if(j=l.chrmId||k.chatroomId,f=a.RongIMClient._memoryStore.lastReadTime.get(j+g._client.userId+"CST")||0,h=new a.RongIMClient.Protobuf.ChrmPullMsg,h.setCount(0),i="chrmPull",!j)throw new Error("syncTime:Received messages of chatroom but was not init");if(l.pulltime<=f)return this.SyncTimeQueue.state="complete",void this.invoke(c,j,e);c&&"setIsPullSend"in h&&h.setIsPullSend(!0),h.setSyncTime(f),this.queryMessage(i,a.MessageUtil.ArrayForm(h.toArrayBuffer()),j,b.AT_LEAST_ONCE,{onSuccess:function(b){var d=a.MessageUtil.int64ToTimestamp(b.syncTime),h=j,l="chrmPull"==i;if(l)h+=g._client.userId+"CST",a.RongIMClient._memoryStore.lastReadTime.set(h,d);else{var m=a.RongIMClient._storageProvider;d>m.getItem(h)&&m.setItem(h,d)}var o=b.list,p=b.finished;l&&(p=!0),a.RongIMClient._memoryStore.isPullFinished=p;for(var q=a.RongIMClient._memoryStore.connectAckTime,r=0,s=o.length,t=s;r<s;r++){t-=1;var u=o[r],v=a.MessageUtil.int64ToTimestamp(u.dataTime);if(v>(u.direction==a.MessageDirection.SEND?n:f)){var w=v<q;g._client.handler.onReceived(u,void 0,w,t,!1,p)}}k.SyncTimeQueue.state="complete",k.invoke(c,j,e)},onError:function(a){k.SyncTimeQueue.state="complete",k.invoke(c,j,e)}},"DownStreamMessages")}},c.prototype.syncTime=function(a,b,c,d){this.SyncTimeQueue.push({type:a,pulltime:b,chrmId:c}),1==this.SyncTimeQueue.length&&"complete"==this.SyncTimeQueue.state&&this.invoke(!a,c,d)},c.prototype.__init=function(b){this.handler=new h(this),this.handler.setConnectCallback(a.RongIMClient._memoryStore.callback),this.channel=new d(b,this)},c.userInfoMapping={},c}();a.Client=f;var g=function(){function e(){}return e.getInstance=function(){return new e},e.prototype.connect=function(b,c,d){if(a.RongIMClient.Protobuf)return e._client=(new a.Navigation).connect(b,c,d),e._client},e.prototype.setListener=function(a){"object"==typeof a&&("function"==typeof a.onChanged?d._ConnectionStatusListener=a:"function"==typeof a.onReceived&&(d._ReceiveMessageListener=a))},e.prototype.reconnect=function(a){e._client.channel.reconnect(a)},e.prototype.disconnect=function(){e._client.channel.disconnect(2)},e.prototype.queryMsg=function(a,d,f,g,h){"string"!=typeof a&&(a=c[a]),e._client.queryMessage(a,d,f,b.AT_MOST_ONCE,g,h)},e.prototype.pubMsg=function(b,d,f,g,h,i){"number"==typeof i?i==a.MethodType.CUSTOMER_SERVICE?e._client.publishMessage("pcuMsgP",d,f,g,h):i==a.MethodType.RECALL&&e._client.publishMessage("recallMsg",d,f,g,h):e._client.publishMessage(c[10][b],d,f,g,h)},e}();a.Bridge=g;var h=function(){function b(a){if(this.map={},this.connectCallback=null,!d._ReceiveMessageListener)throw new Error("please set onReceiveMessageListener");this._onReceived=d._ReceiveMessageListener.onReceived,this._client=a,this.syncMsgMap=new Object}return b.prototype.putCallback=function(a,b,c){var d={Callback:a,Message:c};d.Callback.resumeTimer(),this.map[b]=d},b.prototype.setConnectCallback=function(b){b&&(this.connectCallback=new a.ConnectAck(b.onSuccess,b.onError,this._client))},b.prototype.onReceived=function(b,c,d,e,f){var h,i,j;if("PublishMessage"!=b._name)h=b,a.RongIMClient._storageProvider.setItem(this._client.userId,a.MessageUtil.int64ToTimestamp(h.dataTime));else{if("s_ntf"==b.getTopic())return h=a.RongIMClient.Protobuf.NotifyMsg.decode(b.getData()),void this._client.syncTime(h.type,a.MessageUtil.int64ToTimestamp(h.time),h.chrmId);if("s_msg"==b.getTopic()){h=a.RongIMClient.Protobuf.DownStreamMessage.decode(b.getData());var k=a.MessageUtil.int64ToTimestamp(h.dataTime);a.RongIMClient._storageProvider.setItem(this._client.userId,k),a.RongIMClient._memoryStore.lastReadTime.get(this._client.userId,k)}else{if("s_stat"==b.getTopic())return h=a.RongIMClient.Protobuf.GetUserStatusOutput.decode(b.getData()),h=a.RongInnerTools.convertUserStatus(h),void a.RongIMClient.userStatusObserver.notify({key:h.userId,entity:h});if(g._client.sdkVer&&"1.0.0"==g._client.sdkVer)return;h=a.RongIMClient.Protobuf.UpStreamMessage.decode(b.getData());var l=b.getTopic(),m=l.substr(0,2);"pp"==m?h.type=1:"pd"==m?h.type=2:"pg"==m?h.type=3:"ch"==m?h.type=4:"pc"==m&&(h.type=5),h.groupId=b.getTargetId(),h.fromUserId=this._client.userId,h.dataTime=Date.parse((new Date).toString())}if(!h)return}var n=a.RongIMClient._memoryStore.isPullFinished;if(n||d){i=a.MessageUtil.messageParser(h,this._onReceived,d);if(12==i.conversationType)return a.RongIMClient.RTCListener(i);if(b.getTopic&&"recallMsg"==b.getTopic()){var o=i.content;i.conversationType=o.conversationType,i.targetId=o.targetId,i.messageId=null}if(c&&(i.messageUId=c.getMessageUId(),i.sentTime=c.getTimestamp(),a.RongIMClient._storageProvider.setItem(this._client.userId,i.sentTime)),null!==i){if(!(i.conversationType==a.ConversationType.CHATROOM)){a.RongIMClient.MessageParams[i.messageType].msgTag.getMessageTag()>=0&&a.SyncTimeUtil.set(i);if(i.messageDirection==a.MessageDirection.SEND){var p=a.RongIMClient._storageProvider,q=a.Bridge._client.userId,r=p.getItem("last_sentTime_"+q)||0;if(i.sentTime<=r&&!f)return}}if(a.RongIMClient.MessageParams[i.messageType].msgTag.getMessageTag()>0){if(j=a.RongIMClient._dataAccessProvider.getConversation(i.conversationType,i.targetId,{onSuccess:function(){},onError:function(){}}),j||(j=a.RongIMClient.getInstance().createConversation(i.conversationType,i.targetId,"")),i.messageDirection==a.MessageDirection.RECEIVE&&64==(64&h.status)){var s=a.RongIMClient._storageProvider.getItem("mentioneds_"+g._client.userId+"_"+i.conversationType+"_"+i.targetId),t=i.conversationType+"_"+i.targetId,u={};if(i.content&&i.content.mentionedInfo&&(u[t]={uid:i.messageUId,time:i.sentTime,mentionedInfo:i.content.mentionedInfo},a.RongIMClient._storageProvider.setItem("mentioneds_"+g._client.userId+"_"+i.conversationType+"_"+i.targetId,JSON.stringify(u)),s=JSON.stringify(u)),s){var u=JSON.parse(s);j.mentionedMsg=u[t]}}if(i.messageDirection==a.MessageDirection.RECEIVE&&(j.unreadMessageCount=j.unreadMessageCount+1,a.RongUtil.supportLocalStorage())){var v=a.RongIMClient._storageProvider.getItem("cu"+g._client.userId+j.conversationType+j.targetId),w=Number(v)+1;a.RongIMClient._storageProvider.setItem("cu"+g._client.userId+j.conversationType+i.targetId,w),j.unreadMessageCount=w}j.receivedTime=(new Date).getTime(),j.receivedStatus=i.receivedStatus,j.senderUserId=i.sendUserId,j.notificationStatus=a.ConversationNotificationStatus.DO_NOT_DISTURB,j.latestMessageId=i.messageId,j.latestMessage=i,j.sentTime=i.sentTime,a.RongIMClient._dataAccessProvider.addConversation(j,{onSuccess:function(a){},onError:function(){}})}if(i.conversationType!=a.ConversationType.CUSTOMER_SERVICE||"ChangeModeResponseMessage"!=i.messageType&&"SuspendMessage"!=i.messageType&&"HandShakeResponseMessage"!=i.messageType&&"TerminateMessage"!=i.messageType&&"CustomerStatusUpdateMessage"!=i.messageType&&"TextMessage"!=i.messageType&&"InformationNotificationMessage"!=i.messageType||a.RongIMClient._memoryStore.custStore.isInit){if(i.conversationType==a.ConversationType.CUSTOMER_SERVICE&&"HandShakeResponseMessage"!=i.messageType){if(!a.RongIMClient._memoryStore.custStore[i.targetId])return;if("TerminateMessage"==i.messageType&&a.RongIMClient._memoryStore.custStore[i.targetId].sid!=i.content.sid)return}if(i.messageType===a.RongIMClient.MessageType.HandShakeResponseMessage){var x=i.content.data;a.RongIMClient._memoryStore.custStore[i.targetId]=x,x.serviceType!=a.CustomerType.ONLY_HUMAN&&x.serviceType!=a.CustomerType.HUMAN_FIRST||"1"==x.notAutoCha&&a.RongIMClient.getInstance().switchToHumanMode(i.targetId,{onSuccess:function(){},onError:function(){}})}var y=new Date,z=y.getMonth()+1,A=y.getFullYear()+"/"+(1==z.toString().length?"0"+z:z)+"/"+y.getDate(),B=new Date(A).getTime()-i.sentTime<0;if(a.RongUtil.supportLocalStorage()&&i.messageType===a.RongIMClient.MessageType.ReadReceiptRequestMessage&&B&&i.messageDirection==a.MessageDirection.SEND){var C=g._client.userId+i.content.messageUId+"SENT";a.RongIMClient._storageProvider.setItem(C,JSON.stringify({count:0,dealtime:i.sentTime,userIds:{}}))}else if(a.RongUtil.supportLocalStorage()&&i.messageType===a.RongIMClient.MessageType.ReadReceiptRequestMessage&&B){var D=g._client.userId+i.conversationType+i.targetId+"RECEIVED",E=JSON.parse(a.RongIMClient._storageProvider.getItem(D));if(E)if(i.senderUserId in E){if(!E[i.senderUserId].uIds||!E[i.senderUserId].uIds||-1!=E[i.senderUserId].uIds.indexOf(i.content.messageUId))return;E[i.senderUserId].uIds.push(i.content.messageUId),E[i.senderUserId].dealtime=i.sentTime,E[i.senderUserId].isResponse=!1,a.RongIMClient._storageProvider.setItem(D,JSON.stringify(E))}else{var F={uIds:[i.content.messageUId],dealtime:i.sentTime,isResponse:!1};E[i.senderUserId]=F,a.RongIMClient._storageProvider.setItem(D,JSON.stringify(E))}else{var G={};G[i.senderUserId]={uIds:[i.content.messageUId],dealtime:i.sentTime,isResponse:!1},a.RongIMClient._storageProvider.setItem(D,JSON.stringify(G))}}if(a.RongUtil.supportLocalStorage()&&i.messageType===a.RongIMClient.MessageType.ReadReceiptResponseMessage&&B){var H,I=i.content,J=I.receiptMessageDic[g._client.userId],C="";if(i.receiptResponse||(i.receiptResponse={}),J){for(var K=[],L=0,M=J.length;L<M;L++)C=g._client.userId+J[L]+"SENT",!(H=JSON.parse(a.RongIMClient._storageProvider.getItem(C)))||i.senderUserId in H.userIds||(K.push(J[L]),H.count+=1,H.userIds[i.senderUserId]=i.sentTime,i.receiptResponse[J[L]]=H.count,a.RongIMClient._storageProvider.setItem(C,JSON.stringify(H)));I.receiptMessageDic[g._client.userId]=K,i.content=I}}var N=this;if(a.RongIMClient._voipProvider&&["AcceptMessage","RingingMessage","HungupMessage","InviteMessage","MediaModifyMessage","MemberModifyMessage"].indexOf(i.messageType)>-1)setTimeout(function(){a.RongIMClient._voipProvider.onReceived(i)});else{var O=e||0,P=!n;setTimeout(function(){N._onReceived(i,O,P)})}}}}},b.prototype.handleMessage=function(b){if(b)switch(b._name){case"ConnAckMessage":g._client.handler.connectCallback.process(b.getStatus(),b.getUserId(),b.getTimestamp());break;case"PublishMessage":b.getSyncMsg()||0==b.getQos()||g._client.channel.writeAndFlush(new a.PubAckMessage(b.getMessageId())),b.getSyncMsg()&&!a.RongIMClient._memoryStore.depend.isPolling?g._client.handler.syncMsgMap[b.getMessageId()]=b:g._client.handler.onReceived(b);break;case"QueryAckMessage":0!=b.getQos()&&g._client.channel.writeAndFlush(new a.QueryConMessage(b.getMessageId()));var c=g._client.handler.map[b.getMessageId()];c&&(c.Callback.process(b.getStatus(),b.getData(),b.getDate(),c.Message),delete g._client.handler.map[b.getMessageId()]);break;case"PubAckMessage":var d=g._client.handler.map[b.getMessageId()];if(d)d.Callback.process(b.getStatus()||0,b.getMessageUId(),b.getTimestamp(),d.Message,b.getMessageId()),delete g._client.handler.map[b.getMessageId()];else{var e=a.Bridge._client.userId;a.RongIMClient._storageProvider.setItem("last_sentTime_"+e,b.timestamp),g._client.handler.onReceived(g._client.handler.syncMsgMap[b.messageId],b,null,null,!0),delete g._client.handler.syncMsgMap[b.getMessageId()]}break;case"PingRespMessage":a.RongIMClient._memoryStore.isFirstPingMsg?a.RongIMClient._memoryStore.isFirstPingMsg=!1:g._client.pauseTimer();break;case"DisconnectMessage":g._client.channel.disconnect(b.getStatus())}},b}();a.MessageHandler=h}(RongIMLib||(RongIMLib={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},RongIMLib;!function(a){var b=function(){function b(a){this.timeout=null,this.onError=null,a&&"number"==typeof a?this.timeoutMillis=a:(this.timeoutMillis=3e4,this.onError=a)}return b.prototype.resumeTimer=function(){var a=this;this.timeoutMillis>0&&!this.timeout&&(this.timeout=setTimeout(function(){a.readTimeOut(!0)},this.timeoutMillis))},b.prototype.pauseTimer=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},b.prototype.readTimeOut=function(b){b&&this.onError?this.onError(a.ErrorCode.TIMEOUT):this.pauseTimer()},b}();a.MessageCallback=b;var c=function(){function b(){this.publicServiceList=[]}return b.getInstance=function(){return new b},b.prototype.pottingProfile=function(b){var c;this.profile=new a.PublicServiceProfile,c=JSON.parse(b.extra),this.profile.isGlobal=c.isGlobal,this.profile.introduction=c.introduction,this.profile.menu=c.menu,this.profile.hasFollowed=c.follow,this.profile.publicServiceId=b.mpid,this.profile.name=b.name,this.profile.portraitUri=b.portraitUrl,this.profile.conversationType="mc"==b.type?a.ConversationType.APP_PUBLIC_SERVICE:a.ConversationType.PUBLIC_SERVICE,this.publicServiceList.push(this.profile)},b.prototype.mapping=function(b,c){switch(c){case"GetUserInfoOutput":return new a.UserInfo(b.userId,b.userName,b.userPortrait);case"GetQNupTokenOutput":return{deadline:a.MessageUtil.int64ToTimestamp(b.deadline),token:b.token};case"GetQNdownloadUrlOutput":return{downloadUrl:b.downloadUrl};case"CreateDiscussionOutput":return b.id;case"ChannelInfoOutput":var d=new a.Discussion;return d.creatorId=b.adminUserId,d.id=b.channelId,d.memberIdList=b.firstTenUserIds,d.name=b.channelName,d.isOpen=b.openStatus,d;case"GroupHashOutput":return b.result;case"QueryBlackListOutput":return b.userIds;case"SearchMpOutput":case"PullMpOutput":if(b.info){var e=this;Array.forEach(b.info,function(a){setTimeout(function(){e.pottingProfile(a)},100)})}return this.publicServiceList;default:return b}},b}();a.CallbackMapping=c;var d=function(c){function d(a,b){c.call(this,b),this._cb=a,this._timeout=b}return __extends(d,c),d.prototype.process=function(b,c,d,e,f){if(this.readTimeOut(),0==b){e&&(e.setSentStatus=b);if(a.RongIMClient._memoryStore.isPullFinished){var g=a.Bridge._client.userId;a.RongIMClient._storageProvider.setItem("last_sentTime_"+g,d),a.SyncTimeUtil.set({messageDirection:a.MessageDirection.SEND,sentTime:d})}this._cb({messageUId:c,timestamp:d,messageId:f})}else this._timeout(b,{messageUId:c,sentTime:d})},d.prototype.readTimeOut=function(a){b.prototype.readTimeOut.call(this,a)},d}(b);a.PublishCallback=d;var e=function(d){function e(a,b){d.call(this,b),this._cb=a,this._timeout=b}return __extends(e,d),e.prototype.process=function(b,d,e,f){if(this.readTimeOut(),f&&d&&0==b){try{d=c.getInstance().mapping(a.RongIMClient.Protobuf[f].decode(d),f)}catch(g){return void this._timeout(a.ErrorCode.UNKNOWN)}"GetUserInfoOutput"==f&&(a.Client.userInfoMapping[d.userId]=d),this._cb(d)}else b>0?this._timeout(b):this._cb(b)},e.prototype.readTimeOut=function(a){b.prototype.readTimeOut.call(this,a)},e}(b);a.QueryCallback=e;var f=function(c){function d(a,b,d){c.call(this,b),this._client=d,this._cb=a,this._timeout=b}return __extends(d,c),d.prototype.process=function(b,c,d){if(this.readTimeOut(),0==b){this._client.userId=c;var e=this;if(!a.RongIMClient._memoryStore.depend.isPolling&&a.RongIMClient._memoryStore.isFirstPingMsg?a.Bridge._client.checkSocket({onSuccess:function(){a.RongIMClient.isNotPullMsg||e._client.syncTime(void 0,void 0,void 0,!0)},onError:function(){a.RongIMClient._memoryStore.isFirstPingMsg=!1,a.RongIMClient.getInstance().disconnect(),a.RongIMClient.connect(a.RongIMClient._memoryStore.token,a.RongIMClient._memoryStore.callback)}}):a.RongIMClient.isNotPullMsg||e._client.syncTime(void 0,void 0,void 0,!0),a.Bridge._client.channel.socket.fire("StatusChanged",0),this._client.reconnectObj.onSuccess)this._client.reconnectObj.onSuccess(c),delete this._client.reconnectObj.onSuccess;else{var f=this;setTimeout(function(){f._cb(c)},500)}a.RongIMClient._memoryStore.connectAckTime=d,(new Date).getTime()-d?a.RongIMClient._memoryStore.deltaTime=(new Date).getTime()-d:a.RongIMClient._memoryStore.deltaTime=0}else if(6==b){a.RongIMClient.getInstance().disconnect();var f=this,g=f._client,h=g.appId,i=g.token;(new a.Navigation).getServerEndpoint(i,h,function(){g.clearHeartbeat();var b=new a.Client(i,h);a.Bridge._client=b,b.__init(function(){"websocket"==a.Transportations._TransportType&&g.keepLive()})},f._timeout,!1)}else a.Bridge._client.channel.socket.socket._status=b,this._client.reconnectObj.onError?(this._client.reconnectObj.onError(b),delete this._client.reconnectObj.onError):this._timeout(b)},d.prototype.readTimeOut=function(a){b.prototype.readTimeOut.call(this,a)},d}(b);a.ConnectAck=f}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(){window.getServerEndpoint=function(b){var c=a.RongIMClient._storageProvider;c.setItem("fullnavi",JSON.stringify(b));var d=b.server;d&&(d+=",");var e=b.backupServer||"",f="{server}{backupServer}",g=a.RongUtil.tplEngine(f,{server:d,backupServer:e});g=g.split(","),c.setItem("servers",JSON.stringify(g));var h=a.RongIMClient._memoryStore.token,i=a.InnerUtil.getUId(h);c.setItem("rc_uid",i);var j=b.userId;if(c.setItem("current_user",j),b.voipCallInfo){
var k=JSON.parse(b.voipCallInfo);a.RongIMClient._memoryStore.voipStategy=k.strategy,c.setItem("voipStrategy",k.strategy)}var l=b.openMp;c.setItem("openMp"+i,l),a.RongIMClient._memoryStore.depend.openMp=l,a.Channel._ConnectionStatusListener.onChanged(a.ConnectionStatus.RESPONSE_NAVI)}}return b.clear=function(){var b=a.RongIMClient._storageProvider;b.removeItem("rc_uid"),b.removeItem("serverIndex"),b.removeItem("rongSDK")},b.prototype.connect=function(b,c,d){var e=a.RongIMClient._storageProvider.getItem("appId");e&&e!=b&&(a.RongIMClient._storageProvider.clearItem(),a.RongIMClient._storageProvider.setItem("appId",b)),e||a.RongIMClient._storageProvider.setItem("appId",b);var f=new a.Client(c,b);return this.getServerEndpoint(c,b,function(){f.connect(d)},d.onError,!0),f},b.prototype.getServerEndpoint=function(c,d,e,f,g){if(g){var h=md5(c).slice(8,16),i=a.RongIMClient._storageProvider,j=i.getItem("rongSDK"),k=a.Transportations._TransportType==j,l=i.getItem("rc_uid"),m=l==h,n=i.getItem("servers"),o="string"==typeof n;if(m&&k&&o){a.RongIMClient._memoryStore.voipStategy=i.getItem("voipStrategy");var p=i.getItem("openMp"+h);return a.RongIMClient._memoryStore.depend.openMp=p,void e()}}b.clear(),a.Channel._ConnectionStatusListener.onChanged(a.ConnectionStatus.REQUEST_NAVI);var q=document.createElement("script"),r=a.RongIMClient._memoryStore.depend,s=r.navi,t=r.isPolling?"cometnavi":"navi";c=encodeURIComponent(c);var u=a.RongIMClient.sdkver,v=a.RongUtil.getTimestamp(),w="{domain}/{path}.js?appId={appId}&token={token}&callBack=getServerEndpoint&v={sdkver}&r={random}",x=a.RongUtil.tplEngine(w,{domain:s,path:t,appId:d,token:c,sdkver:u,random:v});q.src=x,document.body.appendChild(q),q.onerror=function(){f(a.ConnectionState.TOKEN_INCORRECT)},"onload"in q?q.onload=e:q.onreadystatechange=function(){"loaded"==q.readyState&&e()}},b.Endpoint=new Object,b}();a.Navigation=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(b){this._name="BaseMessage",this.lengthSize=0,b instanceof a.Header?this._header=b:this._header=new a.Header(b,!1,a.Qos.AT_MOST_ONCE,!1)}return b.prototype.read=function(a,b){this.readMessage(a,b)},b.prototype.write=function(b){var c=new a.BinaryHelper,d=c.convertStream(b);return this._headerCode=this.getHeaderFlag(),d.write(this._headerCode),this.writeMessage(d),d},b.prototype.getHeaderFlag=function(){return this._header.encode()},b.prototype.getLengthSize=function(){return this.lengthSize},b.prototype.toBytes=function(){return this.write([]).getBytesArray()},b.prototype.isRetained=function(){return this._header.retain},b.prototype.setRetained=function(a){this._header.retain=a},b.prototype.setQos=function(b){this._header.qos="[object Object]"==Object.prototype.toString.call(b)?b:a.Qos[b]},b.prototype.setDup=function(a){this._header.dup=a},b.prototype.isDup=function(){return this._header.dup},b.prototype.getType=function(){return this._header.type},b.prototype.getQos=function(){return this._header.qos},b.prototype.messageLength=function(){return 0},b.prototype.writeMessage=function(a){},b.prototype.readMessage=function(a,b){},b.prototype.init=function(a){var b,c,d=this;for(c in a)a.hasOwnProperty(c)&&(b=c.replace(/^\w/,function(a){var b=a.charCodeAt(0);return"set"+(b>=97?String.fromCharCode(-33&b):a)}))in d&&("status"==c?d[b](disconnectStatus[a[c]]?disconnectStatus[a[c]]:a[c]):d[b](a[c]))},b}();a.BaseMessage=b;var c=function(b){function c(c){switch(b.call(this,0==arguments.length||3==arguments.length?a.Type.CONNECT:arguments[0]),this._name="ConnectMessage",this.CONNECT_HEADER_SIZE=12,this.protocolId="RCloud",this.binaryHelper=new a.BinaryHelper,this.protocolVersion=3,arguments.length){case 0:case 1:case 3:if(!arguments[0]||arguments[0].length>64)throw new Error("ConnectMessage:Client Id cannot be null and must be at most 64 characters long: "+arguments[0]);this.clientId=arguments[0],this.cleanSession=arguments[1],this.keepAlive=arguments[2]}}return __extends(c,b),c.prototype.messageLength=function(){var a=this.binaryHelper.toMQttString(this.clientId).length;return a+=this.binaryHelper.toMQttString(this.willTopic).length,a+=this.binaryHelper.toMQttString(this.will).length,a+=this.binaryHelper.toMQttString(this.appId).length,(a+=this.binaryHelper.toMQttString(this.token).length)+this.CONNECT_HEADER_SIZE},c.prototype.readMessage=function(a){this.protocolId=a.readUTF(),this.protocolVersion=a.readByte();var b=a.readByte();if(this.hasAppId=(128&b)>0,this.hasToken=(64&b)>0,this.retainWill=(32&b)>0,this.willQos=b>>3&3,this.hasWill=(4&b)>0,this.cleanSession=(32&b)>0,this.keepAlive=256*a.read()+a.read(),this.clientId=a.readUTF(),this.hasWill&&(this.willTopic=a.readUTF(),this.will=a.readUTF()),this.hasAppId)try{this.appId=a.readUTF()}catch(c){throw new Error(c)}if(this.hasToken)try{this.token=a.readUTF()}catch(c){throw new Error(c)}return a},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);b.writeUTF(this.protocolId),b.write(this.protocolVersion);var c=this.cleanSession?2:0;return c|=this.hasWill?4:0,c|=this.willQos?this.willQos>>3:0,c|=this.retainWill?32:0,c|=this.hasToken?64:0,c|=this.hasAppId?128:0,b.write(c),b.writeChar(this.keepAlive),b.writeUTF(this.clientId),this.hasWill&&(b.writeUTF(this.willTopic),b.writeUTF(this.will)),this.hasAppId&&b.writeUTF(this.appId),this.hasToken&&b.writeUTF(this.token),b},c}(b);a.ConnectMessage=c;var d=function(b){function c(c){b.call(this,0==arguments.length?a.Type.CONNACK:1==arguments.length?arguments[0]instanceof a.Header?arguments[0]:a.Type.CONNACK:null),this._name="ConnAckMessage",this.MESSAGE_LENGTH=2,this.binaryHelper=new a.BinaryHelper;var d=this;switch(arguments.length){case 0:case 1:if(!(arguments[0]instanceof a.Header)&&arguments[0]in a.ConnectionState){if(null==arguments[0])throw new Error("ConnAckMessage:The status of ConnAskMessage can't be null");d.setStatus(arguments[0])}}}return __extends(c,b),c.prototype.messageLength=function(){var a=this.MESSAGE_LENGTH;return this.userId&&(a+=this.binaryHelper.toMQttString(this.userId).length),a},c.prototype.readMessage=function(a,b){a.read();var c=+a.read();if(!(c>=0&&c<=12))throw new Error("Unsupported CONNACK code:"+c);if(this.setStatus(c),b>this.MESSAGE_LENGTH){this.setUserId(a.readUTF());var d=(a.readUTF(),a.readLong());this.setTimestamp(d)}},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);switch(b.write(128),+status){case 0:case 1:case 2:case 5:case 6:b.write(+status);break;case 3:case 4:b.write(3);break;default:throw new Error("Unsupported CONNACK code:"+status)}return this.userId&&b.writeUTF(this.userId),b},c.prototype.setStatus=function(a){this.status=a},c.prototype.setUserId=function(a){this.userId=a},c.prototype.getStatus=function(){return this.status},c.prototype.getUserId=function(){return this.userId},c.prototype.setTimestamp=function(a){this.timestrap=a},c.prototype.getTimestamp=function(){return this.timestrap},c}(b);a.ConnAckMessage=d;var e=function(b){function c(c){b.call(this,c instanceof a.Header?c:a.Type.DISCONNECT),this._name="DisconnectMessage",this.MESSAGE_LENGTH=2,this.binaryHelper=new a.BinaryHelper,c instanceof a.Header||c in a.ConnectionStatus&&(this.status=c)}return __extends(c,b),c.prototype.messageLength=function(){return this.MESSAGE_LENGTH},c.prototype.readMessage=function(a){a.read();var b=+a.read();if(!(b>=0&&b<=5))throw new Error("Unsupported CONNACK code:"+b);this.setStatus(disconnectStatus[b]?disconnectStatus[b]:b)},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);if(b.write(0),!(+status>=1&&+status<=3))throw new Error("Unsupported CONNACK code:"+status);b.write(+status-1)},c.prototype.setStatus=function(a){this.status=a},c.prototype.getStatus=function(){return this.status},c}(b);a.DisconnectMessage=e;var f=function(b){function c(c){b.call(this,c&&c instanceof a.Header?c:a.Type.PINGREQ),this._name="PingReqMessage"}return __extends(c,b),c}(b);a.PingReqMessage=f;var g=function(b){function c(c){b.call(this,c&&c instanceof a.Header?c:a.Type.PINGRESP),this._name="PingRespMessage"}return __extends(c,b),c}(b);a.PingRespMessage=g;var h=function(b){function c(c){b.call(this,c),this._name="RetryableMessage",this.binaryHelper=new a.BinaryHelper}return __extends(c,b),c.prototype.messageLength=function(){return 2},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a),c=this.getMessageId(),d=255&c,e=(65280&c)>>8;return b.write(e),b.write(d),b},c.prototype.readMessage=function(a,b){var c=256*a.read()+a.read();this.setMessageId(parseInt(c,10))},c.prototype.setMessageId=function(a){this.messageId=a},c.prototype.getMessageId=function(){return this.messageId},c}(b);a.RetryableMessage=h;var i=function(b){function c(c){b.call(this,c instanceof a.Header?c:a.Type.PUBACK),this.msgLen=2,this.date=0,this.millisecond=0,this.timestamp=0,this.binaryHelper=new a.BinaryHelper,this._name="PubAckMessage",c instanceof a.Header||b.prototype.setMessageId.call(this,c)}return __extends(c,b),c.prototype.messageLength=function(){return this.msgLen},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);h.prototype.writeMessage.call(this,b)},c.prototype.readMessage=function(a,b){h.prototype.readMessage.call(this,a),this.date=a.readInt(),this.status=256*a.read()+a.read(),this.millisecond=256*a.read()+a.read(),this.timestamp=1e3*this.date+this.millisecond,this.messageUId=a.readUTF()},c.prototype.setStatus=function(a){this.status=a},c.prototype.setTimestamp=function(a){this.timestamp=a},c.prototype.setMessageUId=function(a){this.messageUId=a},c.prototype.getStatus=function(){return this.status},c.prototype.getDate=function(){return this.date},c.prototype.getTimestamp=function(){return this.timestamp},c.prototype.getMessageUId=function(){return this.messageUId},c}(h);a.PubAckMessage=i;var j=function(b){function c(c,d,e){b.call(this,1==arguments.length&&c instanceof a.Header?c:3==arguments.length?a.Type.PUBLISH:0),this._name="PublishMessage",this.binaryHelper=new a.BinaryHelper,this.syncMsg=!1,3==arguments.length&&(this.topic=c,this.targetId=e,this.data="string"==typeof d?this.binaryHelper.toMQttString(d):d)}return __extends(c,b),c.prototype.messageLength=function(){var a=10;return a+=this.binaryHelper.toMQttString(this.topic).length,a+=this.binaryHelper.toMQttString(this.targetId).length,a+=this.data.length},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);b.writeUTF(this.topic),b.writeUTF(this.targetId),h.prototype.writeMessage.apply(this,arguments),b.write(this.data)},c.prototype.readMessage=function(a,b){var c=6;this.date=a.readInt(),this.topic=a.readUTF(),c+=this.binaryHelper.toMQttString(this.topic).length,this.targetId=a.readUTF(),c+=this.binaryHelper.toMQttString(this.targetId).length,h.prototype.readMessage.apply(this,arguments),this.data=new Array(b-c),this.data=a.read(this.data)},c.prototype.setTopic=function(a){this.topic=a},c.prototype.setData=function(a){this.data=a},c.prototype.setTargetId=function(a){this.targetId=a},c.prototype.setDate=function(a){this.date=a},c.prototype.setSyncMsg=function(a){this.syncMsg=a},c.prototype.getSyncMsg=function(){return this.syncMsg},c.prototype.getTopic=function(){return this.topic},c.prototype.getData=function(){return this.data},c.prototype.getTargetId=function(){return this.targetId},c.prototype.getDate=function(){return this.date},c}(h);a.PublishMessage=j;var k=function(b){function c(c,d,e){b.call(this,c instanceof a.Header?c:3==arguments.length?a.Type.QUERY:null),this.binaryHelper=new a.BinaryHelper,this._name="QueryMessage",3==arguments.length&&(this.data="string"==typeof d?this.binaryHelper.toMQttString(d):d,this.topic=c,this.targetId=e)}return __extends(c,b),c.prototype.messageLength=function(){var a=0;return a+=this.binaryHelper.toMQttString(this.topic).length,a+=this.binaryHelper.toMQttString(this.targetId).length,a+=2,a+=this.data.length},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);b.writeUTF(this.topic),b.writeUTF(this.targetId),h.prototype.writeMessage.call(this,b),b.write(this.data)},c.prototype.readMessage=function(a,b){var c=0;this.topic=a.readUTF(),this.targetId=a.readUTF(),c+=this.binaryHelper.toMQttString(this.topic).length,c+=this.binaryHelper.toMQttString(this.targetId).length,this.readMessage.apply(this,arguments),c+=2,this.data=new Array(b-c),a.read(this.data)},c.prototype.setTopic=function(a){this.topic=a},c.prototype.setData=function(a){this.data=a},c.prototype.setTargetId=function(a){this.targetId=a},c.prototype.getTopic=function(){return this.topic},c.prototype.getData=function(){return this.data},c.prototype.getTargetId=function(){return this.targetId},c}(h);a.QueryMessage=k;var l=function(b){function c(c){b.call(this,c instanceof a.Header?c:a.Type.QUERYCON),this._name="QueryConMessage",c instanceof a.Header||b.prototype.setMessageId.call(this,c)}return __extends(c,b),c}(h);a.QueryConMessage=l;var m=function(b){function c(c){b.call(this,c),this._name="QueryAckMessage",this.binaryHelper=new a.BinaryHelper}return __extends(c,b),c.prototype.readMessage=function(a,b){h.prototype.readMessage.call(this,a),this.date=a.readInt(),this.setStatus(256*a.read()+a.read()),b>0&&(this.data=new Array(b-8),this.data=a.read(this.data))},c.prototype.getData=function(){return this.data},c.prototype.getStatus=function(){return this.status},c.prototype.getDate=function(){return this.date},c.prototype.setDate=function(a){this.date=a},c.prototype.setStatus=function(a){this.status=a},c.prototype.setData=function(a){this.data=a},c}(h);a.QueryAckMessage=m}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(b){var c=new a.BinaryHelper;this.out=c.convertStream(b)}return b.prototype.writeMessage=function(b){b instanceof a.BaseMessage&&b.write(this.out)},b}();a.MessageOutputStream=b;var c=function(){function b(b,c){if(c)this.flags=b.headerCode;else{var d=(new a.BinaryHelper).convertStream(b);this.flags=d.readByte(),this._in=d}this.header=new a.Header(this.flags),this.isPolling=c,this.In=b}return b.prototype.readMessage=function(){switch(this.header.getType()){case 1:this.msg=new a.ConnectMessage(this.header);break;case 2:this.msg=new a.ConnAckMessage(this.header);break;case 3:this.msg=new a.PublishMessage(this.header),this.msg.setSyncMsg(this.header.getSyncMsg());break;case 4:this.msg=new a.PubAckMessage(this.header);break;case 5:this.msg=new a.QueryMessage(this.header);break;case 6:this.msg=new a.QueryAckMessage(this.header);break;case 7:this.msg=new a.QueryConMessage(this.header);break;case 9:case 11:case 13:this.msg=new a.PingRespMessage(this.header);break;case 8:case 10:case 12:this.msg=new a.PingReqMessage(this.header);break;case 14:this.msg=new a.DisconnectMessage(this.header);break;default:throw new Error("No support for deserializing "+this.header.getType()+" messages")}return this.isPolling?this.msg.init(this.In):this.msg.read(this._in,this.In.length-1),this.msg},b}();a.MessageInputStream=c;var d=function(){function b(b,c,d,e){this.retain=!1,this.qos=a.Qos.AT_LEAST_ONCE,this.dup=!1,this.syncMsg=!1,b&&+b==b&&1==arguments.length?(this.retain=(1&b)>0,this.qos=(6&b)>>1,this.dup=(8&b)>0,this.type=b>>4&15,this.syncMsg=8==(8&b)):(this.type=b,this.retain=c,this.qos=d,this.dup=e)}return b.prototype.getSyncMsg=function(){return this.syncMsg},b.prototype.getType=function(){return this.type},b.prototype.encode=function(){var b=this;switch(this.qos){case a.Qos[0]:b.qos=a.Qos.AT_MOST_ONCE;break;case a.Qos[1]:b.qos=a.Qos.AT_LEAST_ONCE;break;case a.Qos[2]:b.qos=a.Qos.EXACTLY_ONCE;break;case a.Qos[3]:b.qos=a.Qos.DEFAULT}var c=this.type<<4;return c|=this.retain?1:0,c|=this.qos<<1,c|=this.dup?8:0},b.prototype.toString=function(){return"Header [type="+this.type+",retain="+this.retain+",qos="+this.qos+",dup="+this.dup+"]"},b}();a.Header=d;var e=function(){function a(){}return a.prototype.writeUTF=function(a,b){for(var c=[],d=0,e=0,f=a.length;e<f;e++){var g=a.charCodeAt(e);g>=0&&g<=127?(d+=1,c.push(g)):g>=128&&g<=2047?(d+=2,c.push(192|31&g>>6),c.push(128|63&g)):g>=2048&&g<=65535&&(d+=3,c.push(224|15&g>>12),c.push(128|63&g>>6),c.push(128|63&g))}for(var e=0,f=c.length;e<f;e++)c[e]>255&&(c[e]&=255);return b?c:d<=255?[0,d].concat(c):[d>>8,255&d].concat(c)},a.prototype.readUTF=function(a){if("[object String]"==Object.prototype.toString.call(a))return a;for(var b="",c=a,d=0,e=c.length;d<e;d++){c[d]<0&&(c[d]+=256);var f=c[d].toString(2),g=f.match(/^1+?(?=0)/);if(g&&8==f.length){for(var h=g[0].length,i="",j=0;j<h;j++)i+=c[j+d].toString(2).slice(2);b+=String.fromCharCode(parseInt(i,2)),d+=h-1}else b+=String.fromCharCode(c[d])}return b},a.prototype.convertStream=function(a){return a instanceof f?a:new f(a)},a.prototype.toMQttString=function(a){return this.writeUTF(a)},a}();a.BinaryHelper=e;var f=function(){function a(a){this.position=0,this.writen=0,this.poolLen=0,this.binaryHelper=new e,this.pool=a,this.poolLen=a.length}return a.prototype.check=function(){return this.position>=this.pool.length},a.prototype.readInt=function(){if(this.check())return-1;for(var a="",b=0;b<4;b++){var c=this.pool[this.position++].toString(16);1==c.length&&(c="0"+c),a+=c.toString(16)}return parseInt(a,16)},a.prototype.readLong=function(){if(this.check())return-1;for(var a="",b=0;b<8;b++){var c=this.pool[this.position++].toString(16);1==c.length&&(c="0"+c),a+=c}return parseInt(a,16)},a.prototype.readTimestamp=function(){if(this.check())return-1;for(var a="",b=0;b<8;b++)a+=this.pool[this.position++].toString(16);return a=a.substring(2,8),parseInt(a,16)},a.prototype.readUTF=function(){if(this.check())return-1;var a=this.readByte()<<8|this.readByte();return this.binaryHelper.readUTF(this.pool.subarray(this.position,this.position+=a))},a.prototype.readByte=function(){if(this.check())return-1;var a=this.pool[this.position++];return a>255&&(a&=255),a},a.prototype.read=function(a){return a?this.pool.subarray(this.position,this.poolLen):this.readByte()},a.prototype.write=function(a){var b=a;return"[object array]"==Object.prototype.toString.call(b).toLowerCase()?[].push.apply(this.pool,b):+b==b&&(b>255&&(b&=255),this.pool.push(b),this.writen++),b},a.prototype.writeChar=function(a){if(+a!=a)throw new Error("writeChar:arguments type is error");this.write(a>>8&255),this.write(255&a),this.writen+=2},a.prototype.writeUTF=function(a){var b=this.binaryHelper.writeUTF(a);[].push.apply(this.pool,b),this.writen+=b.length},a.prototype.toComplements=function(){for(var a=this.pool,b=0;b<this.poolLen;b++)a[b]>128&&(a[b]-=256);return a},a.prototype.getBytesArray=function(a){return a?this.toComplements():this.pool},a}();a.RongIMStream=f}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){return this.connected=!1,this.isClose=!1,this.queue=[],this.empty=new Function,this._socket=a,this}return b.prototype.createTransport=function(b,c){if(!b)throw new Error("URL can't be empty");this.url=b;var d=a.RongIMClient._memoryStore.depend,e=d.wsScheme;return b=a.RongUtil.tplEngine("{wsScheme}{url}",{wsScheme:e,url:b}),this.socket=new WebSocket(b),this.socket.binaryType="arraybuffer",this.addEvent(),this.socket},b.prototype.send=function(b){if(!this.connected&&!this.isClose)return void this.queue.push(b);if(this.isClose)return void this._socket.fire("StatusChanged",a.ConnectionStatus.CONNECTION_CLOSED);var c=new a.RongIMStream([]);new a.MessageOutputStream(c).writeMessage(b);var d=c.getBytesArray(!0),e=new Int8Array(d);return this.socket.send(e.buffer),this},b.prototype.onData=function(b){return a.MessageUtil.isArray(b)?this._socket.onMessage(new a.MessageInputStream(b).readMessage()):this._socket.onMessage(new a.MessageInputStream(a.MessageUtil.ArrayFormInput(b)).readMessage()),""},b.prototype.onClose=function(b){var c=this;c.isClose=!0,c.socket=this.empty,a.Bridge._client.clearHeartbeat(),1006!=b.code||this._status?c._status=0:c._socket.fire("StatusChanged",a.ConnectionStatus.NETWORK_UNAVAILABLE)},b.prototype.onError=function(a){throw new Error(a)},b.prototype.addEvent=function(){var a=this;a.socket.onopen=function(){a.connected=!0,a.isClose=!1,a.doQueue(),a._socket.fire("connect")},a.socket.onmessage=function(b){"string"==typeof b.data?a.onData(b.data.split(",")):a.onData(b.data)},a.socket.onerror=function(b){a.onError(b)},a.socket.onclose=function(b){a.onClose(b)}},b.prototype.doQueue=function(){for(var a=this,b=0,c=a.queue.length;b<c;b++)a.send(a.queue[b])},b.prototype.disconnect=function(a){var b=this;b.socket.readyState&&(b.isClose=!0,a&&(b._status=a),b.socket.close())},b.prototype.reconnect=function(){this.disconnect(),this.createTransport(this.url)},b.prototype.close=function(){this.socket.close()},b}();a.SocketTransportation=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){return this.empty=new Function,this.connected=!1,this.pid=+new Date+Math.random()+"",this.queue=[],this.socket=a,this}return b.prototype.createTransport=function(b,c){if(!b)throw new Error("Url is empty,Please check it!");this.url=b;var d=a.RongIMClient._storageProvider.getItem("sId"+a.Navigation.Endpoint.userId),e=this;return d?(setTimeout(function(){e.onSuccess('{"status":0,"userId":"'+a.Navigation.Endpoint.userId+'","headerCode":32,"messageId":0,"sessionid":"'+d+'"}'),e.connected=!0},500),this):(this.getRequest(b,!0),this)},b.prototype.requestFactory=function(b,c,d){var e=this.XmlHttpRequest();return d&&(e.multipart=!0),e.timeout=6e4,e.open(c||"GET",a.RongIMClient._memoryStore.depend.protocol+b),"POST"==c&&"setRequestHeader"in e&&e.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),e},b.prototype.getRequest=function(a,b){var c=this;c.xhr=this.requestFactory(a+"&pid="+encodeURIComponent(c.pid),"GET"),"onload"in c.xhr?(c.xhr.onload=function(){c.xhr.onload=c.empty,"lost params"==this.responseText?c.onError():c.onSuccess(this.responseText,b)},c.xhr.onerror=function(){c.disconnect()}):c.xhr.onreadystatechange=function(){4==c.xhr.readyState&&(c.xhr.onreadystatechange=c.empty,/^(200|202)$/.test(c.xhr.status)?c.onSuccess(c.xhr.responseText,b):/^(400|403)$/.test(c.xhr.status)?c.onError():c.disconnect())},c.xhr.send()},b.prototype.send=function(b){var c=this,d=c.sendxhr=this.requestFactory(a.Navigation.Endpoint.host+"/websocket"+b.url+"&pid="+encodeURIComponent(c.pid),"POST");"onload"in d?(d.onload=function(){d.onload=c.empty,c.onData(d.responseText)},d.onerror=function(){d.onerror=c.empty}):d.onreadystatechange=function(){4==d.readyState&&(this.onreadystatechange=this.empty,/^(202|200)$/.test(d.status)&&c.onData(d.responseText))},d.send(JSON.stringify(b.data))},b.prototype.onData=function(b,c){if(b&&"lost params"!=b){var d=this,e=JSON.parse(b);return e.userId&&(a.Navigation.Endpoint.userId=e.userId),c&&a.RongIMClient._storageProvider.setItem("sId"+a.Navigation.Endpoint.userId,c),a.MessageUtil.isArray(e)||(e=[e]),Array.forEach(e,function(b){d.socket.fire("message",new a.MessageInputStream(b,!0).readMessage())}),""}},b.prototype.XmlHttpRequest=function(){var a="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;return"undefined"!=typeof XMLHttpRequest&&a?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:new ActiveXObject("Microsoft.XMLHTTP")},b.prototype.onClose=function(){this.xhr&&(this.xhr.onload?this.xhr.onreadystatechange=this.xhr.onload=this.empty:this.xhr.onreadystatechange=this.empty,this.xhr.abort(),this.xhr=null),this.sendxhr&&(this.sendxhr.onload?this.sendxhr.onreadystatechange=this.sendxhr.onload=this.empty:this.sendxhr.onreadystatechange=this.empty,this.sendxhr.abort(),this.sendxhr=null)},b.prototype.disconnect=function(){a.RongIMClient._storageProvider.removeItem("sId"+a.Navigation.Endpoint.userId),a.RongIMClient._storageProvider.removeItem(a.Navigation.Endpoint.userId+"msgId"),this.onClose()},b.prototype.reconnect=function(){this.disconnect(),this.createTransport(this.url)},b.prototype.onSuccess=function(b,c){var d=b.match(/"sessionid":"\S+?(?=")/);if(this.onData(b,d?d[0].slice(13):0),/"headerCode":-32,/.test(b))return a.RongIMClient._storageProvider.removeItem("sId"+a.Navigation.Endpoint.userId),void a.RongIMClient._storageProvider.removeItem(a.Navigation.Endpoint.userId+"msgId");this.getRequest(a.Navigation.Endpoint.host+"/pullmsg.js?sessionid="+a.RongIMClient._storageProvider.getItem("sId"+a.Navigation.Endpoint.userId)+"&timestrap="+encodeURIComponent((new Date).getTime()+Math.random()+"")),this.connected=!0,c&&this.socket.fire("connect")},b.prototype.onError=function(){a.RongIMClient._storageProvider.removeItem("sId"+a.Navigation.Endpoint.userId),a.RongIMClient._storageProvider.removeItem(a.Navigation.Endpoint.userId+"msgId"),this.onClose(),this.connected=!1,this.socket.fire("disconnect")},b.prototype.close=function(){this.xhr.abort(),this.sendxhr=null},b}();a.PollingTransportation=b}(RongIMLib||(RongIMLib={}));var typeMapping={"RC:TxtMsg":"TextMessage","RC:ImgMsg":"ImageMessage","RC:VcMsg":"VoiceMessage","RC:ImgTextMsg":"RichContentMessage","RC:FileMsg":"FileMessage","RC:LBSMsg":"LocationMessage","RC:InfoNtf":"InformationNotificationMessage","RC:ContactNtf":"ContactNotificationMessage","RC:ProfileNtf":"ProfileNotificationMessage","RC:CmdNtf":"CommandNotificationMessage","RC:DizNtf":"DiscussionNotificationMessage","RC:CmdMsg":"CommandMessage","RC:TypSts":"TypingStatusMessage","RC:CsChaR":"ChangeModeResponseMessage","RC:CsHsR":"HandShakeResponseMessage","RC:CsEnd":"TerminateMessage","RC:CsSp":"SuspendMessage","RC:CsUpdate":"CustomerStatusUpdateMessage","RC:ReadNtf":"ReadReceiptMessage","RC:VCAccept":"AcceptMessage","RC:VCRinging":"RingingMessage","RC:VCSummary":"SummaryMessage","RC:VCHangup":"HungupMessage","RC:VCInvite":"InviteMessage","RC:VCModifyMedia":"MediaModifyMessage","RC:VCModifyMem":"MemberModifyMessage","RC:CsContact":"CustomerContact","RC:PSImgTxtMsg":"PublicServiceRichContentMessage","RC:PSMultiImgTxtMsg":"PublicServiceMultiRichContentMessage","RC:GrpNtf":"GroupNotificationMessage","RC:PSCmd":"PublicServiceCommandMessage","RC:RcCmd":"RecallCommandMessage","RC:SRSMsg":"SyncReadStatusMessage","RC:RRReqMsg":"ReadReceiptRequestMessage","RC:RRRspMsg":"ReadReceiptResponseMessage","RCJrmf:RpMsg":"JrmfRedPacketMessage","RCJrmf:RpOpendMsg":"JrmfRedPacketOpenedMessage"},registerMessageTypeMapping={},HistoryMsgType={4:"qryCMsg",2:"qryDMsg",3:"qryGMsg",1:"qryPMsg",6:"qrySMsg",7:"qryPMsg",8:"qryPMsg",5:"qryCMsg"},disconnectStatus={1:6},RongIMLib;!function(RongIMLib){var Transportations=function(){function a(){}return a._TransportType=RongIMLib.Socket.WEBSOCKET,a}();RongIMLib.Transportations=Transportations;var SyncTimeUtil=function(){function a(){}return a.$getKey=function(a){var b=RongIMLib.Bridge._client,c=b.userId,d=1==a.messageDirection?"send":"receive",e=RongIMLib.RongIMClient._memoryStore.appKey;return RongIMLib.RongUtil.tplEngine("{appkey}_{userId}_{direction}box",{appkey:e,userId:c,direction:d})},a.set=function(b){var c=a.$getKey(b),d=b.sentTime;RongIMLib.RongIMClient._storageProvider.setItem(c,d)},a.get=function(){var b=a.$getKey({messageDirection:RongIMLib.MessageDirection.SEND}),c=a.$getKey({messageDirection:RongIMLib.MessageDirection.RECEIVE}),d=RongIMLib.RongIMClient._storageProvider;return{sent:Number(d.getItem(b)||0),received:Number(d.getItem(c)||0)}},a}();RongIMLib.SyncTimeUtil=SyncTimeUtil;var MessageUtil=function(){function MessageUtil(){}return MessageUtil.checkStorageSize=function(){return JSON.stringify(localStorage).length<468e4},MessageUtil.getFirstKey=function(a){var b="";for(var c in a){b=c;break}return b},MessageUtil.isEmpty=function(a){var b=!0;for(var c in a){b=!1;break}return b},MessageUtil.ArrayForm=function(a){if("[object ArrayBuffer]"==Object.prototype.toString.call(a)){var b=new Int8Array(a);return[].slice.call(b)}return a},MessageUtil.ArrayFormInput=function(a){if("[object ArrayBuffer]"==Object.prototype.toString.call(a)){return new Uint8Array(a)}return a},MessageUtil.indexOf=function(a,b,c){for(var d=a.length,e=c<0?Math.max(0,+c):c||0;e<d;e++)if(a[e]==b)return e;return-1},MessageUtil.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)},MessageUtil.forEach=function(a,b){return[].forEach?function(a,b){[].forEach.call(a,b)}:function(a,b){for(var c=0;c<a.length;c++)b.call(a,a[c],c,a)}},MessageUtil.remove=function(a,b){for(var c=0,d=a.length;c<d;c++)if(b(a[c]))return a.splice(c,1)[0];return null},MessageUtil.int64ToTimestamp=function(a,b){if(void 0===a.low)return a;var c=a.low;c<0&&(c+=4294967296),c=c.toString(16);var d=parseInt(a.high.toString(16)+"00000000".replace(new RegExp("0{"+c.length+"}$"),c),16);return b?new Date(d):d},MessageUtil.messageParser=function(entity,onReceived,offlineMsg){var message=new RongIMLib.Message,content=entity.content,de,objectName=entity.classname,val,isUseDef=!1;try{RongIMLib.RongIMClient._memoryStore.depend.isPolling?(val=(new RongIMLib.BinaryHelper).readUTF(content.offset?MessageUtil.ArrayForm(content.buffer).slice(content.offset,content.limit):content),de=JSON.parse(val)):(val=(new RongIMLib.BinaryHelper).readUTF(content.offset?MessageUtil.ArrayFormInput(content.buffer).subarray(content.offset,content.limit):content),de=JSON.parse(val))}catch(ex){de=val,isUseDef=!0}if(objectName in typeMapping){var str="new RongIMLib."+typeMapping[objectName]+"(de)";message.content=eval(str),message.messageType=typeMapping[objectName]}else if(objectName in registerMessageTypeMapping){var str="new RongIMLib.RongIMClient.RegisterMessage."+registerMessageTypeMapping[objectName]+"(de)";message.content=isUseDef?eval(str).decode(de):eval(str),message.messageType=registerMessageTypeMapping[objectName]}else message.content=new RongIMLib.UnknownMessage({content:de,objectName:objectName}),message.messageType="UnknownMessage";var dateTime=MessageUtil.int64ToTimestamp(entity.dataTime);return message.sentTime=dateTime>0?dateTime:+new Date,message.senderUserId=entity.fromUserId,message.conversationType=entity.type,entity.fromUserId==RongIMLib.Bridge._client.userId?message.targetId=entity.groupId:message.targetId=/^[234]$/.test(entity.type||entity.getType())?entity.groupId:message.senderUserId,1==entity.direction?(message.messageDirection=RongIMLib.MessageDirection.SEND,message.senderUserId=RongIMLib.Bridge._client.userId):message.messageDirection=RongIMLib.MessageDirection.RECEIVE,message.messageUId=entity.msgId,message.receivedTime=(new Date).getTime(),message.messageId=message.conversationType+"_"+~~(16777215*Math.random()),message.objectName=objectName,message.receivedStatus=RongIMLib.ReceivedStatus.READ,2==(2&entity.status)&&(message.receivedStatus=RongIMLib.ReceivedStatus.RETRIEVED),message.offLineMessage=!!offlineMsg,offlineMsg||RongIMLib.RongIMClient._memoryStore.connectAckTime>message.sentTime&&(message.offLineMessage=!0),message},MessageUtil.detectCMP=function(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState){200==b.status?a.success():a.fail(b.status)}};var c=a.url,d=a.url,c=a.method||"GET";b.open(c,d);var e=a.headers;for(var f in e){var g=e[f];b.setRequestHeader(f,g)}var h=JSON.stringify(a.body||{});return b.send(h),b},MessageUtil.sign={converNum:1,msgNum:1,isMsgStart:!0,isConvStart:!0},MessageUtil}();RongIMLib.MessageUtil=MessageUtil;var MessageIdHandler=function(){function a(){}return a.init=function(){this.messageId=+(RongIMLib.RongIMClient._storageProvider.getItem(RongIMLib.Navigation.Endpoint.userId+"msgId")||RongIMLib.RongIMClient._storageProvider.setItem(RongIMLib.Navigation.Endpoint.userId+"msgId",0)||0)},a.messageIdPlus=function(a){return RongIMLib.RongIMClient._memoryStore.depend.isPolling&&this.init(),this.messageId>=65535?(a(),!1):(this.messageId++,RongIMLib.RongIMClient._memoryStore.depend.isPolling&&RongIMLib.RongIMClient._storageProvider.setItem(RongIMLib.Navigation.Endpoint.userId+"msgId",this.messageId),this.messageId)},a.clearMessageId=function(){this.messageId=0,RongIMLib.RongIMClient._memoryStore.depend.isPolling&&RongIMLib.RongIMClient._storageProvider.setItem(RongIMLib.Navigation.Endpoint.userId+"msgId",this.messageId)},
a.getMessageId=function(){return RongIMLib.RongIMClient._memoryStore.depend.isPolling&&this.init(),this.messageId},a.messageId=0,a}();RongIMLib.MessageIdHandler=MessageIdHandler;var RongInnerTools=function(){function a(){}return a.convertUserStatus=function(a){a=RongIMLib.RongUtil.rename(a,{subUserId:"userId"});var b=JSON.parse(a.status),c=b.us;return c?(a.status=RongIMLib.RongUtil.rename(c,{o:"online",p:"platform",s:"status"}),a):a},a}();RongIMLib.RongInnerTools=RongInnerTools}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(a){throw new Error("This method is abstract, you must implement this method in inherited class.")}return a.obtain=function(){throw new Error("This method is abstract, you must implement this method in inherited class.")},a}();a.MessageContent=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(b);a.NotificationMessage=c;var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(b);a.StatusMessage=d;var e=function(){function b(){}return b.modelClone=function(a){var b={};for(var c in a)"messageName"!=c&&"encode"!=c&&(b[c]=a[c]);return b},b.modleCreate=function(b,c){var d=function(e){var f=this;for(var g in b)f[b[g]]=e[b[g]];d.prototype.messageName=c,d.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))}};return d},b}();a.ModelUtil=e}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){this.messageName="CustomerStatusMessage",this.status=a.status}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CustomerStatusMessage=b;var c=function(){function b(a){this.messageName="ChangeModeResponseMessage",this.code=a.code,this.data=a.data,this.msg=a.msg}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ChangeModeResponseMessage=c;var d=function(){function b(a){this.messageName="ChangeModeMessage",this.uid=a.uid,this.sid=a.sid,this.pid=a.pid}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ChangeModeMessage=d;var e=function(){function b(a){this.messageName="CustomerStatusUpdateMessage",this.serviceStatus=a.serviceStatus,this.sid=a.sid}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CustomerStatusUpdateMessage=e;var f=function(){function b(a){this.messageName="HandShakeMessage",a&&(this.requestInfo=a.requestInfo,this.userInfo=a.userInfo)}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.HandShakeMessage=f;var g=function(){function b(a){this.messageName="CustomerContact",this.page=a.page,this.nickName=a.nickName,this.routingInfo=a.routingInfo,this.info=a.info,this.requestInfo=a.requestInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CustomerContact=g;var h=function(){function b(a){this.messageName="EvaluateMessage",this.uid=a.uid,this.sid=a.sid,this.pid=a.pid,this.source=a.source,this.suggest=a.suggest,this.isresolve=a.isresolve,this.type=a.type}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.EvaluateMessage=h;var i=function(){function b(a){this.messageName="HandShakeResponseMessage",this.msg=a.msg,this.status=a.status,this.data=a.data}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.HandShakeResponseMessage=i;var j=function(){function b(a){this.messageName="SuspendMessage",this.uid=a.uid,this.sid=a.sid,this.pid=a.pid}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.SuspendMessage=j;var k=function(){function b(a){this.messageName="TerminateMessage",this.code=a.code,this.msg=a.msg,this.sid=a.sid}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.TerminateMessage=k}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(a){this.messageName="IsTypingStatusMessage"}return a.prototype.encode=function(){},a.prototype.getMessage=function(){return null},a}();a.IsTypingStatusMessage=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){if(this.messageName="InformationNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> InformationNotificationMessage.");this.message=a.message,this.extra=a.extra,a.user&&(this.user=a.user)}return b.obtain=function(a){return new b({message:a,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.InformationNotificationMessage=b;var c=function(){function b(a){if(this.messageName="CommandMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> CommandMessage.");try{"[object String]"==Object.prototype.toString.call(a.data)?this.data=JSON.parse(a.data):this.data=a.data}catch(b){this.data=a.data}this.name=a.name,this.extra=a.extra}return b.obtain=function(a){return new b({data:a,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CommandMessage=c;var d=function(){function c(a){if(this.messageName="ContactNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ContactNotificationMessage.");this.operation=a.operation,this.targetUserId=a.targetUserId,this.message=a.message,this.extra=a.extra,this.sourceUserId=a.sourceUserId,a.user&&(this.user=a.user)}return c.obtain=function(a,c,d,e){return new b({operation:a,sourceUserId:c,targetUserId:d,message:e})},c.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},c.CONTACT_OPERATION_ACCEPT_RESPONSE="ContactOperationAcceptResponse",c.CONTACT_OPERATION_REJECT_RESPONSE="ContactOperationRejectResponse",c.CONTACT_OPERATION_REQUEST="ContactOperationRequest",c}();a.ContactNotificationMessage=d;var e=function(){function b(a){if(this.messageName="ProfileNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ProfileNotificationMessage.");this.operation=a.operation;try{"[object String]"==Object.prototype.toString.call(a.data)?this.data=JSON.parse(a.data):this.data=a.data}catch(b){this.data=a.data}this.extra=a.extra,a.user&&(this.user=a.user)}return b.obtain=function(a,c){return new b({operation:a,data:c})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ProfileNotificationMessage=e;var f=function(){function b(a){if(this.messageName="CommandNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ProfileNotificationMessage.");try{"[object String]"==Object.prototype.toString.call(a.data)?this.data=JSON.parse(a.data):this.data=a.data}catch(b){this.data=a.data}this.name=a.name,this.extra=a.extra,a.user&&(this.user=a.user)}return b.obtain=function(a,c){return new b({name:a,data:c,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CommandNotificationMessage=f;var g=function(){function b(a){if(this.messageName="DiscussionNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> DiscussionNotificationMessage.");this.extra=a.extra,this.extension=a.extension,this.type=a.type,this.isHasReceived=a.isHasReceived,this.operation=a.operation,this.user=a.user,a.user&&(this.user=a.user)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.DiscussionNotificationMessage=g;var h=function(){function b(a){if(this.messageName="GroupNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> GroupNotificationMessage.");a.operatorUserId&&(this.operatorUserId=a.operatorUserId),a.operation&&(this.operation=a.operation),a.data&&(this.data=a.data),a.message&&(this.message=a.message),a.extra&&(this.extra=a.extra)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.GroupNotificationMessage=h}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){if(this.messageName="TextMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> TextMessage.");this.content=a.content,this.extra=a.extra,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.obtain=function(a){return new b({extra:"",content:a})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.TextMessage=b;var c=function(){function b(a){if(this.messageName="TypingStatusMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> TypingStatusMessage.");this.typingContentType=a.typingContentType,this.data=a.data}return b.obtain=function(a,c){return new b({typingContentType:a,data:c})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.TypingStatusMessage=c;var d=function(){function b(a){if(this.messageName="ReadReceiptMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ReadReceiptMessage.");this.lastMessageSendTime=a.lastMessageSendTime,this.messageUId=a.messageUId,this.type=a.type}return b.obtain=function(a,c,d){return new b({messageUId:a,lastMessageSendTime:c,type:d})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ReadReceiptMessage=d;var e=function(){function b(a){if(this.messageName="VoiceMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> VoiceMessage.");this.content=a.content,this.duration=a.duration,this.extra=a.extra,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.obtain=function(a,c){return new b({content:a,duration:c,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.VoiceMessage=e;var f=function(){function b(a){this.messageName="RecallCommandMessage",this.messageUId=a.messageUId,this.conversationType=a.conversationType,this.targetId=a.targetId,this.sentTime=a.sentTime,a.extra&&(this.extra=a.extra),a.user&&(this.user=a.user)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.RecallCommandMessage=f;var g=function(){function b(a){if(this.messageName="ImageMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ImageMessage.");this.content=a.content,this.imageUri=a.imageUri,a.extra&&(this.extra=a.extra),a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.obtain=function(a,c){return new b({content:a,imageUri:c,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ImageMessage=g;var h=function(){function b(a){if(this.messageName="LocationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> LocationMessage.");this.latitude=a.latitude,this.longitude=a.longitude,this.poi=a.poi,this.content=a.content,this.extra=a.extra,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.obtain=function(a,c,d,e){return new b({latitude:a,longitude:c,poi:d,content:e,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.LocationMessage=h;var i=function(){function b(a){if(this.messageName="RichContentMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> RichContentMessage.");this.title=a.title,this.content=a.content,this.imageUri=a.imageUri,this.extra=a.extra,this.url=a.url,a.user&&(this.user=a.user)}return b.obtain=function(a,c,d,e){return new b({title:a,content:c,imageUri:d,url:e,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.RichContentMessage=i;var j=function(){function a(a){this.messageName="JrmfRedPacketMessage",a&&(this.message=a)}return a.prototype.encode=function(){return""},a}();a.JrmfRedPacketMessage=j;var k=function(){function a(a){this.messageName="JrmfRedPacketOpenedMessage",a&&(this.message=a)}return a.prototype.encode=function(){return""},a}();a.JrmfRedPacketOpenedMessage=k;var l=function(){function a(a){if(this.messageName="UnknownMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> UnknownMessage.");this.message=a}return a.prototype.encode=function(){return""},a}();a.UnknownMessage=l;var m=function(){function b(a){if(this.messageName="PublicServiceCommandMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> PublicServiceCommandMessage.");this.content=a.content,this.extra=a.extra,this.menuItem=a.menuItem,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.obtain=function(a){return new b({content:"",command:"",menuItem:a,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.PublicServiceCommandMessage=m;var n=function(){function a(a){this.messageName="PublicServiceMultiRichContentMessage",this.richContentMessages=a}return a.prototype.encode=function(){return null},a}();a.PublicServiceMultiRichContentMessage=n;var o=function(){function b(a){this.messageName="SyncReadStatusMessage",a.lastMessageSendTime&&(this.lastMessageSendTime=a.lastMessageSendTime)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.SyncReadStatusMessage=o;var p=function(){function b(a){this.messageName="ReadReceiptRequestMessage",a.messageUId&&(this.messageUId=a.messageUId)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ReadReceiptRequestMessage=p;var q=function(){function b(a){this.messageName="ReadReceiptResponseMessage",a.receiptMessageDic&&(this.receiptMessageDic=a.receiptMessageDic)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ReadReceiptResponseMessage=q;var r=function(){function b(a){this.messageName="PublicServiceRichContentMessage",this.richContentMessage=a}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.PublicServiceRichContentMessage=r;var s=function(){function b(a){this.messageName="FileMessage",a.name&&(this.name=a.name),a.size&&(this.size=a.size),a.type&&(this.type=a.type),a.fileUrl&&(this.fileUrl=a.fileUrl),a.extra&&(this.extra=a.extra),a.user&&(this.user=a.user)}return b.obtain=function(a){return new b({name:a.name,size:a.size,type:a.type,fileUrl:a.fileUrl})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.FileMessage=s;var t=function(){function b(a){this.messageName="AcceptMessage",this.mediaId=a.mediaId,this.callId=a.callId,this.mediaType=a.mediaType,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.AcceptMessage=t;var u=function(){function b(a){this.messageName="RingingMessage",this.callId=a.callId}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.RingingMessage=u;var v=function(){function b(a){this.messageName="SummaryMessage",this.caller=a.caller,this.inviter=a.inviter,this.mediaType=a.mediaType,this.memberIdList=a.memberIdList,this.startTime=a.startTime,this.connectedTime=a.connectedTime,this.duration=a.duration,this.status=a.status}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.SummaryMessage=v;var w=function(){function b(a){this.messageName="HungupMessage",this.callId=a.callId,this.reason=a.reason,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.HungupMessage=w;var x=function(){function b(a){this.messageName="InviteMessage",this.mediaId=a.mediaId,this.callId=a.callId,this.engineType=a.engineType,this.channelInfo=a.channelInfo,this.mediaType=a.mediaType,this.extra=a.extra,this.inviteUserIds=a.inviteUserIds,this.observerUserIds=a.observerUserIds,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.InviteMessage=x;var y=function(){function b(a){this.messageName="MediaModifyMessage",this.callId=a.callId,this.mediaType=a.mediaType,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.MediaModifyMessage=y;var z=function(){function b(a){this.messageName="MemberModifyMessage",this.modifyMemType=a.modifyMemType,this.callId=a.callId,this.caller=a.caller,this.engineType=a.engineType,this.channelInfo=a.channelInfo,this.mediaType=a.mediaType,this.extra=a.extra,this.inviteUserIds=a.inviteUserIds,this.existedMemberStatusList=a.existedMemberStatusList,this.existedUserPofiles=a.existedUserPofiles,this.observerUserIds=a.observerUserIds,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.MemberModifyMessage=z}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(a,b){this.Id=a,this.Key=b}return a}();a.ChannelInfo=b;var c=function(){function a(a,b,c){this.platform=a,this.online=b,this.status=c}return a}();a.UserStatus=c;var d=function(){function a(a,b,c){}return a}();a.MentionedInfo=d;var e=function(){function a(a,b,c){this.msgId=a,this.msgDataTime=b,this.direct=c}return a}();a.DeleteMessage=e;var f=function(){function a(a,b,c){}return a}();a.CustomServiceConfig=f;var g=function(){function a(a,b,c,d,e,f,g){}return a}();a.CustomServiceSession=g;var h=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){this.conversationTitle=a,this.conversationType=b,this.draft=c,this.isTop=d,this.latestMessage=e,this.latestMessageId=f,this.notificationStatus=g,this.objectName=h,this.receivedStatus=i,this.receivedTime=j,this.senderUserId=k,this.senderUserName=l,this.sentStatus=m,this.sentTime=n,this.targetId=o,this.unreadMessageCount=p,this.senderPortraitUri=q,this.isHidden=r,this.mentionedMsg=s,this.hasUnreadMention=t,this._readTime=u}return b.prototype.setTop=function(){a.RongIMClient._dataAccessProvider.addConversation(this,{onSuccess:function(a){}})},b}();a.Conversation=h;var i=function(){function a(a,b,c,d,e){this.creatorId=a,this.id=b,this.memberIdList=c,this.name=d,this.isOpen=e}return a}();a.Discussion=i;var j=function(){function a(a,b,c){this.id=a,this.name=b,this.portraitUri=c}return a}();a.Group=j;var k=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.content=a,this.conversationType=b,this.extra=c,this.objectName=d,this.messageDirection=e,this.messageId=f,this.receivedStatus=g,this.receivedTime=h,this.senderUserId=i,this.sentStatus=j,this.sentTime=k,this.targetId=l,this.messageType=m,this.messageUId=n,this.isLocalMessage=o,this.offLineMessage=p,this.receiptResponse=q}return a}();a.Message=k;var l=function(){function a(a,b){this.isCounted=a,this.isPersited=b}return a.prototype.getMessageTag=function(){return this.isCounted&&this.isPersited?3:this.isCounted?2:this.isPersited?1:this.isCounted||this.isPersited?void 0:0},a.getTagByStatus=function(a){var b={3:{isCounted:!0,isPersited:!0},2:{isCounted:!0,isPersited:!1},1:{isCounted:!0,isPersited:!0},0:{isCounted:!0,isPersited:!0}};return b[a]||b[3]},a}();a.MessageTag=l;var m=function(){function a(a,b,c,d,e){this.id=a,this.name=b,this.type=c,this.sunMenuItems=d,this.url=e}return a}();a.PublicServiceMenuItem=m;var n=function(){function a(a,b,c,d,e,f,g,h){this.conversationType=a,this.introduction=b,this.menu=c,this.name=d,this.portraitUri=e,this.publicServiceId=f,this.hasFollowed=g,this.isGlobal=h}return a}();a.PublicServiceProfile=n;var o=function(){function a(a,b,c){this.id=a,this.name=b,this.portraitUri=c}return a}();a.UserInfo=o;var p=function(){function a(a,b){this.id=a,this.token=b}return a}();a.User=p;var q=function(){function a(a,b){this.id=a,this.user=b}return a}();a.Room=q}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(){this.userStatusListener=null}return b.prototype.init=function(b,c){new a.FeatureDectector(c.appCallback)},b.prototype.connect=function(b,c,d,e){a.RongIMClient.bridge=a.Bridge.getInstance(),a.RongIMClient._memoryStore.token=b,a.RongIMClient._memoryStore.callback=c,d=d||"",e=e||{};var f=!1,g=!1;if(a.Bridge._client&&a.Bridge._client.channel&&(f=a.Bridge._client.channel.connectionStatus==a.ConnectionStatus.CONNECTING,g=a.Bridge._client.channel.connectionStatus==a.ConnectionStatus.CONNECTED),!g&&!f){if(a.RongIMClient.otherDeviceLoginCount>5)return void c.onError(a.ConnectionStatus.ULTRALIMIT);e.force&&a.RongIMClient._storageProvider.removeItem("servers");for(var h=0,i=a.RongIMClient._memoryStore.listenerList.length;h<i;h++)a.RongIMClient.bridge.setListener(a.RongIMClient._memoryStore.listenerList[h]);a.RongIMClient._memoryStore.listenerList.length=0,a.RongIMClient.bridge.connect(a.RongIMClient._memoryStore.appKey,b,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(b){b!=a.ConnectionState.TOKEN_INCORRECT&&b?setTimeout(function(){c.onError(b)}):setTimeout(function(){c.onTokenIncorrect()})}})}},b.prototype.reconnect=function(b,c){var d=a.RongIMClient._memoryStore,e=d.token;if(!e)throw new Error("reconnect: token is empty.");if(a.Bridge._client&&a.Bridge._client.channel&&a.Bridge._client.channel.connectionStatus!=a.ConnectionStatus.CONNECTED&&a.Bridge._client.channel.connectionStatus!=a.ConnectionStatus.CONNECTING){c=c||{};var f=c.auto?"auto":"custom";({auto:function(){var d=function(b){var c=b.step(),d=b.url,e=function(){a.RongUtil.request({url:d,success:function(){b.done()},error:function(){f()}})},f=function(){var d=c();if("done"==d){var f=a.ConnectionStatus.NETWORK_UNAVAILABLE;return void b.done(f)}setTimeout(e,d)};f()},f=a.RongIMClient._memoryStore.depend.protocol,g=c.url||"cdn.ronghub.com/RongIMLib-2.2.6.min.js",h={protocol:f,path:g};g=a.RongUtil.formatProtoclPath(h);var i=c.rate||[100,1e3,3e3,6e3,1e4,18e3];i.push("done"),d({url:g,step:function(){var a=0;return function(){var b=i[a];return a++,b}},done:function(c){if(c)return void b.onError(c);a.RongIMClient.connect(e,b)}})},custom:function(){a.RongIMClient.connect(e,b)}})[f]()}},b.prototype.logout=function(){a.RongIMClient.bridge.disconnect(),a.RongIMClient.bridge=null},b.prototype.disconnect=function(){a.RongIMClient.bridge.disconnect()},b.prototype.sendReceiptResponse=function(b,c,d){var e=a.Bridge._client.userId+b+c+"RECEIVED",f=this;if(a.RongUtil.supportLocalStorage()){var g=JSON.parse(a.RongIMClient._storageProvider.getItem(e));if(g){var h=[];for(var i in g){var j={};j[i]=g[i].uIds,g[i].isResponse||h.push(j)}if(0==h.length)return void d.onSuccess();var k=setInterval(function(){1==h.length&&clearInterval(k);var i=h.splice(0,1)[0],j=new a.ReadReceiptResponseMessage({receiptMessageDic:i});f.sendMessage(b,c,j,{onSuccess:function(b){var c=a.MessageUtil.getFirstKey(i);g[c].isResponse=!0,a.RongIMClient._storageProvider.setItem(e,JSON.stringify(g)),d.onSuccess(b)},onError:function(a,b){d.onError(a,b)}})},200)}else d.onSuccess()}else d.onSuccess()},b.prototype.sendTypingStatusMessage=function(b,c,d,e){var f=this;d in a.RongIMClient.MessageParams&&f.sendMessage(b,c,a.TypingStatusMessage.obtain(a.RongIMClient.MessageParams[d].objectName,""),{onSuccess:function(){setTimeout(function(){e.onSuccess()})},onError:function(a){setTimeout(function(){e.onError(a,null)})},onBefore:function(){}})},b.prototype.sendRecallMessage=function(b,c){var d=new a.RecallCommandMessage({conversationType:b.conversationType,targetId:b.targetId,sentTime:b.sentTime,messageUId:b.messageUId,extra:b.extra,user:b.user});this.sendMessage(b.conversationType,b.senderUserId,d,c,!1,null,null,2)},b.prototype.sendTextMessage=function(b,c,d,e){var f=a.TextMessage.obtain(d);this.sendMessage(b,c,f,e)},b.prototype.getRemoteHistoryMessages=function(b,c,d,e,f,g){if(e<=1)throw new Error("the count must be greater than 1.");g=g||{};var h=g.order||0,i=function(){return[b,c,"_",h].join("")},j=i();a.RongUtil.isNumber(d)||(d=a.RongIMClient._memoryStore.lastReadTime.get(j));var k=a.RongIMClient._memoryStore,l=k.historyMessageLimit,m=l.get(j)||{},n=m.hasMore;if(!n&&m.time==d&&0==h)return f.onSuccess([],n);var o=new a.RongIMClient.Protobuf.HistoryMsgInput;o.setTargetId(c),o.setTime(d),o.setCount(e),o.setOrder(h),a.RongIMClient.bridge.queryMsg(HistoryMsgType[b],a.MessageUtil.ArrayForm(o.toArrayBuffer()),c,{onSuccess:function(b){var d=a.MessageUtil.int64ToTimestamp(b.syncTime);a.RongIMClient._memoryStore.lastReadTime.set(j,d),l.set(j,{hasMore:!!b.hasMsg,time:d});var e,g=b.list.reverse(),h=null,i=a.SentStatus.READ;if(a.RongUtil.supportLocalStorage())for(var k=0,m=g.length;k<m;k++)h=a.MessageUtil.messageParser(g[k]),e=JSON.parse(a.RongIMClient._storageProvider.getItem(a.Bridge._client.userId+h.messageUId+"SENT")),e&&(h.receiptResponse||(h.receiptResponse={}),h.receiptResponse[h.messageUId]=e.count),h.sentStatus=i,h.targetId=c,g[k]=h;else for(var k=0,m=g.length;k<m;k++){var h=a.MessageUtil.messageParser(g[k]);h.sentStatus=i,g[k]=h}setTimeout(function(){f.onSuccess(g,!!b.hasMsg)})},onError:function(a){setTimeout(function(){f.onError(a)})}},"HistoryMessagesOuput")},b.prototype.hasRemoteUnreadMessages=function(b,c){var d=null;window.RCCallback=function(a){setTimeout(function(){c.onSuccess(!!+a.status)}),d.parentNode.removeChild(d)},d=document.createElement("script"),d.src=a.RongIMClient._memoryStore.depend.api+"/message/exist.js?appKey="+encodeURIComponent(a.RongIMClient._memoryStore.appKey)+"&token="+encodeURIComponent(b)+"&callBack=RCCallback&_="+a.RongUtil.getTimestamp(),document.body.appendChild(d),d.onerror=function(){setTimeout(function(){c.onError(a.ErrorCode.UNKNOWN)}),d.parentNode.removeChild(d)}},b.prototype.getRemoteConversationList=function(b,c,d){var e=new a.RongIMClient.Protobuf.RelationsInput,f=this;e.setType(1),void 0===d?e.setCount(0):e.setCount(d),a.RongIMClient.bridge.queryMsg(26,a.MessageUtil.ArrayForm(e.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(d){if(d.info){d.info=d.info.reverse();for(var e=0,g=d.info.length;e<g;e++)a.RongIMClient.getInstance().pottingConversation(d.info[e])}var h=a.RongIMClient._memoryStore.conversationList;setTimeout(function(){if(c)return b.onSuccess(f.filterConversations(c,h));b.onSuccess(h)})},onError:function(a){b.onError(a)}},"RelationsOutput")},b.prototype.addMemberToDiscussion=function(b,c,d){var e=new a.RongIMClient.Protobuf.ChannelInvitationInput;e.setUsers(c),a.RongIMClient.bridge.queryMsg(0,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){d.onSuccess()})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.createDiscussion=function(b,c,d){var e=new a.RongIMClient.Protobuf.CreateDiscussionInput,f=this;e.setName(b),a.RongIMClient.bridge.queryMsg(1,a.MessageUtil.ArrayForm(e.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){c.length>0&&f.addMemberToDiscussion(a,c,{onSuccess:function(){},onError:function(a){setTimeout(function(){d.onError(a)})}}),setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){d.onError(a)})}},"CreateDiscussionOutput")},b.prototype.getDiscussion=function(b,c){var d=new a.RongIMClient.Protobuf.ChannelInfoInput;d.setNothing(1),a.RongIMClient.bridge.queryMsg(4,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){c.onError(a)})}},"ChannelInfoOutput")},b.prototype.quitDiscussion=function(b,c){var d=new a.RongIMClient.Protobuf.LeaveChannelInput;d.setNothing(1),a.RongIMClient.bridge.queryMsg(7,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){c.onSuccess()})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.removeMemberFromDiscussion=function(b,c,d){var e=new a.RongIMClient.Protobuf.ChannelEvictionInput;e.setUser(c),a.RongIMClient.bridge.queryMsg(9,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){d.onSuccess()})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.setDiscussionInviteStatus=function(b,c,d){var e=new a.RongIMClient.Protobuf.ModifyPermissionInput;e.setOpenStatus(c.valueOf()),a.RongIMClient.bridge.queryMsg(11,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(a){setTimeout(function(){d.onSuccess()})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.setDiscussionName=function(b,c,d){var e=new a.RongIMClient.Protobuf.RenameChannelInput;e.setName(c),a.RongIMClient.bridge.queryMsg(12,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){d.onSuccess()})},onError:function(a){d.onError(a)}})},b.prototype.joinChatRoom=function(b,c,d){var e=new a.RongIMClient.Protobuf.ChrmInput;e.setNothing(1),a.Bridge._client.chatroomId=b,a.RongIMClient.bridge.queryMsg(19,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){d.onSuccess()});var e=new a.RongIMClient.Protobuf.ChrmPullMsg;0==c&&(c=-1),e.setCount(c),e.setSyncTime(0),a.Bridge._client.queryMessage("chrmPull",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,1,{onSuccess:function(c){var d=c.list,e=a.MessageUtil.int64ToTimestamp(c.syncTime),f=d[d.length-1];f&&(f=a.MessageUtil.messageParser(f),e=f.sentTime),a.RongIMClient._memoryStore.lastReadTime.set(b+a.Bridge._client.userId+"CST",e);for(var g=a.Bridge._client,h=0,i=d.length;h<i;h++){var j="R"+d[h].msgId;if(!(j in g.cacheMessageIds)){g.cacheMessageIds[j]=!0;var k=a.RongUtil.keys(g.cacheMessageIds);if(k.length>10&&(j=k[0],delete g.cacheMessageIds[j]),a.RongIMClient._memoryStore.filterMessages.length>0)for(var l=0,m=a.RongIMClient._memoryStore.filterMessages.length;l<m;l++)a.RongIMClient.MessageParams[a.RongIMClient._memoryStore.filterMessages[l]].objectName!=d[h].classname&&g.handler.onReceived(d[h]);else g.handler.onReceived(d[h])}}},onError:function(b){setTimeout(function(){d.onError(a.ErrorCode.CHATROOM_HISMESSAGE_ERROR)})}},"DownStreamMessages")},onError:function(a){setTimeout(function(){d.onError(a)})}},"ChrmOutput")},b.prototype.getChatRoomInfo=function(b,c,d,e){var f=new a.RongIMClient.Protobuf.QueryChatroomInfoInput;f.setCount(c),f.setOrder(d),a.RongIMClient.bridge.queryMsg("queryChrmI",a.MessageUtil.ArrayForm(f.toArrayBuffer()),b,{onSuccess:function(b){b.userInfos.forEach(function(b){b.time=a.MessageUtil.int64ToTimestamp(b.time)}),setTimeout(function(){e.onSuccess(b)})},onError:function(a){setTimeout(function(){e.onError(a)})}},"QueryChatroomInfoOutput")},b.prototype.quitChatRoom=function(b,c){var d=new a.RongIMClient.Protobuf.ChrmInput;d.setNothing(1),a.RongIMClient.bridge.queryMsg(17,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){c.onSuccess()})},onError:function(a){setTimeout(function(){c.onError(a)})}},"ChrmOutput")},b.prototype.setChatroomHisMessageTimestamp=function(b,c){a.RongIMClient._memoryStore.lastReadTime.set("chrhis_"+b,c)},
b.prototype.getChatRoomHistoryMessages=function(b,c,d,e){var f=new a.RongIMClient.Protobuf.HistoryMsgInput;f.setTargetId(b);var g=a.RongIMClient._memoryStore.lastReadTime.get("chrhis_"+b)||0;f.setTime(g),f.setCount(c),f.setOrder(d),a.RongIMClient.bridge.queryMsg(34,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(c){a.RongIMClient._memoryStore.lastReadTime.set("chrhis_"+b,a.MessageUtil.int64ToTimestamp(c.syncTime));for(var d=c.list.reverse(),f=0,g=d.length;f<g;f++)d[f]=a.MessageUtil.messageParser(d[f]);setTimeout(function(){e.onSuccess(d,!!c.hasMsg)})},onError:function(a){setTimeout(function(){e.onError(a)})}},"HistoryMsgOuput")},b.prototype.setMessageStatus=function(a,b,c,d,e){setTimeout(function(){e.onSuccess(!0)})},b.prototype.addToBlacklist=function(b,c){var d=new a.RongIMClient.Protobuf.Add2BlackListInput;d.setUserId(b),a.RongIMClient.bridge.queryMsg(21,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){c.onSuccess()})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.getBlacklist=function(b){var c=new a.RongIMClient.Protobuf.QueryBlackListInput;c.setNothing(1),a.RongIMClient.bridge.queryMsg(23,a.MessageUtil.ArrayForm(c.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){b.onSuccess(a)})},onError:function(a){setTimeout(function(){b.onError(a)})}},"QueryBlackListOutput")},b.prototype.getBlacklistStatus=function(b,c){var d=new a.RongIMClient.Protobuf.BlackListStatusInput;d.setUserId(b),a.RongIMClient.bridge.queryMsg(24,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(b){setTimeout(function(){c.onSuccess(a.BlacklistStatus[b])})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.removeFromBlacklist=function(b,c){var d=new a.RongIMClient.Protobuf.RemoveFromBlackListInput;d.setUserId(b),a.RongIMClient.bridge.queryMsg(22,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){c.onSuccess()})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.getFileToken=function(b,c){if(!/(1|2|3|4)/.test(b.toString()))return void setTimeout(function(){c.onError(a.ErrorCode.QNTKN_FILETYPE_ERROR)});var d=new a.RongIMClient.Protobuf.GetQNupTokenInput;d.setType(b),a.RongIMClient.bridge.queryMsg(30,a.MessageUtil.ArrayForm(d.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){c.onError(a)})}},"GetQNupTokenOutput")},b.prototype.getFileUrl=function(b,c,d,e){if(!/(1|2|3|4)/.test(b.toString()))return void setTimeout(function(){e.onError(a.ErrorCode.QNTKN_FILETYPE_ERROR)});var f=new a.RongIMClient.Protobuf.GetQNdownloadUrlInput;f.setType(b),f.setKey(c),d&&f.setFileName(d),a.RongIMClient.bridge.queryMsg(31,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){e.onSuccess(a)})},onError:function(a){setTimeout(function(){e.onError(a)})}},"GetQNdownloadUrlOutput")},b.prototype.sendMessage=function(b,c,d,e,f,g,h,i,j){if(!a.Bridge._client.channel)return void setTimeout(function(){e.onError(a.ErrorCode.RC_NET_UNAVAILABLE,null)});if(!a.Bridge._client.channel.socket.socket.connected)throw setTimeout(function(){e.onError(a.ErrorCode.TIMEOUT,null)}),new Error("connect is timeout! postion:sendMessage");var k=b==a.ConversationType.DISCUSSION||b==a.ConversationType.GROUP,l=new a.RongIMClient.Protobuf.UpStreamMessage;if(f&&k?l.setSessionId(7):l.setSessionId(a.RongIMClient.MessageParams[d.messageName].msgTag.getMessageTag()),g&&l.setPushText(g),h&&l.setAppData(h),k&&d.messageName==a.RongIMClient.MessageType.ReadReceiptResponseMessage){var m=d;if(m.receiptMessageDic){var n=[];for(var o in m.receiptMessageDic)n.push(o);l.setUserId(n)}}k&&d.messageName==a.RongIMClient.MessageType.SyncReadStatusMessage&&l.setUserId(a.Bridge._client.userId),j=j||{};var p=j.userIds;k&&p&&l.setUserId(p),l.setClassname(a.RongIMClient.MessageParams[d.messageName].objectName),l.setContent(d.encode());var q=l.toArrayBuffer();"[object ArrayBuffer]"==Object.prototype.toString.call(q)&&(q=[].slice.call(new Int8Array(q)));var r=this,s=new a.Message,t=this.getConversation(b,c);3==a.RongIMClient.MessageParams[d.messageName].msgTag.getMessageTag()&&(t||(t=a.RongIMClient.getInstance().createConversation(b,c,"")),t.sentTime=(new Date).getTime(),t.sentStatus=a.SentStatus.SENDING,t.senderUserName="",t.senderUserId=a.Bridge._client.userId,t.notificationStatus=a.ConversationNotificationStatus.DO_NOT_DISTURB,t.latestMessage=s,t.unreadMessageCount=0,a.RongIMClient._dataAccessProvider.addConversation(t,{onSuccess:function(a){}})),a.RongIMClient._memoryStore.converStore=t,s.content=d,s.conversationType=b,s.senderUserId=a.Bridge._client.userId,s.objectName=a.RongIMClient.MessageParams[d.messageName].objectName,s.targetId=c,s.sentTime=(new Date).getTime(),s.messageDirection=a.MessageDirection.SEND,s.sentStatus=a.SentStatus.SENT,s.messageType=d.messageName,a.RongIMClient.bridge.pubMsg(b.valueOf(),q,c,{onSuccess:function(f){if(f&&f.timestamp&&a.RongIMClient._memoryStore.lastReadTime.set("converST_"+a.Bridge._client.userId+b+c,f.timestamp),(b==a.ConversationType.DISCUSSION||b==a.ConversationType.GROUP)&&d.messageName==a.RongIMClient.MessageType.ReadReceiptRequestMessage){var g=s.content,h=a.Bridge._client.userId+g.messageUId+"SENT";a.RongIMClient._storageProvider.setItem(h,JSON.stringify({count:0,dealtime:f.timestamp,userIds:{}}))}if(3==a.RongIMClient.MessageParams[s.messageType].msgTag.getMessageTag()){var i=a.RongIMClient._memoryStore.converStore;i.sentStatus=s.sentStatus,i.latestMessage=s,r.updateConversation(i),a.RongIMClient._dataAccessProvider.addMessage(b,c,s,{onSuccess:function(b){s=b,s.messageUId=f.messageUId,s.sentTime=f.timestamp,s.sentStatus=a.SentStatus.SENT,s.messageId=f.messageId,a.RongIMClient._dataAccessProvider.updateMessage(s)},onError:function(){}})}setTimeout(function(){i&&r.updateConversation(i),s.sentTime=f.timestamp,s.messageUId=f.messageUId,e.onSuccess(s)})},onError:function(d,f){s.sentStatus=a.SentStatus.FAILED,f&&(s.messageUId=f.messageUId,s.sentTime=f.sentTime),3==a.RongIMClient.MessageParams[s.messageType].msgTag.getMessageTag()&&(a.RongIMClient._memoryStore.converStore.latestMessage=s),a.RongIMClient._dataAccessProvider.addMessage(b,c,s,{onSuccess:function(b){s.messageId=b.messageId,a.RongIMClient._dataAccessProvider.updateMessage(s)},onError:function(){}}),setTimeout(function(){e.onError(d,s)})}},null,i),e.onBefore&&e.onBefore(a.MessageIdHandler.messageId),s.messageId=a.MessageIdHandler.messageId+""},b.prototype.setConnectionStatusListener=function(b){var c={onChanged:function(c){b.onChanged(c),a.RongUtil.forEach(a.RongIMClient.statusListeners,function(a){a(c)})}};a.RongIMClient.bridge?a.RongIMClient.bridge.setListener(c):a.RongIMClient._memoryStore.listenerList.push(c)},b.prototype.setOnReceiveMessageListener=function(b){a.RongIMClient.bridge?a.RongIMClient.bridge.setListener(b):a.RongIMClient._memoryStore.listenerList.push(b)},b.prototype.registerMessageType=function(b,c,d,e,f){if(!b)throw new Error("messageType can't be empty,postion -> registerMessageType");if(!c)throw new Error("objectName can't be empty,postion -> registerMessageType");if("[object Array]"==Object.prototype.toString.call(e)){var g=a.ModelUtil.modleCreate(e,b);a.RongIMClient.RegisterMessage[b]=g}else{if("[object Function]"!=Object.prototype.toString.call(e)&&"[object Object]"!=Object.prototype.toString.call(e))throw new Error("The index of 3 parameter was wrong type  must be object or function or array-> registerMessageType");if(!e.encode)throw new Error("encode method has not realized or messageName is undefined-> registerMessageType");if(!e.decode)throw new Error("decode method has not realized -> registerMessageType")}registerMessageTypeMapping[c]=b},b.prototype.registerMessageTypes=function(b){var c=[],d=function(a){var b=[];for(var c in a)b.push(c);return b};for(var e in b){var f=b[e],g=f.proto,h=d(g),i=f.flag||3,j=a.MessageTag.getTagByStatus(i);i=new a.MessageTag(j.isCounted,j.isPersited),c.push({type:e,name:f.name,flag:i,protos:h})}for(var k=function(b){var c=b.type,d=b.name,e=b.flag,f=b.protos;a.RongIMClient.registerMessageType(c,d,e,f)},l=0,m=c.length;l<m;l++){var f=c[l];k(f)}},b.prototype.addConversation=function(b,c){for(var d=!0,e=0,f=a.RongIMClient._memoryStore.conversationList.length;e<f;e++)if(a.RongIMClient._memoryStore.conversationList[e].conversationType===b.conversationType&&a.RongIMClient._memoryStore.conversationList[e].targetId===b.targetId){a.RongIMClient._memoryStore.conversationList.unshift(a.RongIMClient._memoryStore.conversationList.splice(e,1)[0]),d=!1;break}d&&a.RongIMClient._memoryStore.conversationList.unshift(b),c&&c.onSuccess(!0)},b.prototype.updateConversation=function(b){for(var c,d=0,e=a.RongIMClient._memoryStore.conversationList.length;d<e;d++){var f=a.RongIMClient._memoryStore.conversationList[d];if(b.conversationType===f.conversationType&&b.targetId===f.targetId){b.conversationTitle&&(f.conversationTitle=b.conversationTitle),b.senderUserName&&(f.senderUserName=b.senderUserName),b.senderPortraitUri&&(f.senderPortraitUri=b.senderPortraitUri),b.latestMessage&&(f.latestMessage=b.latestMessage),b.sentStatus&&(f.sentStatus=b.sentStatus);break}}return c},b.prototype.removeConversation=function(b,c,d){var e=new a.RongIMClient.Protobuf.RelationsInput;e.setType(b),a.RongIMClient.bridge.queryMsg(27,a.MessageUtil.ArrayForm(e.toArrayBuffer()),c,{onSuccess:function(){for(var e=a.RongIMClient._memoryStore.conversationList,f=e.length,g=0;g<f;g++)if(e[g].conversationType==b&&c==e[g].targetId){e.splice(g,1);break}d.onSuccess(!0)},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.getMessage=function(b,c){c.onSuccess(new a.Message)},b.prototype.addMessage=function(a,b,c,d){d&&d.onSuccess(c)},b.prototype.removeMessage=function(b,c,d,e){a.RongIMClient.getInstance().deleteRemoteMessages(b,c,d,e)},b.prototype.removeLocalMessage=function(a,b,c,d){d.onSuccess(!0)},b.prototype.updateMessage=function(a,b){b&&b.onSuccess(a)},b.prototype.clearRemoteHistoryMessages=function(b,c){var d=new a.RongIMClient.Protobuf.CleanHisMsgInput,e=b.conversationType,f={1:"cleanPMsg",2:"cleanDMsg",3:"cleanGMsg",5:"cleanCMsg",6:"cleanSMsg"},g=f[e];if(!g)return void c.onError(a.ErrorCode.CLEAR_HIS_TYPE_ERROR);var h=b.timestamp;if("number"!=typeof h)return void c.onError(a.ErrorCode.CLEAR_HIS_TIME_ERROR);d.setDataTime(h);var i=b.targetId;d.setTargetId(i),a.RongIMClient.bridge.queryMsg(g,a.MessageUtil.ArrayForm(d.toArrayBuffer()),i,{onSuccess:function(a){c.onSuccess(!a)},onError:function(b){1==b&&(b=a.ErrorCode.CLEAR_HIS_ERROR),setTimeout(function(){c.onError(b)})}})},b.prototype.clearHistoryMessages=function(a,b){this.clearRemoteHistoryMessages(a,b)},b.prototype.clearMessages=function(a,b,c){},b.prototype.updateMessages=function(b,c,d,e,f){var g=this;"readStatus"==d&&a.RongIMClient._memoryStore.conversationList.length>0&&g.getConversationList({onSuccess:function(a){Array.forEach(a,function(a){a.conversationType==b&&a.targetId==c&&(a.unreadMessageCount=0)})},onError:function(a){setTimeout(function(){f.onError(a)})}},null),setTimeout(function(){f.onSuccess(!0)})},b.prototype.getConversation=function(b,c,d){for(var e=null,f=0,g=a.RongIMClient._memoryStore.conversationList.length;f<g;f++)if(a.RongIMClient._memoryStore.conversationList[f].conversationType==b&&a.RongIMClient._memoryStore.conversationList[f].targetId==c&&(e=a.RongIMClient._memoryStore.conversationList[f],a.RongUtil.supportLocalStorage())){var h=a.RongIMClient._storageProvider.getItem("cu"+a.Bridge._client.userId+b+c);0==e.unreadMessageCount&&(e.unreadMessageCount=Number(h))}return setTimeout(function(){d&&d.onSuccess(e)}),e},b.prototype.filterConversations=function(b,c){var d=[];return a.RongUtil.forEach(b,function(b){a.RongUtil.forEach(c,function(a){a.conversationType==b&&d.push(a)})}),d},b.prototype.getConversationList=function(b,c,d,e){var f=this,g=a.RongIMClient._memoryStore.isSyncRemoteConverList,h=a.RongIMClient._memoryStore.conversationList,i=h.length>d;if(!g&&i)return void setTimeout(function(){var a=h.slice(0,d);c&&(a=f.filterConversations(c,a)),b.onSuccess(a)});a.RongIMClient.getInstance().getRemoteConversationList({onSuccess:function(c){a.RongUtil.supportLocalStorage()&&Array.forEach(a.RongIMClient._memoryStore.conversationList,function(b){var c=a.RongIMClient._storageProvider.getItem("cu"+a.Bridge._client.userId+b.conversationType+b.targetId);0==b.unreadMessageCount&&(b.unreadMessageCount=Number(c))}),a.RongIMClient._memoryStore.isSyncRemoteConverList=!1,setTimeout(function(){b.onSuccess(c)})},onError:function(a){setTimeout(function(){b.onError(a)})}},c,d,e)},b.prototype.clearCache=function(){var b=a.RongIMClient._memoryStore||{};b.conversationList=[],b.isSyncRemoteConverList=!0},b.prototype.clearConversations=function(b,c){Array.forEach(b,function(b){Array.forEach(a.RongIMClient._memoryStore.conversationList,function(c){b==c.conversationType&&a.RongIMClient.getInstance().removeConversation(c.conversationType,c.targetId,{onSuccess:function(){},onError:function(){}})})}),setTimeout(function(){c.onSuccess(!0)})},b.prototype.setMessageContent=function(a,b,c){},b.prototype.getHistoryMessages=function(b,c,d,e,f,g,h){var i={objectname:g,order:h};a.RongIMClient.getInstance().getRemoteHistoryMessages(b,c,d,e,f,i)},b.prototype.getTotalUnreadCount=function(b,c){var d=0,e=a.RongIMClient._storageProvider;if(c)a.RongUtil.forEach(c,function(b){var c=e.getItemKeyList("cu"+a.Bridge._client.userId+b);a.RongUtil.forEach(c,function(a){var b=e.getItem(a),c=Number(b)||0;d+=c})});else{var f=e.getItemKeyList("cu"+a.Bridge._client.userId);a.RongUtil.forEach(f,function(a){var b=e.getItem(a),c=Number(b)||0;d+=c})}b.onSuccess(d)},b.prototype.getConversationUnreadCount=function(b,c){var d=0;Array.forEach(b,function(b){Array.forEach(a.RongIMClient._memoryStore.conversationList,function(a){a.conversationType==b&&(d+=a.unreadMessageCount)})}),setTimeout(function(){c.onSuccess(d)})},b.prototype.setUnreadCount=function(b,c,d){var e=a.RongIMClient._storageProvider,f="cu"+a.Bridge._client.userId+b+c;e.setItem(f,d)},b.prototype.getUnreadCount=function(b,c,d){var e="cu"+a.Bridge._client.userId+b+c,f=a.RongIMClient._storageProvider.getItem(e),g=Number(f);setTimeout(function(){d.onSuccess(g||0)})},b.prototype.cleanMentioneds=function(b){if(b){b.mentionedMsg=null;var c=b.targetId,d=b.conversationType,e=a.RongIMClient._storageProvider.getItem("mentioneds_"+a.Bridge._client.userId+"_"+d+"_"+c);if(e){var f=JSON.parse(e);delete f[d+"_"+c],a.MessageUtil.isEmpty(f)?a.RongIMClient._storageProvider.removeItem("mentioneds_"+a.Bridge._client.userId+"_"+d+"_"+c):a.RongIMClient._storageProvider.setItem("mentioneds_"+a.Bridge._client.userId+"_"+d+"_"+c,JSON.stringify(f))}}},b.prototype.clearUnreadCountByTimestamp=function(a,b,c,d){setTimeout(function(){d.onSuccess(!0)})},b.prototype.clearUnreadCount=function(b,c,d){var e=this;a.RongIMClient._storageProvider.removeItem("cu"+a.Bridge._client.userId+b+c),this.getConversation(b,c,{onSuccess:function(a){a&&(a.unreadMessageCount=0,e.cleanMentioneds(a)),setTimeout(function(){d.onSuccess(!0)})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.clearTotalUnreadCount=function(b){var c=a.RongIMClient._memoryStore.conversationList,d=this;if(c)for(var e=0;e<c.length;e++){var f=c[e];f&&(f.unreadMessageCount=0,d.cleanMentioneds(f))}var g=a.RongIMClient._storageProvider.getItemKeyList("cu"+a.Bridge._client.userId);a.RongUtil.forEach(g,function(b){a.RongIMClient._storageProvider.removeItem(b)}),setTimeout(function(){b.onSuccess(!0)})},b.prototype.setConversationToTop=function(a,b,c,d){var e=this;this.getConversation(a,b,{onSuccess:function(a){a.isTop=c,e.addConversation(a,d),setTimeout(function(){d.onSuccess(!0)})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.getConversationNotificationStatus=function(b,c){var d=b.targetId,e=b.conversationType,f=a.RongIMClient._memoryStore.notification,g=function(){return e+"_"+d},h=g(),i=f[h];if("number"==typeof i)return void c.onSuccess(i);var j={1:"qryPPush",3:"qryDPush"},k=j[e];if(!k){return void c.onError(8001)}var l=new a.RongIMClient.Protobuf.BlockPushInput;l.setBlockeeId(d);var m=a.Bridge._client.userId,n=function(a){f[h]=a,setTimeout(function(){c.onSuccess(a)})};a.RongIMClient.bridge.queryMsg(k,a.MessageUtil.ArrayForm(l.toArrayBuffer()),m,{onSuccess:function(a){n(a)},onError:function(a){1==a?n(a):setTimeout(function(){c.onError(a)})}})},b.prototype.setConversationNotificationStatus=function(b,c){var d=b.conversationType,e=b.targetId,f=b.status,g=function(){return d+"_"+f},h={"1_1":"blkPPush","3_1":"blkDPush","1_0":"unblkPPush","3_0":"unblkDPush"},i=g();a.RongIMClient._memoryStore.notification[i]=f;var j=h[i];if(!j){return void setTimeout(function(){c.onError(8001)})}var k=new a.RongIMClient.Protobuf.BlockPushInput;k.setBlockeeId(e);var l=a.Bridge._client.userId;a.RongIMClient.bridge.queryMsg(j,a.MessageUtil.ArrayForm(k.toArrayBuffer()),l,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.getUserStatus=function(b,c){var d=new a.RongIMClient.Protobuf.GetUserStatusInput;b=a.Bridge._client.userId,a.RongIMClient.bridge.queryMsg(35,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(b){b=a.RongInnerTools.convertUserStatus(b),setTimeout(function(){c.onSuccess(b)})},onError:function(a){setTimeout(function(){c.onError(a)})}},"GetUserStatusOutput")},b.prototype.setUserStatus=function(b,c){var d=new a.RongIMClient.Protobuf.SetUserStatusInput,e=a.Bridge._client.userId;b&&d.setStatus(b),a.RongIMClient.bridge.queryMsg(36,a.MessageUtil.ArrayForm(d.toArrayBuffer()),e,{onSuccess:function(a){setTimeout(function(){c.onSuccess(!0)})},onError:function(a){setTimeout(function(){c.onError(a)})}},"SetUserStatusOutput")},b.prototype.subscribeUserStatus=function(b,c){var d=new a.RongIMClient.Protobuf.SubUserStatusInput,e=a.Bridge._client.userId;d.setUserid(b),a.RongIMClient.bridge.queryMsg(37,a.MessageUtil.ArrayForm(d.toArrayBuffer()),e,{onSuccess:function(a){setTimeout(function(){c&&c.onSuccess(!0)})},onError:function(a){setTimeout(function(){c&&c.onError(a)})}},"SubUserStatusOutput")},b.prototype.setUserStatusListener=function(b,c){a.RongIMClient.userStatusListener=c;var d=b.userIds||[];d.length&&a.RongIMClient._dataAccessProvider.subscribeUserStatus(d)},b.prototype.clearListeners=function(){},b.prototype.setServerInfo=function(a){},b.prototype.getUnreadMentionedMessages=function(a,b){return null},b.prototype.setConversationHidden=function(a,b,c){},b.prototype.setMessageExtra=function(a,b,c){setTimeout(function(){c.onSuccess(!0)})},b.prototype.setMessageReceivedStatus=function(a,b,c){setTimeout(function(){c.onSuccess(!0)})},b.prototype.setMessageSentStatus=function(a,b,c){setTimeout(function(){c.onSuccess(!0)})},b.prototype.getAllConversations=function(a){setTimeout(function(){a.onSuccess([])})},b.prototype.getConversationByContent=function(a,b){setTimeout(function(){b.onSuccess([])})},b.prototype.getMessagesFromConversation=function(a,b,c,d){setTimeout(function(){d.onSuccess([])})},b.prototype.searchConversationByContent=function(a,b,c){setTimeout(function(){b.onSuccess([])})},b.prototype.searchMessageByContent=function(a,b,c,d,e,f,g){setTimeout(function(){g.onSuccess([])})},b.prototype.getDelaTime=function(){return a.RongIMClient._memoryStore.deltaTime},b.prototype.getCurrentConnectionStatus=function(){var b=a.Bridge._client||{},c=b.channel||{},d=a.ConnectionStatus.CONNECTION_CLOSED;return"number"==typeof c.connectionStatus&&(d=c.connectionStatus),d},b.prototype.getAgoraDynamicKey=function(b,c,d){var e=new a.RongIMClient.Protobuf.VoipDynamicInput;e.setEngineType(b),e.setChannelName(c),a.RongIMClient.bridge.queryMsg(32,a.MessageUtil.ArrayForm(e.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){d.onError(a)})}},"VoipDynamicOutput")},b.prototype.setDeviceInfo=function(a){},b.prototype.setEnvironment=function(a){},b.prototype.clearData=function(){return!0},b.prototype.getPublicServiceProfile=function(b,c,d){var e=a.RongIMClient._memoryStore.publicServiceMap.get(b,c);setTimeout(function(){d.onSuccess(e)})},b.prototype.getRemotePublicServiceList=function(b,c){if(a.RongIMClient._memoryStore.depend.openMp){var d=new a.RongIMClient.Protobuf.PullMpInput;c?d.setTime(c):d.setTime(0),d.setMpid(""),a.RongIMClient.bridge.queryMsg(28,a.MessageUtil.ArrayForm(d.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(c){a.RongIMClient._memoryStore.publicServiceMap.publicServiceList.length=0,a.RongIMClient._memoryStore.publicServiceMap.publicServiceList=c,setTimeout(function(){b&&b.onSuccess(c)})},onError:function(a){setTimeout(function(){b&&b.onError(a)})}},"PullMpOutput")}},b.prototype.getRTCUserInfoList=function(b,c){var d=new a.RongIMClient.Protobuf.RtcQueryListInput;d.setOrder(2),a.RongIMClient.bridge.queryMsg("rtcUData",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(b){var d={},e=b.list;a.RongUtil.forEach(e,function(b){var c=b.userId,e={};a.RongUtil.forEach(b.userData,function(a){var b=a.key,c=a.value;e[b]=c}),d[c]=e}),c.onSuccess(d)},onError:function(a){c.onError(a)}},"RtcUserListOutput")},b.prototype.getRTCUserList=function(b,c){var d=new a.RongIMClient.Protobuf.RtcQueryListInput;d.setOrder(2),a.RongIMClient.bridge.queryMsg("rtcUList",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(a){c.onSuccess({users:a.list})},onError:function(a){c.onError(a)}},"RtcUserListOutput")},b.prototype.setRTCUserInfo=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcValueInfo;e.setKey(c.key),e.setValue(c.value),a.RongIMClient.bridge.queryMsg("rtcUPut",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(){d.onSuccess(!0)},onError:function(a){d.onError(a)}})},b.prototype.removeRTCUserInfo=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcKeyDeleteInput,f=c.keys||[];a.RongUtil.isArray(f)||(f=[f]),e.setKey(f),a.RongIMClient.bridge.queryMsg("rtcUDel",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(){d.onSuccess(!0)},onError:function(a){d.onError(a)}})},b.prototype.getRTCRoomInfo=function(b,c){var d=new a.RongIMClient.Protobuf.RtcQueryListInput;d.setOrder(2),a.RongIMClient.bridge.queryMsg("rtcRInfo",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(b){var d={id:b.roomId,total:b.userCount};a.RongUtil.forEach(b.roomData,function(a){d[a.key]=a.value}),c.onSuccess(d)},onError:function(a){c.onError(a)}},"RtcRoomInfoOutput")},b.prototype.setRTCRoomInfo=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcValueInfo;e.setKey(c.key),e.setValue(c.value),a.RongIMClient.bridge.queryMsg("rtcRPut",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(){d.onSuccess(!0)},onError:function(a){d.onError(a)}})},b.prototype.removeRTCRoomInfo=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcKeyDeleteInput,f=c.keys||[];a.RongUtil.isArray(f)||(f=[f]),e.setKey(f),a.RongIMClient.bridge.queryMsg("rtcRDel",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(){d.onSuccess(!0)},onError:function(a){d.onError(a)}})},b.prototype.joinRTCRoom=function(b,c){var d=new a.RongIMClient.Protobuf.RtcInput;a.RongIMClient.bridge.queryMsg("rtcRJoin_data",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(b){var d={},e=b.list,f=b.token;a.RongUtil.forEach(e,function(b){var c=b.userId,e={};a.RongUtil.forEach(b.userData,function(a){var b=a.key,c=a.value;e[b]=c}),d[c]=e}),c.onSuccess({users:d,token:f})},onError:function(a){c.onError(a)}},"RtcUserListOutput")},b.prototype.quitRTCRoom=function(b,c){var d=new a.RongIMClient.Protobuf.SetUserStatusInput;a.RongIMClient.bridge.queryMsg("rtcRExit",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(){c.onSuccess(!0)},onError:function(a){c.onError(a)}})},b.prototype.RTCPing=function(b,c){var d=new a.RongIMClient.Protobuf.RtcInput;a.RongIMClient.bridge.queryMsg("rtcPing",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,c)},b.prototype.setRTCData=function(b,c,d,e,f,g,h){var i=new a.RongIMClient.Protobuf.RtcSetDataInput;i.setInterior(e),i.setTarget(f),i.setKey(c),i.setValue(d),h=h||{};var j=h.name,k=h.content;j&&i.setObjectName(j),k&&(a.RongUtil.isString(k)||(k=JSON.stringify(k)),i.setContent(k)),a.RongIMClient.bridge.queryMsg("rtcSetData",a.MessageUtil.ArrayForm(i.toArrayBuffer()),b,g,"RtcOutput")},b.prototype.getRTCData=function(b,c,d,e,f){var g=new a.RongIMClient.Protobuf.RtcDataInput;g.setInterior(d),g.setTarget(e),g.setKey(c),a.RongIMClient.bridge.queryMsg("rtcQryData",a.MessageUtil.ArrayForm(g.toArrayBuffer()),b,{onSuccess:function(b){var c={},d=b.outInfo;a.RongUtil.forEach(d,function(a){c[a.key]=a.value}),f.onSuccess(c)},onError:f.onError},"RtcQryOutput")},b.prototype.removeRTCData=function(b,c,d,e,f,g){var h=new a.RongIMClient.Protobuf.RtcDataInput;h.setInterior(d),h.setTarget(e),h.setKey(c),g=g||{};var i=g.name,j=g.content;i&&h.setObjectName(i),j&&(a.RongUtil.isString(j)||(j=JSON.stringify(j)),h.setContent(j)),a.RongIMClient.bridge.queryMsg("rtcDelData",a.MessageUtil.ArrayForm(h.toArrayBuffer()),b,f,"RtcOutput")},b.prototype.setRTCUserData=function(b,c,d,e,f,g){this.setRTCData(b,c,d,e,a.RTCAPIType.PERSON,f,g)},b.prototype.getRTCUserData=function(b,c,d,e,f){this.getRTCData(b,c,d,a.RTCAPIType.PERSON,e)},b.prototype.removeRTCUserData=function(b,c,d,e,f){this.removeRTCData(b,c,d,a.RTCAPIType.PERSON,e,f)},b.prototype.setRTCRoomData=function(b,c,d,e,f,g){this.setRTCData(b,c,d,e,a.RTCAPIType.ROOM,f,g)},b.prototype.getRTCRoomData=function(b,c,d,e,f){this.getRTCData(b,c,d,a.RTCAPIType.ROOM,e)},b.prototype.removeRTCRoomData=function(b,c,d,e,f){this.removeRTCData(b,c,d,a.RTCAPIType.ROOM,e,f)},b.prototype.getNavi=function(){var b=a.RongIMClient._storageProvider.getItem("fullnavi")||"{}";return JSON.parse(b)},b.prototype.getRTCToken=function(b,c){var d=new a.RongIMClient.Protobuf.RtcInput;a.RongIMClient.bridge.queryMsg("rtcToken",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(a){c.onSuccess(a)},onError:function(a){c.onError(a)}},"RtcTokenOutput")},b}();a.ServerDataProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){this.version="2.8.27",this.userId="",this.useConsole=!1,this.appKey="",this.token="",this.addon=a}return b.prototype.init=function(a,b){this.appKey=a,this.useConsole&&console.log("init"),b=b||{},b.version=this.version;var c=this.addon.initWithAppkey(a,b.dbPath,b);return c&&(c=JSON.parse(c)),this.addon.registerMessageType("RC:VcMsg",3),this.addon.registerMessageType("RC:ImgTextMsg",3),this.addon.registerMessageType("RC:FileMsg",3),this.addon.registerMessageType("RC:LBSMsg",3),this.addon.registerMessageType("RC:PSImgTxtMsg",3),this.addon.registerMessageType("RC:PSMultiImgTxtMsg",3),this.addon.registerMessageType("RCJrmf:RpMsg",3),this.addon.registerMessageType("RCJrmf:RpOpendMsg",1),this.addon.registerMessageType("RC:GrpNtf",1),this.addon.registerMessageType("RC:DizNtf",0),this.addon.registerMessageType("RC:InfoNtf",0),this.addon.registerMessageType("RC:ContactNtf",0),this.addon.registerMessageType("RC:ProfileNtf",0),this.addon.registerMessageType("RC:CmdNtf",0),this.addon.registerMessageType("RC:CmdMsg",0),this.addon.registerMessageType("RC:TypSts",0),this.addon.registerMessageType("RC:CsChaR",0),this.addon.registerMessageType("RC:CsHsR",0),this.addon.registerMessageType("RC:CsEnd",0),this.addon.registerMessageType("RC:CsSp",0),this.addon.registerMessageType("RC:CsUpdate",0),this.addon.registerMessageType("RC:CsContact",0),this.addon.registerMessageType("RC:ReadNtf",0),this.addon.registerMessageType("RC:VCAccept",0),this.addon.registerMessageType("RC:VCRinging",0),this.addon.registerMessageType("RC:VCSummary",0),this.addon.registerMessageType("RC:VCHangup",0),this.addon.registerMessageType("RC:VCInvite",0),this.addon.registerMessageType("RC:VCModifyMedia",0),this.addon.registerMessageType("RC:VCModifyMem",0),this.addon.registerMessageType("RC:PSCmd",0),this.addon.registerMessageType("RC:RcCmd",0),this.addon.registerMessageType("RC:SRSMsg",0),this.addon.registerMessageType("RC:RRReqMsg",0),this.addon.registerMessageType("RC:RRRspMsg",0),c},b.prototype.connect=function(b,c,d,e){this.useConsole&&console.log("connect"),this.userId=d,this.connectCallback=c,a.Bridge._client={userId:d},e=e||{};var f=!!e.openMp,g=!!e.openUS;e.type&&this.addon.setEnvironment(!0),this.addon.connectWithToken(b,d,e.serverList,f,g)},b.prototype.setServerInfo=function(a){"setServerInfo"in this.addon&&this.addon.setServerInfo(a.navi)},b.prototype.logout=function(){this.useConsole&&console.log("logout"),this.disconnect()},b.prototype.disconnect=function(){this.useConsole&&console.log("disconnect"),this.addon.disconnect(!0)},b.prototype.clearListeners=function(){this.addon.setOnReceiveStatusListener(),this.addon.setConnectionStatusListener(),this.addon.setOnReceiveMessageListener()},b.prototype.clearData=function(){return this.useConsole&&console.log("clearData"),this.addon.clearData()},b.prototype.setConnectionStatusListener=function(b){var c=this;c.connectListener=b,this.useConsole&&console.log("setConnectionStatusListener"),c.addon&&c.addon.setConnectionStatusListener(function(d){switch(d){case 10:setTimeout(function(){b.onChanged(a.ConnectionStatus.CONNECTING)});break;case 31004:setTimeout(function(){c.connectCallback.onTokenIncorrect()});break;case 1:case 8:case 9:case 11:case 12:case 31011:case 3e4:case 30002:setTimeout(function(){b.onChanged(a.ConnectionStatus.DISCONNECTED)});break;case 0:case 33005:setTimeout(function(){c.connectCallback.onSuccess(c.userId),b.onChanged(a.ConnectionStatus.CONNECTED)});break;case 6:setTimeout(function(){b.onChanged(a.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT)});break;default:setTimeout(function(){b.onChanged(d)})}})},b.prototype.setOnReceiveMessageListener=function(b){var c=this;c.messageListener=b,this.useConsole&&console.log("setOnReceiveMessageListener"),c.addon&&c.addon.setOnReceiveMessageListener(function(d,e,f,g){var h=c.buildMessage(d);h.offLineMessage=f,setTimeout(function(){["AcceptMessage","RingingMessage","HungupMessage","InviteMessage","MediaModifyMessage","MemberModifyMessage"].indexOf(h.messageType)>-1?a.RongIMClient._voipProvider&&a.RongIMClient._voipProvider.onReceived(h):b.onReceived(h,e,g)})})},b.prototype.sendTypingStatusMessage=function(b,c,d,e){var f=this;this.useConsole&&console.log("sendTypingStatusMessage"),d in a.RongIMClient.MessageParams&&f.sendMessage(b,c,a.TypingStatusMessage.obtain(a.RongIMClient.MessageParams[d].objectName,""),{onSuccess:function(){setTimeout(function(){e.onSuccess()})},onError:function(a){setTimeout(function(){e.onError(a,null)})},onBefore:function(){}})},b.prototype.setMessageStatus=function(a,b,c,d,e){this.addon.updateMessageReceiptStatus(a,b,c),e.onSuccess(!0)},b.prototype.sendTextMessage=function(b,c,d,e){var f=a.TextMessage.obtain(d);this.useConsole&&console.log("sendTextMessage"),this.sendMessage(b,c,f,e)},b.prototype.getRemoteHistoryMessages=function(b,c,d,e,f,g){try{var h=this;h.useConsole&&console.log("getRemoteHistoryMessages"),h.addon.getRemoteHistoryMessages(b,c,d||0,e,function(b,c){var d=b?JSON.parse(b).list:[],e=[];d.reverse();for(var g=0,i=d.length;g<i;g++){var j=h.buildMessage(d[g].obj);j.sentStatus=a.SentStatus.READ,e[g]=j}f.onSuccess(e,!!c)},function(a){f.onError(a)})}catch(i){f.onError(i)}},b.prototype.getRemoteConversationList=function(a,b,c,d){try{this.useConsole&&console.log("getRemoteConversationList");var e=b||[1,2,3,4,5,6,7,8],f=this.addon.getConversationList(e),g=JSON.parse(f).list,h=[],i=this,j=0;g.reverse(),d="boolean"==typeof d&&d;for(var k=0,l=g.length;k<l;k++){var m=g[k].obj,n=JSON.parse(m);if(""!=n){if(1==n.isHidden&&d)continue;h[j]=i.buildConversation(m),j++}}h.reverse();var o=h.length;c=c||o,
o>c&&(h.length=c),a.onSuccess(h)}catch(p){a.onError(p)}},b.prototype.removeConversation=function(b,c,d){try{this.useConsole&&console.log("removeConversation"),this.addon.removeConversation(b,c);for(var e=a.RongIMClient._memoryStore.conversationList,f=e.length,g=0;g<f;g++)if(e[g].conversationType==b&&c==e[g].targetId){e.splice(g,1);break}d.onSuccess(!0)}catch(h){d.onError(h)}},b.prototype.joinChatRoom=function(a,b,c){this.useConsole&&console.log("joinChatRoom"),this.addon.joinChatRoom(a,b,function(){c.onSuccess()},function(a){c.onError(a)})},b.prototype.quitChatRoom=function(a,b){this.useConsole&&console.log("quitChatRoom"),this.addon.quitChatRoom(a,function(){b.onSuccess()},function(a){b.onError(a)})},b.prototype.addToBlacklist=function(a,b){this.useConsole&&console.log("addToBlacklist"),this.addon.addToBlacklist(a,function(){b.onSuccess()},function(a){b.onError(a)})},b.prototype.getBlacklist=function(a){this.useConsole&&console.log("getBlacklist"),this.addon.getBlacklist(function(b){a.onSuccess(b)},function(b){a.onError(b)})},b.prototype.getBlacklistStatus=function(a,b){this.useConsole&&console.log("getBlacklistStatus"),this.addon.getBlacklistStatus(a,function(a){b.onSuccess(a)},function(a){b.onError(a)})},b.prototype.removeFromBlacklist=function(a,b){this.useConsole&&console.log("removeFromBlacklist"),this.addon.removeFromBlacklist(a,function(){b.onSuccess()},function(a){b.onError(a)})},b.prototype.sendMessage=function(b,c,d,e,f,g,h,i,j){var k=this,l=[];k.useConsole&&console.log("sendMessage"),j=j||{};var m=b==a.ConversationType.DISCUSSION||b==a.ConversationType.GROUP;if(m&&d.messageName==a.RongIMClient.MessageType.ReadReceiptResponseMessage){l=[];var n=d;if(n.receiptMessageDic){var o=[];for(var p in n.receiptMessageDic)o.push(p);l=o}}m&&d.messageName==a.RongIMClient.MessageType.SyncReadStatusMessage&&(l=[],l.push(k.userId));var q=j.userIds;m&&q&&(l=q);var r=k.addon.sendMessage(b,c,a.RongIMClient.MessageParams[d.messageName].objectName,d.encode(),g||"",h||"",function(a){},function(b,c){var d=k.buildMessage(b),f=a.ErrorCode.SENSITIVE_REPLACE;if(c==f)return e.onError(f,d);e.onSuccess(d)},function(a,b){e.onError(b,k.buildMessage(a))},l),s=JSON.parse(r);e.onBefore&&e.onBefore(s.messageId),a.MessageIdHandler.messageId=s.messageId},b.prototype.registerMessageType=function(b,c,d,e,f){this.useConsole&&console.log("registerMessageType"),this.addon.registerMessageType(c,d.getMessageTag(),f);var g=a.ModelUtil.modleCreate(e,b);a.RongIMClient.RegisterMessage[b]=g,a.RongIMClient.RegisterMessage[b].messageName=b,registerMessageTypeMapping[c]=b,a.RongIMClient.MessageType[b]=b,a.RongIMClient.MessageParams[b]={objectName:c,msgTag:d},typeMapping[c]=b},b.prototype.registerMessageTypes=function(b){var c=[],d=function(a){var b=[];for(var c in a)b.push(c);return b};for(var e in b){var f=b[e],g=f.proto,h=d(g),i=f.flag||3,j=a.MessageTag.getTagByStatus(i);i=new a.MessageTag(j.isCounted,j.isPersited),c.push({type:e,name:f.name,flag:i,protos:h})}for(var k=function(b){var c=b.type,d=b.name,e=b.flag,f=b.protos;a.RongIMClient.registerMessageType(c,d,e,f)},l=0,m=c.length;l<m;l++){var f=c[l];k(f)}},b.prototype.addMessage=function(b,c,d,e){this.useConsole&&console.log("addMessage");var f=d.direction,g=this.addon.insertMessage(b,c,d.senderUserId,d.objectName,JSON.stringify(d.content),function(){e.onSuccess(h.buildMessage(g))},function(){e.onError(a.ErrorCode.MSG_INSERT_ERROR)},f),h=this},b.prototype.removeMessage=function(a,b,c,d){},b.prototype.removeLocalMessage=function(a,b,c,d){try{this.useConsole&&console.log("removeLocalMessage"),this.addon.deleteMessages(c),d.onSuccess(!0)}catch(e){d.onError(e)}},b.prototype.getMessage=function(a,b){try{this.useConsole&&console.log("getMessage");var c=this.buildMessage(this.addon.getMessage(a));b.onSuccess(c)}catch(d){b.onError(d)}},b.prototype.clearMessages=function(a,b,c){try{this.useConsole&&console.log("clearMessages"),this.addon.clearMessages(a,b),c.onSuccess(!0)}catch(d){c.onError(d)}},b.prototype.setUnreadCount=function(a,b,c){},b.prototype.getConversation=function(a,b,c){try{this.useConsole&&console.log("getConversation");var d=this.addon.getConversation(a,b);c.onSuccess(this.buildConversation(d))}catch(e){c.onError(e)}},b.prototype.getConversationList=function(a,b,c,d){this.useConsole&&console.log("getConversationList"),this.getRemoteConversationList(a,b,c,d)},b.prototype.clearCache=function(){var b=a.RongIMClient._memoryStore||{};b.conversationList=[],b.isSyncRemoteConverList},b.prototype.clearConversations=function(a,b){try{this.useConsole&&console.log("clearConversations"),this.addon.clearConversations(),b.onSuccess(!0)}catch(c){b.onError(c)}},b.prototype.setMessageContent=function(a,b,c){b=JSON.stringify(b),this.addon.setMessageContent(a,b,c)},b.prototype.getHistoryMessages=function(b,c,d,e,f,g,h){if(this.useConsole&&console.log("getHistoryMessages"),e<=0)return void f.onError(a.ErrorCode.TIMEOUT);g=g||"",h=void 0===h||h;try{var i=this.addon.getHistoryMessages(b,c,d||0,e,g,h),j=i?JSON.parse(i).list:[],k=[],l=this;j.reverse();for(var m=0,n=j.length;m<n;m++){var o=l.buildMessage(j[m].obj);k[m]=o}f.onSuccess(k,n==e)}catch(p){f.onError(p)}},b.prototype.clearRemoteHistoryMessages=function(b,c){var d=b.conversationType,e=b.targetId,f=b.timestamp;return{1:!0,2:!0,3:!0,5:!0,6:!0}[d]?"number"!=typeof f?void c.onError(a.ErrorCode.CLEAR_HIS_TIME_ERROR):void this.addon.clearRemoteHistoryMessages(+d,e,f,function(){c.onSuccess(!0)},function(b){1==b&&(b=a.ErrorCode.CLEAR_HIS_ERROR),c.onError(b)}):void c.onError(a.ErrorCode.CLEAR_HIS_TYPE_ERROR)},b.prototype.clearHistoryMessages=function(b,c){var d=+b.conversationType,e=b.targetId;try{this.addon.clearMessages(d,e);c.onSuccess(!0)}catch(f){console.log(f),c.onError(a.ErrorCode.CLEAR_HIS_ERROR)}},b.prototype.getTotalUnreadCount=function(a,b){try{var c;this.useConsole&&console.log("getTotalUnreadCount"),c=b?this.addon.getTotalUnreadCount(b):this.addon.getTotalUnreadCount(),a.onSuccess(c)}catch(d){a.onError(d)}},b.prototype.getConversationUnreadCount=function(a,b){this.useConsole&&console.log("getConversationUnreadCount"),this.getTotalUnreadCount(b,a)},b.prototype.getUnreadCount=function(a,b,c){try{this.useConsole&&console.log("getUnreadCount");var d=this.addon.getUnreadCount(a,b);c.onSuccess(d)}catch(e){c.onError(e)}},b.prototype.clearUnreadCount=function(a,b,c){try{this.useConsole&&console.log("clearUnreadCount");this.addon.clearUnreadCount(a,b);c.onSuccess(!0)}catch(d){c.onError(d)}},b.prototype.clearTotalUnreadCount=function(a){this.useConsole&&console.log("clearTotalUnreadCount")},b.prototype.clearUnreadCountByTimestamp=function(a,b,c,d){try{this.useConsole&&console.log("clearUnreadCountByTimestamp");this.addon.clearUnreadCountByTimestamp(a,b,c);d.onSuccess(!0)}catch(e){d.onError(e)}},b.prototype.setConversationToTop=function(a,b,c,d){try{this.useConsole&&console.log("setConversationToTop"),this.addon.setConversationToTop(a,b,c),d.onSuccess(!0)}catch(e){d.onError(e)}},b.prototype.setConversationHidden=function(a,b,c){this.addon.setConversationHidden(a,b,c)},b.prototype.setMessageReceivedStatus=function(a,b,c){try{this.useConsole&&console.log("setMessageReceivedStatus"),this.addon.setMessageReceivedStatus(a,b),c.onSuccess(!0)}catch(d){c.onError(d)}},b.prototype.setMessageSentStatus=function(a,b,c){try{this.useConsole&&console.log("setMessageSentStatus"),this.addon.setMessageSentStatus(a,b),c.onSuccess(!0)}catch(d){c.onError(d)}},b.prototype.getFileToken=function(a,b){this.useConsole&&console.log("getFileToken"),this.addon.getUploadToken(a,function(a){b.onSuccess({token:a})},function(a){b.onError(a)})},b.prototype.getFileUrl=function(a,b,c,d){this.useConsole&&console.log("getFileUrl"),this.addon.getDownloadUrl(a,b,c,function(a){d.onSuccess({downloadUrl:a})},function(a){d.onError(a)})},b.prototype.searchConversationByContent=function(a,b,c){var d=[];d=void 0===c?[1,2,3,4,5,6,7]:c;try{this.useConsole&&console.log("searchConversationByContent");var e=this.addon.searchConversationByContent(d,a),f=JSON.parse(e).list,g=[],h=this;f.reverse();for(var i=0,j=f.length;i<j;i++)g[i]=h.buildConversation(f[i].obj);b.onSuccess(g)}catch(k){b.onError(k)}},b.prototype.searchMessageByContent=function(a,b,c,d,e,f,g){var h=this;try{this.useConsole&&console.log("searchMessageByContent"),this.addon.searchMessageByContent(a,b,c,d,e,f,function(a,b){var c=a?JSON.parse(a).list:[],d=[];c.reverse();for(var e=0,f=c.length;e<f;e++)d[e]=h.buildMessage(c[e].obj);g.onSuccess(d,b)})}catch(i){g.onError(i)}},b.prototype.getChatRoomInfo=function(a,b,c,d){this.useConsole&&console.log("getChatRoomInfo"),this.addon.getChatroomInfo(a,b,c,function(a,b){var c=a?JSON.parse(a).list:[],e={userInfos:[],userTotalNums:b};if(c.length>0)for(var f=0,g=c.length;f<g;f++)e.userInfos.push(JSON.parse(c[f].obj));d.onSuccess(e)},function(a){d.onError(a)})},b.prototype.setChatroomHisMessageTimestamp=function(a,b){},b.prototype.getChatRoomHistoryMessages=function(a,b,c,d){},b.prototype.getDelaTime=function(){return this.addon.getDeltaTime()},b.prototype.getUserStatus=function(b,c){this.addon.getUserStatus(b,function(b){var d=a.RongInnerTools.convertUserStatus({status:b,userId:""});c.onSuccess(d)},function(a){c.onError(a)})},b.prototype.setUserStatus=function(a,b){this.addon.setUserStatus(a,function(){b.onSuccess(!0)},function(a){b.onError(a)})},b.prototype.subscribeUserStatus=function(a,b){this.addon.subscribeUserStatus(a,function(){b&&b.onSuccess(!0)},function(a){b&&b.onError(a)})},b.prototype.setUserStatusListener=function(b,c){this.addon.setOnReceiveStatusListener(function(b,c){var d=a.RongInnerTools.convertUserStatus({userId:b,status:c});a.RongIMClient.userStatusObserver.notify({key:b,entity:d})});var d=b.userIds||[];d.length&&a.RongIMClient._dataAccessProvider.subscribeUserStatus(d)},b.prototype.getUnreadMentionedMessages=function(a,b){for(var c=this,d=JSON.parse(c.addon.getUnreadMentionedMessages(a,b)).list,e=0,f=d.length;e<f;e++){var g=JSON.parse(d[e].obj);g.content=JSON.parse(g.content),d[e]=g}return d},b.prototype.hasRemoteUnreadMessages=function(a,b){b.onSuccess(!1)},b.prototype.sendRecallMessage=function(a,b){var c=this;c.addon.recallMessage("RC:RcCmd",JSON.stringify(a),a.push||"",function(){a.objectName="RC:RcCmd",b.onSuccess(c.buildMessage(JSON.stringify(a)))},function(a){b.onError(a)})},b.prototype.updateMessage=function(a,b){},b.prototype.updateMessages=function(a,b,c,d,e){},b.prototype.reconnect=function(a){},b.prototype.sendReceiptResponse=function(a,b,c){},b.prototype.setMessageExtra=function(a,b,c){},b.prototype.addMemberToDiscussion=function(a,b,c){},b.prototype.createDiscussion=function(a,b,c){},b.prototype.getDiscussion=function(a,b){},b.prototype.quitDiscussion=function(a,b){},b.prototype.removeMemberFromDiscussion=function(a,b,c){},b.prototype.setDiscussionInviteStatus=function(a,b,c){},b.prototype.setDiscussionName=function(a,b,c){},b.prototype.setEnvironment=function(a){this.addon.setEnvironment(a)},b.prototype.addConversation=function(a,b){},b.prototype.updateConversation=function(a){return null},b.prototype.getConversationNotificationStatus=function(b,c){var d=b.conversationType,e=b.targetId,f=a.RongIMClient._memoryStore.notification,g=d+"_"+e,h=f[g];if("number"==typeof h)return void c.onSuccess(h);this.addon.getConversationNotificationStatus(d,e,function(a){f[g]=a,c.onSuccess(a)},function(a){c.onError(a)})},b.prototype.setConversationNotificationStatus=function(b,c){var d=b.conversationType,e=b.targetId,f=b.status;a.RongIMClient._memoryStore.notification[d+"_"+e]=f;var g=!!f;this.addon.setConversationNotificationStatus(d,e,g,function(){c.onSuccess(f)},function(a){c.onError(a)})},b.prototype.getCurrentConnectionStatus=function(){return this.addon.getConnectionStatus()},b.prototype.getAgoraDynamicKey=function(a,b,c){this.addon.getVoIPKey(a,b,"",function(a){c.onSuccess(a)},function(a){c.onError(a)})},b.prototype.getPublicServiceProfile=function(b,c,d){var e=a.RongIMClient._memoryStore.publicServiceMap.get(b,c);d.onSuccess(e)},b.prototype.setDeviceInfo=function(a){var b=a.id||"";this.addon.setDeviceId(b)},b.prototype.getRemotePublicServiceList=function(b,c){var d=[],e=this.addon.getAccounts(),f=function(a){var b={hasFollowed:!1,isGlobal:!1,menu:null};if(!a.obj){var c={error:a};throw new Error("公众账号数据格式错误: "+JSON.stringify(c))}var d=JSON.parse(a.obj),e={aType:"conversationType",aId:"publicServiceId",aName:"introduction",aUri:"portraitUri",follow:"hasFollowed",isGlobal:"isGlobal"};for(var f in d){var g=d[f];if("aExtra"==f){var h=JSON.parse(g);b.hasFollowed=h.follow,b.isGlobal=h.isGlobal,b.menu=h.menu}var i=e[f];i&&(b[i]=g)}return b};if(e){e=JSON.parse(e);for(var g=e.list,h=0,i=g.length;h<i;h++){var j=g[h];j=f(j),d.push(j)}}d.length>0&&(a.RongIMClient._memoryStore.publicServiceMap.publicServiceList.length=0,a.RongIMClient._memoryStore.publicServiceMap.publicServiceList=d),b.onSuccess(a.RongIMClient._memoryStore.publicServiceMap.publicServiceList)},b.prototype.buildMessage=function(b){var c=new a.Message,d=JSON.parse(b);c.conversationType=d.conversationType,c.targetId=d.targetId,c.messageDirection=d.direction,c.senderUserId=d.senderUserId,d.direction==a.MessageDirection.RECEIVE?c.receivedStatus=d.status:d.direction==a.MessageDirection.SEND&&(c.sentStatus=d.status),c.sentTime=d.sentTime,c.objectName=d.objectName;var e=d.content?JSON.parse(d.content):d.content,f=typeMapping[d.objectName]||registerMessageTypeMapping[d.objectName];return e&&(e.messageName=f),c.content=e,c.messageId=d.messageId,c.messageUId=d.messageUid,c.messageType=f,c},b.prototype.buildConversation=function(b){if(""===b)return null;var c=new a.Conversation,d=JSON.parse(b),e=d.lastestMsg?this.buildMessage(d.lastestMsg):{};c.conversationTitle=d.title,c.conversationType=d.conversationType,c.draft=d.draft,c.isTop=d.isTop,c.isHidden=d.isHidden,e.conversationType=d.conversationType,e.targetId=d.targetId,c.latestMessage=e,c.latestMessageId=e.messageId,c.latestMessage.messageType=typeMapping[e.objectName]||registerMessageTypeMapping[e.objectName],c.objectName=e.objectName,c.receivedStatus=a.ReceivedStatus.READ,c.sentTime=e.sentTime,c.senderUserId=e.senderUserId,c.sentStatus=e.status,c.targetId=d.targetId,c.unreadMessageCount=d.unreadCount,c.hasUnreadMention=d.m_hasUnreadMention;var f=this.getUnreadMentionedMessages(d.conversationType,d.targetId);if(f.length>0){var g=f.pop();c.mentionedMsg={uid:g.messageUid,time:g.sentTime,mentionedInfo:g.content.mentionedInfo,sendUserId:g.senderUserId}}return c},b.prototype.getRTCUserInfoList=function(a,b){},b.prototype.setRTCUserInfo=function(a,b,c){},b.prototype.removeRTCUserInfo=function(a,b,c){},b.prototype.getRTCUserList=function(a,b){},b.prototype.getRTCRoomInfo=function(a,b){},b.prototype.setRTCRoomInfo=function(a,b,c){},b.prototype.removeRTCRoomInfo=function(a,b,c){},b.prototype.joinRTCRoom=function(a,b){},b.prototype.quitRTCRoom=function(a,b){},b.prototype.RTCPing=function(a,b){},b.prototype.setRTCUserData=function(a,b,c,d,e,f){},b.prototype.getRTCUserData=function(a,b,c,d,e){},b.prototype.removeRTCUserData=function(a,b,c,d,e){},b.prototype.setRTCRoomData=function(a,b,c,d,e,f){},b.prototype.getRTCRoomData=function(a,b,c,d,e){},b.prototype.removeRTCRoomData=function(a,b,c,d,e){},b.prototype.getNavi=function(){},b.prototype.getRTCToken=function(a,b){},b}();a.VCDataProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(){this._memeoryStore={},this.prefix="rong_"}return a.prototype.setItem=function(a,b){this._memeoryStore[a]=decodeURIComponent(b)},a.prototype.getItem=function(a){return this._memeoryStore[a]},a.prototype.removeItem=function(a){this.getItem(a)&&delete this._memeoryStore[a]},a.prototype.getItemKey=function(a){var b=this,c=null,d=new RegExp(a+"\\w+");for(var e in b._memeoryStore){e.match(d)&&(c=e)}return c},a.prototype.getItemKeyList=function(a){var b=this.prefix,c=this,d=[],e=new RegExp(a+"\\w+");for(var f in c._memeoryStore){f.match(e)&&(f=f.substring(b.length),d.push(f))}return d},a.prototype.clearItem=function(){var a=this;for(var b in a._memeoryStore)delete a._memeoryStore[b]},a.prototype.onOutOfQuota=function(){return 4096},a}();a.MemeoryProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(){this.prefix="rong_",this._host="";var b=new Date,c=b.getMonth()+1,d=b.getFullYear()+"/"+(1==c.toString().length?"0"+c:c)+"/"+b.getDate(),e=new Date(d).getTime();for(var f in localStorage){if(f.lastIndexOf("RECEIVED")>-1){var g=JSON.parse(localStorage.getItem(f));for(var h in g)e-g[h].dealtime>0&&delete g[h];a.RongUtil.isEmpty(g)?localStorage.removeItem(f):localStorage.setItem(f,JSON.stringify(g))}if(f.lastIndexOf("SENT")>-1){e-JSON.parse(localStorage.getItem(f)).dealtime>0&&localStorage.removeItem(f)}}}return b.prototype.setItem=function(a,b){a&&(-1==a.indexOf(this.prefix)&&(a=this.prefix+a),localStorage.setItem(a,b))},b.prototype.getItem=function(a){return a?(-1==a.indexOf(this.prefix)&&(a=this.prefix+a),localStorage.getItem(a||"")):""},b.prototype.getItemKey=function(a){var b="",c=this.prefix+a;for(var d in localStorage)if(0==d.indexOf(c)){b=d;break}return b},b.prototype.getItemKeyList=function(a){var b=[],c=this.prefix,d=c+a;for(var e in localStorage)0==e.indexOf(d)&&(e=e.substring(c.length),b.push(e));return b},b.prototype.removeItem=function(a){a&&(-1==a.indexOf(this.prefix)&&(a=this.prefix+a),localStorage.removeItem(a.toString()))},b.prototype.clearItem=function(){var a=this;for(var b in localStorage)b.indexOf(a.prefix)>-1&&a.removeItem(b)},b.prototype.onOutOfQuota=function(){return JSON.stringify(localStorage).length},b}();a.LocalStorageProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(){this.opersistName="RongIMLib",this.keyManager="RongUserDataKeyManager",this._host="",this.prefix="rong_",this.oPersist=document.createElement("div"),this.oPersist.style.display="none",this.oPersist.style.behavior="url('#default#userData')",document.body.appendChild(this.oPersist),this.oPersist.load(this.opersistName)}return a.prototype.setItem=function(a,b){a&&-1==a.indexOf(this.prefix)&&(a=this.prefix+a),this.oPersist.setAttribute(a,b);var c=this.getItem(this.keyManager);c?-1==c.indexOf(a)&&(c+=","+a):c=a,this.oPersist.setAttribute(this.prefix+this.keyManager,c),this.oPersist.save(this.opersistName)},a.prototype.getItem=function(a){return a&&-1==a.indexOf(this.prefix)&&(a=this.prefix+a),a?this.oPersist.getAttribute(a):a},a.prototype.removeItem=function(a){a&&-1==a.indexOf(this.prefix)&&(a=this.prefix+a),this.oPersist.removeAttribute(a),this.oPersist.save(this.opersistName);for(var b=this.getItem(this.keyManager),c=b&&b.split(",")||[],d=0,e=c.length;d<e;d++)c[d]==a&&c.splice(d,1);this.oPersist.setAttribute(this.prefix+this.keyManager,c.join(",")),this.oPersist.save(this.opersistName)},a.prototype.getItemKey=function(a){var b=null,c=this.getItem(this.keyManager),d=c&&c.split(",")||[],e=this.prefix+a;if(d.length)for(var f=0,g=d.length;f<g;f++)if(d[f]&&0==d[f].indexOf(e)){b=d[f];break}return b},a.prototype.getItemKeyList=function(a){var b=[],c=this.getItem(this.keyManager),d=c&&c.split(",")||[],e=this.prefix,f=e+a;if(d.length)for(var g=0,h=d.length;g<h;g++)if(d[g]&&0==d[g].indexOf(f)){var i=d[g];i=i.substring(e.length),b.push(d[g])}return b},a.prototype.clearItem=function(){var a=this.getItem(this.keyManager),b=[],c=this;if(a&&(b=a.split(",")),b.length){for(var d=0,e=b.length;d<e;d++)b[d]&&c.removeItem(b[d]);c.removeItem(c.keyManager)}},a.prototype.onOutOfQuota=function(){return 10485760},a}();a.UserDataProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(b){if(this.script=document.createElement("script"),this.head=document.getElementsByTagName("head")[0],"WebSocket"in window&&"ArrayBuffer"in window&&3===WebSocket.prototype.CLOSED&&!a.RongIMClient._memoryStore.depend.isPolling){if(a.Transportations._TransportType=a.Socket.WEBSOCKET,!a.RongIMClient.Protobuf){var c=a.RongIMClient._memoryStore.depend.protobuf,d=this.script;d.src=c,this.head.appendChild(d),d.onload=d.onreadystatechange=function(){if(!(this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d.onload=d.onreadystatechange=null,b&&b(),b))){var c=a.RongIMClient._memoryStore.token,e=a.RongIMClient._memoryStore.callback;c&&a.RongIMClient.connect(c,e)}}}}else a.Transportations._TransportType="xhr-polling",a.RongIMClient.Protobuf=Polling}return b}();a.FeatureDectector=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(RongIMLib){var FeaturePatcher=function(){function FeaturePatcher(){}return FeaturePatcher.prototype.patchAll=function(){this.patchJSON(),this.patchForEach()},FeaturePatcher.prototype.patchForEach=function(){Array.forEach||(Array.forEach=function(a,b){for(var c=0;c<a.length;c++)b.call(a,a[c],c,a)})},FeaturePatcher.prototype.patchJSON=function(){window.JSON||(window.JSON=function(){function JSON(){}return JSON.parse=function(sJSON){return eval("("+sJSON+")")},JSON.stringify=function(a){return this.str("",{"":a})},JSON.str=function(a,b){var c,d,e,f,g,h=b[a],i=this;switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(a)),typeof h){case"string":return i.quote(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(g=[],"[object Array]"===Object.prototype.toString.apply(h)){for(f=h.length,c=0;c<f;c+=1)g[c]=i.str(c,h)||"null";return e=0===g.length?"[]":"["+g.join(",")+"]"}for(d in h)Object.prototype.hasOwnProperty.call(h,d)&&(e=i.str(d,h))&&g.push(i.quote(d)+":"+e);return e=0===g.length?"{}":"{"+g.join(",")+"}"}},JSON.quote=function(a){var b=this;return b.rx_escapable.lastIndex=0,b.rx_escapable.test(a)?'"'+a.replace(b.rx_escapable,function(a){var c=b.meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},JSON.rx_escapable=new RegExp('[\\"\\\\"\0--­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\ufeff￰-￿]',"g"),JSON.meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"''":"\\''","\\":"\\\\"},JSON}())},FeaturePatcher}();RongIMLib.FeaturePatcher=FeaturePatcher}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){!function(){function a(){}a.prototype.load=function(a,b,c){var d=document.createElement("script");d.async=!0,b&&(d.addEventListener?d.addEventListener("load",function(a){var c=a.target||a.srcElement;b(c.src)},!1):d.readyState&&(d.onreadystatechange=function(a){var c=a.srcElement;b(c.src)})),c&&(d.onerror=function(a){var b=a.target||a.srcElement;c(b.src)}),(document.head||document.getElementsByTagName("head")[0]).appendChild(d),d.src=a}}()}(RongIMLib||(RongIMLib={}));var RongIMLib;return function(a){var b=function(){function a(){this.publicServiceList=[]}return a.prototype.get=function(a,b){for(var c=0,d=this.publicServiceList.length;c<d;c++)if(this.publicServiceList[c].conversationType==a&&b==this.publicServiceList[c].publicServiceId)return this.publicServiceList[c]},a.prototype.add=function(a){for(var b=!0,c=this,d=0,e=this.publicServiceList.length;d<e;d++)if(c.publicServiceList[d].conversationType==a.conversationType&&a.publicServiceId==c.publicServiceList[d].publicServiceId){this.publicServiceList.unshift(this.publicServiceList.splice(d,1)[0]),b=!1;break}b&&this.publicServiceList.unshift(a)},a.prototype.replace=function(a){for(var b=this,c=0,d=this.publicServiceList.length;c<d;c++)if(b.publicServiceList[c].conversationType==a.conversationType&&a.publicServiceId==b.publicServiceList[c].publicServiceId){b.publicServiceList.splice(c,1,a);break}},a.prototype.remove=function(a,b){for(var c=this,d=0,e=this.publicServiceList.length;d<e;d++)if(c.publicServiceList[d].conversationType==a&&b==c.publicServiceList[d].publicServiceId){this.publicServiceList.splice(d,1);break}},a}();a.PublicServiceMap=b;var c=function(){function a(){this.conversationList=[]}return a.prototype.get=function(a,b){for(var c=0,d=this.conversationList.length;c<d;c++)if(this.conversationList[c].conversationType==a&&this.conversationList[c].targetId==b)return this.conversationList[c];return null},a.prototype.add=function(a){for(var b=!0,c=0,d=this.conversationList.length;c<d;c++)if(this.conversationList[c].conversationType===a.conversationType&&this.conversationList[c].targetId===a.targetId){this.conversationList.unshift(this.conversationList.splice(c,1)[0]),b=!1;break}b&&this.conversationList.unshift(a)},a.prototype.replace=function(a){for(var b=0,c=this.conversationList.length;b<c;b++)if(this.conversationList[b].conversationType===a.conversationType&&this.conversationList[b].targetId===a.targetId){this.conversationList.splice(b,1,a);break}},a.prototype.remove=function(a){for(var b=0,c=this.conversationList.length;b<c;b++)if(this.conversationList[b].conversationType===a.conversationType&&this.conversationList[b].targetId===a.targetId){this.conversationList.splice(b,1);break}},a}();a.ConversationMap=c;var d=function(){function b(){}return b.getInstance=function(){return b._instance||(b._instance=new b),b._instance},b.prototype.logger=function(b,c,d){a.RongIMClient.logger({code:b,funcName:c,msg:d})},b.prototype.check=function(b,c,d,e){if(a.RongIMClient._dataAccessProvider||d){for(var f=0,g=e.length;f<g;f++)if(!new RegExp(this.getType(e[f])).test(b[f])){var h="第"+(f+1)+"个参数错误, 错误类型："+this.getType(e[f])+" ["+b[f]+"] -> 位置:"+c;this.logger("-3",c,h)}}else{var h="该参数不正确或尚未实例化RongIMClient -> 位置:"+c;this.logger("-4",c,h)}},b.prototype.getType=function(a){var b=Object.prototype.toString.call(a).toLowerCase();return b.slice(8,b.length-1)},b.prototype.checkCookieDisable=function(){document.cookie="checkCookie=1";var a=document.cookie.match(new RegExp("(^| )checkCookie=([^;]*)(;|$)")),b=!1;return a||(b=!0),document.cookie="checkCookie=1;expires=Thu, 01-Jan-1970 00:00:01 GMT",b},b}();a.CheckParam=d;var e=function(){function a(a){this.map={},this.keys=[],this.limit=a||10}return a.prototype.set=function(a,b){this.map[a]=b},a.prototype.get=function(a){return this.map[a]||0},a.prototype.remove=function(a){delete this.map[a]},a}();a.LimitableMap=e;var f=function(){function a(){this.cache={}}return a.prototype.set=function(a,b){this.cache[a]=b},a.prototype.get=function(a){return this.cache[a]},a.prototype.remove=function(a){delete this.cache[a]},a}();a.MemoryCache=f;var g=function(){function a(a){var b=this;b.xmlhttp=null,b.options=a;var c="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;"undefined"!=typeof XMLHttpRequest&&c?b.xmlhttp=new XMLHttpRequest:"undefined"!=typeof XDomainRequest?b.xmlhttp=new XDomainRequest:b.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}return a.prototype.send=function(a){var b=this;b.options.url||(b.options.url="http://upload.qiniu.com/putb64/-1"),b.xmlhttp.onreadystatechange=function(){4==b.xmlhttp.readyState&&(b.options.type?a():a(JSON.parse(b.xmlhttp.responseText.replace(/'/g,'"'))))},b.xmlhttp.open("POST",b.options.url,!0),b.xmlhttp.withCredentials=!1,"setRequestHeader"in b.xmlhttp&&(b.options.type?b.xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"):(b.xmlhttp.setRequestHeader("Content-type","application/octet-stream"),b.xmlhttp.setRequestHeader("Authorization","UpToken "+b.options.token))),b.xmlhttp.send(b.options.type?"appKey="+b.options.appKey+"&deviceId="+b.options.deviceId+"&timestamp="+b.options.timestamp+"&deviceInfo="+b.options.deviceInfo+"&privateInfo="+JSON.stringify(b.options.privateInfo):b.options.base64)},a}();a.RongAjax=g;var h=function(){function a(){}return a.noop=function(){},a.isEmpty=function(a){var b=!0;for(var c in a){b=!1;break}return b},a.MD5=function(a,b,c){return md5(a,b,c)},a.isObject=function(a){return"[object Object]"==Object.prototype.toString.call(a)},a.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)},a.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)},a.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)},a.stringFormat=function(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c],f=new RegExp("\\{"+c+"\\}","g");a=a.replace(f,e)}return a},a.tplEngine=function(a,b,c){function d(b){return a.replace(c||/{([^}]+)}/g,function(a,c){return"\\"==a.charAt(0)?a.slice(1):void 0!=b[c]?b[c]:"{"+c+"}"})}"[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]);for(var e=[],f=0,g=b.length;f<g;f++)e.push(d(b[f]));return e.join("")},a.forEach=function(b,c){c=c||a.noop;var d=function(){for(var a in b)b.hasOwnProperty(a)&&c(b[a],a,b)},e=function(){for(var a=0,d=b.length;a<d;a++)c(b[a],a)};a.isObject(b)&&d(),a.isArray(b)&&e()},a.extend=function(b,c,d,e){return a.forEach(b,function(a,b){var d=b in c;e&&d&&(c[b]=a),d||(c[b]=a)}),c},a.createXHR=function(){var a={XMLHttpRequest:function(){return new XMLHttpRequest},XDomainRequest:function(){return new XDomainRequest},ActiveXObject:function(){return new ActiveXObject("Microsoft.XMLHTTP")}},b="function"==typeof XMLHttpRequest,c="function"==typeof XDomainRequest;return a[b?"XMLHttpRequest":c?"XDomainRequest":"ActiveXObject"]()},a.request=function(b){var c=b.url,d=b.success,e=b.error,f=b.method||"GET",g=a.createXHR();g.onreadystatechange=function(){4==g.readyState&&(200==g.status?d():e())},g.open(f,c,!0),g.send(null)},a.formatProtoclPath=function(b){var c=b.path,d=b.protocol,e=b.tmpl||"{0}{1}",f=b.sub,g="://",h=c.indexOf(g);(h>-1&&(h+=g.length,c=c.substring(h)),f)&&((h=c.indexOf("/"))>-1&&(c=c.substr(0,h)));return a.stringFormat(e,[d,c])},a.supportLocalStorage=function(){var a=!1;if("object"==typeof localStorage)try{var b="RC_TMP_KEY",c="RC_TMP_VAL";localStorage.setItem(b,c);localStorage.getItem(b)==c&&(a=!0)}catch(d){console.log("localStorage is disabled.")}return a},a.rename=function(b,c){var d=a.isObject(b);d&&(b=[b]),b=JSON.parse(JSON.stringify(b));var e=function(a,b,d){delete d[b],b=c[b],d[b]=a};return a.forEach(b,function(b){a.forEach(b,function(b,d,f){(d in c?e:a.noop)(b,d,f)})}),d?b[0]:b},a.some=function(a,b){for(var c=!1,d=0,e=a.length;d<e;d++)if(b(a[d])){c=!0;break}return c},a.keys=function(a){var b=[];for(var c in a)b.push(c);return b},a.isNumber=function(a){return"[object Number]"==Object.prototype.toString.call(a)},a.getTimestamp=function(){return(new Date).getTime()},a}();a.RongUtil=h;var i=function(){function a(){this.watchers={}}return a.prototype.genUId=function(a){return[a,(new Date).getTime()].join("_")},a.prototype.watch=function(a){var b=this,c=a.key,d=a.multiple;c=h.isArray(c)?c:[c];var e=a.func;h.forEach(c,function(a){a=d?b.genUId(a):a,b.watchers[a]=e})},a.prototype.notify=function(a){var b=this,c=a.key,d=a.entity;for(var e in b.watchers){0==e.indexOf(c)&&b.watchers[e](d)}},a.prototype.remove=function(){},a}();a.RongObserver=i;var j=function(){function a(a){this.timeout=0,this.timer=null,this.timeout=a.timeout}return a.prototype.resume=function(a){this.timer=setTimeout(a,this.timeout)},a.prototype.pause=function(){clearTimeout(this.timer)},a}();a.Timer=j;var k=function(){function a(){}return a.getUId=function(a){return md5(a).slice(8,16)},a}();a.InnerUtil=k}(RongIMLib||(RongIMLib={})),RongIMLib});

/***/ }),

/***/ "./src/assets/js/protobuf-2.3.4.min.js":
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(process) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;(function(c,d){if(true){!(__WEBPACK_AMD_DEFINE_FACTORY__ = (d),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))}else{if(typeof require==="function"&&typeof module==="object"&&module&&module.exports){module.exports=d(true)}else{c.RongIMLib=c.RongIMLib||{RongIMClient:{}};c.RongIMLib.RongIMClient.Protobuf=d()}}})(this,function(a){var d=(function(){function E(an,ap,ao){this.low=an|0;this.high=ap|0;this.unsigned=!!ao}E.prototype.__isLong__;Object.defineProperty(E.prototype,"__isLong__",{value:true,enumerable:false,configurable:false});function k(an){return(an&&an.__isLong__)===true}E.isLong=k;var aa={};var M={};function ah(ap,ao){var aq,ar,an;if(ao){ap>>>=0;if(an=(0<=ap&&ap<256)){ar=M[ap];if(ar){return ar}}aq=S(ap,(ap|0)<0?-1:0,true);if(an){M[ap]=aq}return aq}else{ap|=0;if(an=(-128<=ap&&ap<128)){ar=aa[ap];if(ar){return ar}}aq=S(ap,ap<0?-1:0,false);if(an){aa[ap]=aq}return aq}}E.fromInt=ah;function q(ao,an){if(isNaN(ao)||!isFinite(ao)){return an?m:F}if(an){if(ao<0){return m}if(ao>=h){return D}}else{if(ao<=-C){return T}if(ao+1>=C){return b}}if(ao<0){return q(-ao,an).neg()}return S((ao%i)|0,(ao/i)|0,an)}E.fromNumber=q;function S(an,ap,ao){return new E(an,ap,ao)}E.fromBits=S;var B=Math.pow;function L(ar,ap,at){if(ar.length===0){throw Error("empty string")}if(ar==="NaN"||ar==="Infinity"||ar==="+Infinity"||ar==="-Infinity"){return F}if(typeof ap==="number"){at=ap,ap=false}else{ap=!!ap}at=at||10;if(at<2||36<at){throw RangeError("radix")}var ao;if((ao=ar.indexOf("-"))>0){throw Error("interior hyphen")}else{if(ao===0){return L(ar.substring(1),ap,at).neg()}}var av=q(B(at,8));var ax=F;for(var aq=0;aq<ar.length;aq+=8){var aw=Math.min(8,ar.length-aq),au=parseInt(ar.substring(aq,aq+aw),at);if(aw<8){var an=q(B(at,aw));ax=ax.mul(an).add(q(au))}else{ax=ax.mul(av);ax=ax.add(q(au))}}ax.unsigned=ap;return ax}E.fromString=L;function K(an){if(an instanceof E){return an}if(typeof an==="number"){return q(an)}if(typeof an==="string"){return L(an)}return S(an.low,an.high,an.unsigned)}E.fromValue=K;var ai=1<<16;var al=1<<24;var i=ai*ai;var h=i*i;var C=h/2;var u=ah(al);var F=ah(0);E.ZERO=F;var m=ah(0,true);E.UZERO=m;var W=ah(1);E.ONE=W;var O=ah(1,true);E.UONE=O;var f=ah(-1);E.NEG_ONE=f;var b=S(4294967295|0,2147483647|0,false);E.MAX_VALUE=b;var D=S(4294967295|0,4294967295|0,true);E.MAX_UNSIGNED_VALUE=D;var T=S(0,2147483648|0,false);E.MIN_VALUE=T;var z=E.prototype;z.toInt=function v(){return this.unsigned?this.low>>>0:this.low};z.toNumber=function ae(){if(this.unsigned){return((this.high>>>0)*i)+(this.low>>>0)}return this.high*i+(this.low>>>0)};z.toString=function n(at){at=at||10;if(at<2||36<at){throw RangeError("radix")}if(this.isZero()){return"0"}if(this.isNegative()){if(this.eq(T)){var aq=q(at),an=this.div(aq),ap=an.mul(aq).sub(this);return an.toString(at)+ap.toInt().toString(at)}else{return"-"+this.neg().toString(at)}}var aw=q(B(at,6),this.unsigned),av=this;var ax="";while(true){var au=av.div(aw),ar=av.sub(au.mul(aw)).toInt()>>>0,ao=ar.toString(at);av=au;if(av.isZero()){return ao+ax}else{while(ao.length<6){ao="0"+ao}ax=""+ao+ax}}};z.getHighBits=function af(){return this.high};z.getHighBitsUnsigned=function p(){return this.high>>>0};z.getLowBits=function y(){return this.low};z.getLowBitsUnsigned=function U(){return this.low>>>0};z.getNumBitsAbs=function aj(){if(this.isNegative()){return this.eq(T)?64:this.neg().getNumBitsAbs()}var ao=this.high!=0?this.high:this.low;for(var an=31;an>0;an--){if((ao&(1<<an))!=0){break}}return this.high!=0?an+33:an+1};z.isZero=function R(){return this.high===0&&this.low===0};z.isNegative=function X(){return !this.unsigned&&this.high<0};z.isPositive=function ad(){return this.unsigned||this.high>=0};z.isOdd=function V(){return(this.low&1)===1};z.isEven=function x(){return(this.low&1)===0};z.equals=function N(an){if(!k(an)){an=K(an)}if(this.unsigned!==an.unsigned&&(this.high>>>31)===1&&(an.high>>>31)===1){return false}return this.high===an.high&&this.low===an.low};z.eq=z.equals;z.notEquals=function ag(an){return !this.eq(an)};z.neq=z.notEquals;z.lessThan=function t(an){return this.comp(an)<0};z.lt=z.lessThan;z.lessThanOrEqual=function Z(an){return this.comp(an)<=0};z.lte=z.lessThanOrEqual;z.greaterThan=function o(an){return this.comp(an)>0};z.gt=z.greaterThan;z.greaterThanOrEqual=function Q(an){return this.comp(an)>=0};z.gte=z.greaterThanOrEqual;z.compare=function s(ao){if(!k(ao)){ao=K(ao)}if(this.eq(ao)){return 0}var an=this.isNegative(),ap=ao.isNegative();if(an&&!ap){return -1}if(!an&&ap){return 1}if(!this.unsigned){return this.sub(ao).isNegative()?-1:1}return(ao.high>>>0)>(this.high>>>0)||(ao.high===this.high&&(ao.low>>>0)>(this.low>>>0))?-1:1};z.comp=z.compare;z.negate=function w(){if(!this.unsigned&&this.eq(T)){return T}return this.not().add(W)};z.neg=z.negate;z.add=function j(aq){if(!k(aq)){aq=K(aq)}var au=this.high>>>16;var ao=this.high&65535;var aw=this.low>>>16;var ap=this.low&65535;var ay=aq.high>>>16;var ar=aq.high&65535;var az=aq.low>>>16;var at=aq.low&65535;var aA=0,av=0,an=0,ax=0;ax+=ap+at;an+=ax>>>16;ax&=65535;an+=aw+az;av+=an>>>16;an&=65535;av+=ao+ar;aA+=av>>>16;av&=65535;aA+=au+ay;aA&=65535;return S((an<<16)|ax,(aA<<16)|av,this.unsigned)};z.subtract=function r(an){if(!k(an)){an=K(an)}return this.add(an.neg())};z.sub=z.subtract;z.multiply=function I(az){if(this.isZero()){return F}if(!k(az)){az=K(az)}if(az.isZero()){return F}if(this.eq(T)){return az.isOdd()?T:F}if(az.eq(T)){return this.isOdd()?T:F}if(this.isNegative()){if(az.isNegative()){return this.neg().mul(az.neg())}else{return this.neg().mul(az).neg()}}else{if(az.isNegative()){return this.mul(az.neg()).neg()}}if(this.lt(u)&&az.lt(u)){return q(this.toNumber()*az.toNumber(),this.unsigned)}var at=this.high>>>16;var ao=this.high&65535;var av=this.low>>>16;var ap=this.low&65535;var ax=az.high>>>16;var aq=az.high&65535;var ay=az.low>>>16;var ar=az.low&65535;var aA=0,au=0,an=0,aw=0;aw+=ap*ar;an+=aw>>>16;aw&=65535;an+=av*ar;au+=an>>>16;an&=65535;an+=ap*ay;au+=an>>>16;an&=65535;au+=ao*ar;aA+=au>>>16;au&=65535;au+=av*ay;aA+=au>>>16;au&=65535;au+=ap*aq;aA+=au>>>16;au&=65535;aA+=at*ar+ao*ay+av*aq+ap*ax;aA&=65535;return S((an<<16)|aw,(aA<<16)|au,this.unsigned)};z.mul=z.multiply;z.divide=function J(an){if(!k(an)){an=K(an)}if(an.isZero()){throw Error("division by zero")}if(this.isZero()){return this.unsigned?m:F}var at,av,aq;if(!this.unsigned){if(this.eq(T)){if(an.eq(W)||an.eq(f)){return T}else{if(an.eq(T)){return W}else{var ao=this.shr(1);at=ao.div(an).shl(1);if(at.eq(F)){return an.isNegative()?W:f}else{av=this.sub(an.mul(at));aq=at.add(av.div(an));return aq}}}}else{if(an.eq(T)){return this.unsigned?m:F}}if(this.isNegative()){if(an.isNegative()){return this.neg().div(an.neg())}return this.neg().div(an).neg()}else{if(an.isNegative()){return this.div(an.neg()).neg()}}aq=F}else{if(!an.unsigned){an=an.toUnsigned()}if(an.gt(this)){return m}if(an.gt(this.shru(1))){return O}aq=m}av=this;while(av.gte(an)){at=Math.max(1,Math.floor(av.toNumber()/an.toNumber()));var aw=Math.ceil(Math.log(at)/Math.LN2),au=(aw<=48)?1:B(2,aw-48),ap=q(at),ar=ap.mul(an);while(ar.isNegative()||ar.gt(av)){at-=au;ap=q(at,this.unsigned);ar=ap.mul(an)}if(ap.isZero()){ap=W}aq=aq.add(ap);av=av.sub(ar)}return aq};z.div=z.divide;z.modulo=function ak(an){if(!k(an)){an=K(an)}return this.sub(this.div(an).mul(an))};z.mod=z.modulo;z.not=function ac(){return S(~this.low,~this.high,this.unsigned)};z.and=function ab(an){if(!k(an)){an=K(an)}return S(this.low&an.low,this.high&an.high,this.unsigned)};z.or=function P(an){if(!k(an)){an=K(an)}return S(this.low|an.low,this.high|an.high,this.unsigned)};z.xor=function Y(an){if(!k(an)){an=K(an)}return S(this.low^an.low,this.high^an.high,this.unsigned)};z.shiftLeft=function A(an){if(k(an)){an=an.toInt()}if((an&=63)===0){return this}else{if(an<32){return S(this.low<<an,(this.high<<an)|(this.low>>>(32-an)),this.unsigned)}else{return S(0,this.low<<(an-32),this.unsigned)}}};z.shl=z.shiftLeft;z.shiftRight=function l(an){if(k(an)){an=an.toInt()}if((an&=63)===0){return this}else{if(an<32){return S((this.low>>>an)|(this.high<<(32-an)),this.high>>an,this.unsigned)}else{return S(this.high>>(an-32),this.high>=0?0:-1,this.unsigned)}}};z.shr=z.shiftRight;z.shiftRightUnsigned=function G(ap){if(k(ap)){ap=ap.toInt()}ap&=63;if(ap===0){return this}else{var ao=this.high;if(ap<32){var an=this.low;return S((an>>>ap)|(ao<<(32-ap)),ao>>>ap,this.unsigned)}else{if(ap===32){return S(ao,0,this.unsigned)}else{return S(ao>>>(ap-32),0,this.unsigned)}}}};z.shru=z.shiftRightUnsigned;z.toSigned=function am(){if(!this.unsigned){return this}return S(this.low,this.high,false)};z.toUnsigned=function H(){if(this.unsigned){return this}return S(this.low,this.high,true)};z.toBytes=function(an){return an?this.toBytesLE():this.toBytesBE()};z.toBytesLE=function(){var an=this.high,ao=this.low;return[ao&255,(ao>>>8)&255,(ao>>>16)&255,(ao>>>24)&255,an&255,(an>>>8)&255,(an>>>16)&255,(an>>>24)&255]};z.toBytesBE=function(){var an=this.high,ao=this.low;return[(an>>>24)&255,(an>>>16)&255,(an>>>8)&255,an&255,(ao>>>24)&255,(ao>>>16)&255,(ao>>>8)&255,ao&255]};return E})();var c=(function(k){var n=function(q,s,r){if(typeof q==="undefined"){q=n.DEFAULT_CAPACITY}if(typeof s==="undefined"){s=n.DEFAULT_ENDIAN}if(typeof r==="undefined"){r=n.DEFAULT_NOASSERT}if(!r){q=q|0;if(q<0){throw RangeError("Illegal capacity")}s=!!s;r=!!r}this.buffer=q===0?p:new ArrayBuffer(q);this.view=q===0?null:new Uint8Array(this.buffer);this.offset=0;this.markedOffset=-1;this.limit=q;this.littleEndian=s;this.noAssert=r};n.VERSION="5.0.1";n.LITTLE_ENDIAN=true;n.BIG_ENDIAN=false;n.DEFAULT_CAPACITY=16;n.DEFAULT_ENDIAN=n.BIG_ENDIAN;n.DEFAULT_NOASSERT=false;n.Long=k||null;var l=n.prototype;l.__isByteBuffer__;Object.defineProperty(l,"__isByteBuffer__",{value:true,enumerable:false,configurable:false});var p=new ArrayBuffer(0);var m=String.fromCharCode;function b(r){var q=0;return function(){return q<r.length?r.charCodeAt(q++):null}}function f(){var q=[],r=[];return function(){if(arguments.length===0){return r.join("")+m.apply(String,q)}if(q.length+arguments.length>1024){r.push(m.apply(String,q)),q.length=0}Array.prototype.push.apply(q,arguments)}}n.accessor=function(){return Uint8Array};n.allocate=function(q,s,r){return new n(q,s,r)};n.concat=function(z,s,r,y){if(typeof s==="boolean"||typeof s!=="string"){y=r;r=s;s=undefined}var q=0;for(var w=0,v=z.length,t;w<v;++w){if(!n.isByteBuffer(z[w])){z[w]=n.wrap(z[w],s)}t=z[w].limit-z[w].offset;if(t>0){q+=t}}if(q===0){return new n(0,r,y)}var x=new n(q,r,y),u;w=0;while(w<v){u=z[w++];t=u.limit-u.offset;if(t<=0){continue}x.view.set(u.view.subarray(u.offset,u.limit),x.offset);x.offset+=t}x.limit=x.offset;x.offset=0;return x};n.isByteBuffer=function(q){return(q&&q.__isByteBuffer__)===true};n.type=function(){return ArrayBuffer};n.wrap=function(q,s,u,t){if(typeof s!=="string"){t=u;u=s;s=undefined}if(typeof q==="string"){if(typeof s==="undefined"){s="utf8"}switch(s){case"base64":return n.fromBase64(q,u);case"hex":return n.fromHex(q,u);case"binary":return n.fromBinary(q,u);case"utf8":return n.fromUTF8(q,u);case"debug":return n.fromDebug(q,u);default:throw Error("Unsupported encoding: "+s)}}if(q===null||typeof q!=="object"){throw TypeError("Illegal buffer")}var v;if(n.isByteBuffer(q)){v=l.clone.call(q);v.markedOffset=-1;return v}if(q instanceof Uint8Array){v=new n(0,u,t);if(q.length>0){v.buffer=q.buffer;v.offset=q.byteOffset;v.limit=q.byteOffset+q.byteLength;v.view=new Uint8Array(q.buffer)}}else{if(q instanceof ArrayBuffer){v=new n(0,u,t);if(q.byteLength>0){v.buffer=q;v.offset=0;v.limit=q.byteLength;v.view=q.byteLength>0?new Uint8Array(q):null}}else{if(Object.prototype.toString.call(q)==="[object Array]"){v=new n(q.length,u,t);v.limit=q.length;for(var r=0;r<q.length;++r){v.view[r]=q[r]}}else{throw TypeError("Illegal buffer")}}}return v};l.writeBitSet=function(w,u){var q=typeof u==="undefined";if(q){u=this.offset}if(!this.noAssert){if(!(w instanceof Array)){throw TypeError("Illegal BitSet: Not an array")}if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal offset: "+u+" (not an integer)")}u>>>=0;if(u<0||u+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+u+" (+"+0+") <= "+this.buffer.byteLength)}}var r=u,x=w.length,y=(x>>3),v=0,t;u+=this.writeVarint32(x,u);while(y--){t=(!!w[v++]&1)|((!!w[v++]&1)<<1)|((!!w[v++]&1)<<2)|((!!w[v++]&1)<<3)|((!!w[v++]&1)<<4)|((!!w[v++]&1)<<5)|((!!w[v++]&1)<<6)|((!!w[v++]&1)<<7);this.writeByte(t,u++)}if(v<x){var s=0;t=0;while(v<x){t=t|((!!w[v++]&1)<<(s++))}this.writeByte(t,u++)}if(q){this.offset=u;return this}return u-r};l.readBitSet=function(t){var q=typeof t==="undefined";if(q){t=this.offset}var u=this.readVarint32(t),x=u.value,y=(x>>3),v=0,w=[],s;t+=u.length;while(y--){s=this.readByte(t++);w[v++]=!!(s&1);w[v++]=!!(s&2);w[v++]=!!(s&4);w[v++]=!!(s&8);w[v++]=!!(s&16);w[v++]=!!(s&32);w[v++]=!!(s&64);w[v++]=!!(s&128)}if(v<x){var r=0;s=this.readByte(t++);while(v<x){w[v++]=!!((s>>(r++))&1)}}if(q){this.offset=t}return w};l.readBytes=function(q,t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+q>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+q+") <= "+this.buffer.byteLength)}}var s=this.slice(t,t+q);if(r){this.offset+=q}return s};l.writeBytes=l.append;l.writeInt8=function(s,t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal value: "+s+" (not an integer)")}s|=0;if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}t+=1;var q=this.buffer.byteLength;if(t>q){this.resize((q*=2)>t?q:t)}t-=1;this.view[t]=s;if(r){this.offset+=1}return this};l.writeByte=l.writeInt8;l.readInt8=function(s){var r=typeof s==="undefined";if(r){s=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal offset: "+s+" (not an integer)")}s>>>=0;if(s<0||s+1>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+s+" (+"+1+") <= "+this.buffer.byteLength)}}var q=this.view[s];if((q&128)===128){q=-(255-q+1)}if(r){this.offset+=1}return q};l.readByte=l.readInt8;l.writeUint8=function(s,t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal value: "+s+" (not an integer)")}s>>>=0;if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}t+=1;var q=this.buffer.byteLength;if(t>q){this.resize((q*=2)>t?q:t)}t-=1;this.view[t]=s;if(r){this.offset+=1}return this};l.writeUInt8=l.writeUint8;l.readUint8=function(s){var r=typeof s==="undefined";if(r){s=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal offset: "+s+" (not an integer)")}s>>>=0;if(s<0||s+1>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+s+" (+"+1+") <= "+this.buffer.byteLength)}}var q=this.view[s];if(r){this.offset+=1}return q};l.readUInt8=l.readUint8;l.writeInt16=function(s,t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal value: "+s+" (not an integer)")}s|=0;if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}t+=2;var q=this.buffer.byteLength;if(t>q){this.resize((q*=2)>t?q:t)}t-=2;if(this.littleEndian){this.view[t+1]=(s&65280)>>>8;this.view[t]=s&255}else{this.view[t]=(s&65280)>>>8;this.view[t+1]=s&255}if(r){this.offset+=2}return this};l.writeShort=l.writeInt16;l.readInt16=function(s){var r=typeof s==="undefined";if(r){s=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal offset: "+s+" (not an integer)")}s>>>=0;if(s<0||s+2>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+s+" (+"+2+") <= "+this.buffer.byteLength)}}var q=0;if(this.littleEndian){q=this.view[s];q|=this.view[s+1]<<8}else{q=this.view[s]<<8;q|=this.view[s+1]}if((q&32768)===32768){q=-(65535-q+1)}if(r){this.offset+=2}return q};l.readShort=l.readInt16;l.writeUint16=function(s,t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal value: "+s+" (not an integer)")}s>>>=0;if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}t+=2;var q=this.buffer.byteLength;if(t>q){this.resize((q*=2)>t?q:t)}t-=2;if(this.littleEndian){this.view[t+1]=(s&65280)>>>8;this.view[t]=s&255}else{this.view[t]=(s&65280)>>>8;this.view[t+1]=s&255}if(r){this.offset+=2}return this};l.writeUInt16=l.writeUint16;l.readUint16=function(s){var r=typeof s==="undefined";if(r){s=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal offset: "+s+" (not an integer)")}s>>>=0;if(s<0||s+2>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+s+" (+"+2+") <= "+this.buffer.byteLength)}}var q=0;if(this.littleEndian){q=this.view[s];q|=this.view[s+1]<<8}else{q=this.view[s]<<8;q|=this.view[s+1]}if(r){this.offset+=2}return q};l.readUInt16=l.readUint16;l.writeInt32=function(s,t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal value: "+s+" (not an integer)")}s|=0;if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}t+=4;var q=this.buffer.byteLength;if(t>q){this.resize((q*=2)>t?q:t)}t-=4;if(this.littleEndian){this.view[t+3]=(s>>>24)&255;this.view[t+2]=(s>>>16)&255;this.view[t+1]=(s>>>8)&255;this.view[t]=s&255}else{this.view[t]=(s>>>24)&255;this.view[t+1]=(s>>>16)&255;this.view[t+2]=(s>>>8)&255;this.view[t+3]=s&255}if(r){this.offset+=4}return this};l.writeInt=l.writeInt32;l.readInt32=function(s){var r=typeof s==="undefined";if(r){s=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal offset: "+s+" (not an integer)")}s>>>=0;if(s<0||s+4>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+s+" (+"+4+") <= "+this.buffer.byteLength)}}var q=0;if(this.littleEndian){q=this.view[s+2]<<16;q|=this.view[s+1]<<8;q|=this.view[s];q+=this.view[s+3]<<24>>>0}else{q=this.view[s+1]<<16;q|=this.view[s+2]<<8;q|=this.view[s+3];q+=this.view[s]<<24>>>0}q|=0;if(r){this.offset+=4}return q};l.readInt=l.readInt32;l.writeUint32=function(s,t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal value: "+s+" (not an integer)")}s>>>=0;if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}t+=4;var q=this.buffer.byteLength;if(t>q){this.resize((q*=2)>t?q:t)}t-=4;if(this.littleEndian){this.view[t+3]=(s>>>24)&255;this.view[t+2]=(s>>>16)&255;this.view[t+1]=(s>>>8)&255;this.view[t]=s&255}else{this.view[t]=(s>>>24)&255;this.view[t+1]=(s>>>16)&255;this.view[t+2]=(s>>>8)&255;this.view[t+3]=s&255}if(r){this.offset+=4}return this};l.writeUInt32=l.writeUint32;l.readUint32=function(s){var r=typeof s==="undefined";if(r){s=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal offset: "+s+" (not an integer)")}s>>>=0;if(s<0||s+4>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+s+" (+"+4+") <= "+this.buffer.byteLength)}}var q=0;if(this.littleEndian){q=this.view[s+2]<<16;q|=this.view[s+1]<<8;q|=this.view[s];q+=this.view[s+3]<<24>>>0}else{q=this.view[s+1]<<16;q|=this.view[s+2]<<8;q|=this.view[s+3];q+=this.view[s]<<24>>>0}if(r){this.offset+=4}return q};l.readUInt32=l.readUint32;if(k){l.writeInt64=function(t,u){var s=typeof u==="undefined";if(s){u=this.offset}if(!this.noAssert){if(typeof t==="number"){t=k.fromNumber(t)}else{if(typeof t==="string"){t=k.fromString(t)}else{if(!(t&&t instanceof k)){throw TypeError("Illegal value: "+t+" (not an integer or Long)")}}}if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal offset: "+u+" (not an integer)")}u>>>=0;if(u<0||u+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+u+" (+"+0+") <= "+this.buffer.byteLength)}}if(typeof t==="number"){t=k.fromNumber(t)}else{if(typeof t==="string"){t=k.fromString(t)}}u+=8;var v=this.buffer.byteLength;if(u>v){this.resize((v*=2)>u?v:u)}u-=8;var r=t.low,q=t.high;if(this.littleEndian){this.view[u+3]=(r>>>24)&255;this.view[u+2]=(r>>>16)&255;this.view[u+1]=(r>>>8)&255;this.view[u]=r&255;u+=4;this.view[u+3]=(q>>>24)&255;this.view[u+2]=(q>>>16)&255;this.view[u+1]=(q>>>8)&255;this.view[u]=q&255}else{this.view[u]=(q>>>24)&255;this.view[u+1]=(q>>>16)&255;this.view[u+2]=(q>>>8)&255;this.view[u+3]=q&255;u+=4;this.view[u]=(r>>>24)&255;this.view[u+1]=(r>>>16)&255;this.view[u+2]=(r>>>8)&255;this.view[u+3]=r&255}if(s){this.offset+=8}return this};l.writeLong=l.writeInt64;l.readInt64=function(u){var t=typeof u==="undefined";if(t){u=this.offset}if(!this.noAssert){if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal offset: "+u+" (not an integer)")}u>>>=0;if(u<0||u+8>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+u+" (+"+8+") <= "+this.buffer.byteLength)}}var r=0,q=0;if(this.littleEndian){r=this.view[u+2]<<16;r|=this.view[u+1]<<8;r|=this.view[u];r+=this.view[u+3]<<24>>>0;u+=4;q=this.view[u+2]<<16;q|=this.view[u+1]<<8;q|=this.view[u];q+=this.view[u+3]<<24>>>0}else{q=this.view[u+1]<<16;q|=this.view[u+2]<<8;q|=this.view[u+3];q+=this.view[u]<<24>>>0;u+=4;r=this.view[u+1]<<16;r|=this.view[u+2]<<8;r|=this.view[u+3];r+=this.view[u]<<24>>>0}var s=new k(r,q,false);if(t){this.offset+=8}return s};l.readLong=l.readInt64;l.writeUint64=function(t,v){var s=typeof v==="undefined";if(s){v=this.offset}if(!this.noAssert){if(typeof t==="number"){t=k.fromNumber(t)}else{if(typeof t==="string"){t=k.fromString(t)}else{if(!(t&&t instanceof k)){throw TypeError("Illegal value: "+t+" (not an integer or Long)")}}}if(typeof v!=="number"||v%1!==0){throw TypeError("Illegal offset: "+v+" (not an integer)")}v>>>=0;if(v<0||v+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+v+" (+"+0+") <= "+this.buffer.byteLength)}}if(typeof t==="number"){t=k.fromNumber(t)}else{if(typeof t==="string"){t=k.fromString(t)}}v+=8;var u=this.buffer.byteLength;if(v>u){this.resize((u*=2)>v?u:v)}v-=8;var r=t.low,q=t.high;if(this.littleEndian){this.view[v+3]=(r>>>24)&255;this.view[v+2]=(r>>>16)&255;this.view[v+1]=(r>>>8)&255;this.view[v]=r&255;v+=4;this.view[v+3]=(q>>>24)&255;this.view[v+2]=(q>>>16)&255;this.view[v+1]=(q>>>8)&255;this.view[v]=q&255}else{this.view[v]=(q>>>24)&255;this.view[v+1]=(q>>>16)&255;this.view[v+2]=(q>>>8)&255;this.view[v+3]=q&255;v+=4;this.view[v]=(r>>>24)&255;this.view[v+1]=(r>>>16)&255;this.view[v+2]=(r>>>8)&255;this.view[v+3]=r&255}if(s){this.offset+=8}return this};l.writeUInt64=l.writeUint64;l.readUint64=function(u){var t=typeof u==="undefined";if(t){u=this.offset}if(!this.noAssert){if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal offset: "+u+" (not an integer)")}u>>>=0;if(u<0||u+8>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+u+" (+"+8+") <= "+this.buffer.byteLength)}}var r=0,q=0;if(this.littleEndian){r=this.view[u+2]<<16;r|=this.view[u+1]<<8;r|=this.view[u];r+=this.view[u+3]<<24>>>0;u+=4;q=this.view[u+2]<<16;q|=this.view[u+1]<<8;q|=this.view[u];q+=this.view[u+3]<<24>>>0}else{q=this.view[u+1]<<16;q|=this.view[u+2]<<8;q|=this.view[u+3];q+=this.view[u]<<24>>>0;u+=4;r=this.view[u+1]<<16;r|=this.view[u+2]<<8;r|=this.view[u+3];r+=this.view[u]<<24>>>0}var s=new k(r,q,true);if(t){this.offset+=8}return s};l.readUInt64=l.readUint64}function i(x,w,t,r,A){var B,v,u=A*8-r-1,z=(1<<u)-1,q=z>>1,D=-7,y=t?(A-1):0,C=t?-1:1,E=x[w+y];y+=C;B=E&((1<<(-D))-1);E>>=(-D);D+=u;for(;D>0;B=B*256+x[w+y],y+=C,D-=8){}v=B&((1<<(-D))-1);B>>=(-D);D+=r;for(;D>0;v=v*256+x[w+y],y+=C,D-=8){}if(B===0){B=1-q}else{if(B===z){return v?NaN:((E?-1:1)*Infinity)}else{v=v+Math.pow(2,r);B=B-q}}return(E?-1:1)*v*Math.pow(2,B-r)}function j(y,F,x,t,r,B){var C,v,E,u=B*8-r-1,A=(1<<u)-1,q=A>>1,w=(r===23?Math.pow(2,-24)-Math.pow(2,-77):0),z=t?0:(B-1),D=t?1:-1,G=F<0||(F===0&&1/F<0)?1:0;F=Math.abs(F);if(isNaN(F)||F===Infinity){v=isNaN(F)?1:0;C=A}else{C=Math.floor(Math.log(F)/Math.LN2);if(F*(E=Math.pow(2,-C))<1){C--;E*=2}if(C+q>=1){F+=w/E}else{F+=w*Math.pow(2,1-q)}if(F*E>=2){C++;E/=2}if(C+q>=A){v=0;C=A}else{if(C+q>=1){v=(F*E-1)*Math.pow(2,r);C=C+q}else{v=F*Math.pow(2,q-1)*Math.pow(2,r);C=0}}}for(;r>=8;y[x+z]=v&255,z+=D,v/=256,r-=8){}C=(C<<r)|v;u+=r;for(;u>0;y[x+z]=C&255,z+=D,C/=256,u-=8){}y[x+z-D]|=G*128}l.writeFloat32=function(r,t){var q=typeof t==="undefined";if(q){t=this.offset}if(!this.noAssert){if(typeof r!=="number"){throw TypeError("Illegal value: "+r+" (not a number)")}if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}t+=4;var s=this.buffer.byteLength;if(t>s){this.resize((s*=2)>t?s:t)}t-=4;j(this.view,r,t,this.littleEndian,23,4);if(q){this.offset+=4}return this};l.writeFloat=l.writeFloat32;l.readFloat32=function(s){var r=typeof s==="undefined";if(r){s=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal offset: "+s+" (not an integer)")}s>>>=0;if(s<0||s+4>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+s+" (+"+4+") <= "+this.buffer.byteLength)}}var q=i(this.view,s,this.littleEndian,23,4);if(r){this.offset+=4}return q};l.readFloat=l.readFloat32;l.writeFloat64=function(s,t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof s!=="number"){throw TypeError("Illegal value: "+s+" (not a number)")}if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}t+=8;var q=this.buffer.byteLength;if(t>q){this.resize((q*=2)>t?q:t)}t-=8;j(this.view,s,t,this.littleEndian,52,8);if(r){this.offset+=8}return this};l.writeDouble=l.writeFloat64;l.readFloat64=function(s){var r=typeof s==="undefined";if(r){s=this.offset}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal offset: "+s+" (not an integer)")}s>>>=0;if(s<0||s+8>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+s+" (+"+8+") <= "+this.buffer.byteLength)}}var q=i(this.view,s,this.littleEndian,52,8);if(r){this.offset+=8}return q};l.readDouble=l.readFloat64;n.MAX_VARINT32_BYTES=5;n.calculateVarint32=function(q){q=q>>>0;if(q<1<<7){return 1}else{if(q<1<<14){return 2}else{if(q<1<<21){return 3}else{if(q<1<<28){return 4}else{return 5}}}}};n.zigZagEncode32=function(q){return(((q|=0)<<1)^(q>>31))>>>0};n.zigZagDecode32=function(q){return((q>>>1)^-(q&1))|0};l.writeVarint32=function(u,v){var t=typeof v==="undefined";if(t){v=this.offset}if(!this.noAssert){if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal value: "+u+" (not an integer)")}u|=0;if(typeof v!=="number"||v%1!==0){throw TypeError("Illegal offset: "+v+" (not an integer)")}v>>>=0;if(v<0||v+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+v+" (+"+0+") <= "+this.buffer.byteLength)}}var r=n.calculateVarint32(u),q;v+=r;var s=this.buffer.byteLength;if(v>s){this.resize((s*=2)>v?s:v)}v-=r;u>>>=0;while(u>=128){q=(u&127)|128;this.view[v++]=q;u>>>=7}this.view[v++]=u;if(t){this.offset=v;return this}return r};l.writeVarint32ZigZag=function(q,r){return this.writeVarint32(n.zigZagEncode32(q),r)};l.readVarint32=function(u){var t=typeof u==="undefined";if(t){u=this.offset}if(!this.noAssert){if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal offset: "+u+" (not an integer)")}u>>>=0;if(u<0||u+1>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+u+" (+"+1+") <= "+this.buffer.byteLength)}}var v=0,s=0>>>0,q;do{if(!this.noAssert&&u>this.limit){var r=Error("Truncated");r.truncated=true;throw r}q=this.view[u++];if(v<5){s|=(q&127)<<(7*v)}++v}while((q&128)!==0);s|=0;if(t){this.offset=u;return s}return{value:s,length:v}};l.readVarint32ZigZag=function(r){var q=this.readVarint32(r);if(typeof q==="object"){q.value=n.zigZagDecode32(q.value)}else{q=n.zigZagDecode32(q)}return q};if(k){n.MAX_VARINT64_BYTES=10;n.calculateVarint64=function(r){if(typeof r==="number"){r=k.fromNumber(r)}else{if(typeof r==="string"){r=k.fromString(r)}}var t=r.toInt()>>>0,s=r.shiftRightUnsigned(28).toInt()>>>0,q=r.shiftRightUnsigned(56).toInt()>>>0;if(q==0){if(s==0){if(t<1<<14){return t<1<<7?1:2}else{return t<1<<21?3:4}}else{if(s<1<<14){return s<1<<7?5:6}else{return s<1<<21?7:8}}}else{return q<1<<7?9:10}};n.zigZagEncode64=function(q){if(typeof q==="number"){q=k.fromNumber(q,false)}else{if(typeof q==="string"){q=k.fromString(q,false)}else{if(q.unsigned!==false){q=q.toSigned()}}}return q.shiftLeft(1).xor(q.shiftRight(63)).toUnsigned()};n.zigZagDecode64=function(q){if(typeof q==="number"){q=k.fromNumber(q,false)}else{if(typeof q==="string"){q=k.fromString(q,false)}else{if(q.unsigned!==false){q=q.toSigned()}}}return q.shiftRightUnsigned(1).xor(q.and(k.ONE).toSigned().negate()).toSigned()};l.writeVarint64=function(u,x){var t=typeof x==="undefined";if(t){x=this.offset}if(!this.noAssert){if(typeof u==="number"){u=k.fromNumber(u)}else{if(typeof u==="string"){u=k.fromString(u)}else{if(!(u&&u instanceof k)){throw TypeError("Illegal value: "+u+" (not an integer or Long)")}}}if(typeof x!=="number"||x%1!==0){throw TypeError("Illegal offset: "+x+" (not an integer)")}x>>>=0;if(x<0||x+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+x+" (+"+0+") <= "+this.buffer.byteLength)}}if(typeof u==="number"){u=k.fromNumber(u,false)}else{if(typeof u==="string"){u=k.fromString(u,false)}else{if(u.unsigned!==false){u=u.toSigned()}}}var q=n.calculateVarint64(u),w=u.toInt()>>>0,v=u.shiftRightUnsigned(28).toInt()>>>0,s=u.shiftRightUnsigned(56).toInt()>>>0;x+=q;var r=this.buffer.byteLength;if(x>r){this.resize((r*=2)>x?r:x)}x-=q;switch(q){case 10:this.view[x+9]=(s>>>7)&1;case 9:this.view[x+8]=q!==9?(s)|128:(s)&127;case 8:this.view[x+7]=q!==8?(v>>>21)|128:(v>>>21)&127;case 7:this.view[x+6]=q!==7?(v>>>14)|128:(v>>>14)&127;case 6:this.view[x+5]=q!==6?(v>>>7)|128:(v>>>7)&127;case 5:this.view[x+4]=q!==5?(v)|128:(v)&127;case 4:this.view[x+3]=q!==4?(w>>>21)|128:(w>>>21)&127;case 3:this.view[x+2]=q!==3?(w>>>14)|128:(w>>>14)&127;case 2:this.view[x+1]=q!==2?(w>>>7)|128:(w>>>7)&127;case 1:this.view[x]=q!==1?(w)|128:(w)&127}if(t){this.offset+=q;return this}else{return q}};l.writeVarint64ZigZag=function(q,r){return this.writeVarint64(n.zigZagEncode64(q),r)};l.readVarint64=function(w){var t=typeof w==="undefined";if(t){w=this.offset}if(!this.noAssert){if(typeof w!=="number"||w%1!==0){throw TypeError("Illegal offset: "+w+" (not an integer)")}w>>>=0;if(w<0||w+1>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+w+" (+"+1+") <= "+this.buffer.byteLength)}}var x=w,v=0,u=0,s=0,q=0;q=this.view[w++];v=(q&127);if(q&128){q=this.view[w++];v|=(q&127)<<7;if((q&128)||(this.noAssert&&typeof q==="undefined")){q=this.view[w++];v|=(q&127)<<14;if((q&128)||(this.noAssert&&typeof q==="undefined")){q=this.view[w++];v|=(q&127)<<21;if((q&128)||(this.noAssert&&typeof q==="undefined")){q=this.view[w++];u=(q&127);if((q&128)||(this.noAssert&&typeof q==="undefined")){q=this.view[w++];u|=(q&127)<<7;if((q&128)||(this.noAssert&&typeof q==="undefined")){q=this.view[w++];u|=(q&127)<<14;if((q&128)||(this.noAssert&&typeof q==="undefined")){q=this.view[w++];u|=(q&127)<<21;if((q&128)||(this.noAssert&&typeof q==="undefined")){q=this.view[w++];s=(q&127);if((q&128)||(this.noAssert&&typeof q==="undefined")){q=this.view[w++];s|=(q&127)<<7;if((q&128)||(this.noAssert&&typeof q==="undefined")){throw Error("Buffer overrun")}}}}}}}}}}var r=k.fromBits(v|(u<<28),(u>>>4)|(s)<<24,false);if(t){this.offset=w;return r}else{return{value:r,length:w-x}}};l.readVarint64ZigZag=function(r){var q=this.readVarint64(r);if(q&&q.value instanceof k){q.value=n.zigZagDecode64(q.value)}else{q=n.zigZagDecode64(q)}return q}}l.writeCString=function(v,u){var t=typeof u==="undefined";if(t){u=this.offset}var r,q=v.length;if(!this.noAssert){if(typeof v!=="string"){throw TypeError("Illegal str: Not a string")}for(r=0;r<q;++r){if(v.charCodeAt(r)===0){throw RangeError("Illegal str: Contains NULL-characters")}}if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal offset: "+u+" (not an integer)")}u>>>=0;if(u<0||u+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+u+" (+"+0+") <= "+this.buffer.byteLength)}}q=o.calculateUTF16asUTF8(b(v))[1];u+=q+1;var s=this.buffer.byteLength;if(u>s){this.resize((s*=2)>u?s:u)}u-=q+1;o.encodeUTF16toUTF8(b(v),function(w){this.view[u++]=w}.bind(this));this.view[u++]=0;if(t){this.offset=u;return this}return q};l.readCString=function(u){var s=typeof u==="undefined";if(s){u=this.offset}if(!this.noAssert){if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal offset: "+u+" (not an integer)")}u>>>=0;if(u<0||u+1>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+u+" (+"+1+") <= "+this.buffer.byteLength)}}var v=u,r;var t,q=-1;o.decodeUTF8toUTF16(function(){if(q===0){return null}if(u>=this.limit){throw RangeError("Illegal range: Truncated data, "+u+" < "+this.limit)}q=this.view[u++];return q===0?null:q}.bind(this),t=f(),true);if(s){this.offset=u;return t()}else{return{string:t(),length:u-v}}};l.writeIString=function(u,t){var s=typeof t==="undefined";if(s){t=this.offset}if(!this.noAssert){if(typeof u!=="string"){throw TypeError("Illegal str: Not a string")}if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}var v=t,q;q=o.calculateUTF16asUTF8(b(u),this.noAssert)[1];t+=4+q;var r=this.buffer.byteLength;if(t>r){this.resize((r*=2)>t?r:t)}t-=4+q;if(this.littleEndian){this.view[t+3]=(q>>>24)&255;this.view[t+2]=(q>>>16)&255;this.view[t+1]=(q>>>8)&255;this.view[t]=q&255}else{this.view[t]=(q>>>24)&255;this.view[t+1]=(q>>>16)&255;this.view[t+2]=(q>>>8)&255;this.view[t+3]=q&255}t+=4;o.encodeUTF16toUTF8(b(u),function(w){this.view[t++]=w}.bind(this));if(t!==v+4+q){throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+q))}if(s){this.offset=t;return this}return t-v};l.readIString=function(t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+4>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+4+") <= "+this.buffer.byteLength)}}var u=t;var q=this.readUint32(t);var s=this.readUTF8String(q,n.METRICS_BYTES,t+=4);t+=s.length;if(r){this.offset=t;return s.string}else{return{string:s.string,length:t-u}}};n.METRICS_CHARS="c";n.METRICS_BYTES="b";l.writeUTF8String=function(u,t){var s=typeof t==="undefined";if(s){t=this.offset}if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}var q;var v=t;q=o.calculateUTF16asUTF8(b(u))[1];t+=q;var r=this.buffer.byteLength;if(t>r){this.resize((r*=2)>t?r:t)}t-=q;o.encodeUTF16toUTF8(b(u),function(w){this.view[t++]=w}.bind(this));if(s){this.offset=t;return this}return t-v};l.writeString=l.writeUTF8String;n.calculateUTF8Chars=function(q){return o.calculateUTF16asUTF8(b(q))[0]};n.calculateUTF8Bytes=function(q){return o.calculateUTF16asUTF8(b(q))[1]};n.calculateString=n.calculateUTF8Bytes;l.readUTF8String=function(t,s,w){if(typeof s==="number"){w=s;s=undefined}var u=typeof w==="undefined";if(u){w=this.offset}if(typeof s==="undefined"){s=n.METRICS_CHARS}if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal length: "+t+" (not an integer)")}t|=0;if(typeof w!=="number"||w%1!==0){throw TypeError("Illegal offset: "+w+" (not an integer)")}w>>>=0;if(w<0||w+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+w+" (+"+0+") <= "+this.buffer.byteLength)}}var r=0,x=w,v;if(s===n.METRICS_CHARS){v=f();o.decodeUTF8(function(){return r<t&&w<this.limit?this.view[w++]:null}.bind(this),function(y){++r;o.UTF8toUTF16(y,v)});if(r!==t){throw RangeError("Illegal range: Truncated data, "+r+" == "+t)}if(u){this.offset=w;return v()}else{return{string:v(),length:w-x}}}else{if(s===n.METRICS_BYTES){if(!this.noAssert){if(typeof w!=="number"||w%1!==0){throw TypeError("Illegal offset: "+w+" (not an integer)")}w>>>=0;if(w<0||w+t>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+w+" (+"+t+") <= "+this.buffer.byteLength)}}var q=w+t;o.decodeUTF8toUTF16(function(){return w<q?this.view[w++]:null}.bind(this),v=f(),this.noAssert);if(w!==q){throw RangeError("Illegal range: Truncated data, "+w+" == "+q)}if(u){this.offset=w;return v()}else{return{string:v(),length:w-x}}}else{throw TypeError("Unsupported metrics: "+s)}}};l.readString=l.readUTF8String;l.writeVString=function(v,u){var t=typeof u==="undefined";if(t){u=this.offset}if(!this.noAssert){if(typeof v!=="string"){throw TypeError("Illegal str: Not a string")}if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal offset: "+u+" (not an integer)")}u>>>=0;if(u<0||u+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+u+" (+"+0+") <= "+this.buffer.byteLength)}}var w=u,s,q;s=o.calculateUTF16asUTF8(b(v),this.noAssert)[1];q=n.calculateVarint32(s);u+=q+s;var r=this.buffer.byteLength;if(u>r){this.resize((r*=2)>u?r:u)}u-=q+s;u+=this.writeVarint32(s,u);o.encodeUTF16toUTF8(b(v),function(x){this.view[u++]=x}.bind(this));if(u!==w+s+q){throw RangeError("Illegal range: Truncated data, "+u+" == "+(u+s+q))}if(t){this.offset=u;return this}return u-w};l.readVString=function(t){var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+1>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+1+") <= "+this.buffer.byteLength)}}var u=t;var q=this.readVarint32(t);var s=this.readUTF8String(q.value,n.METRICS_BYTES,t+=q.length);t+=s.length;if(r){this.offset=t;return s.string}else{return{string:s.string,length:t-u}}};l.append=function(u,s,v){if(typeof s==="number"||typeof s!=="string"){v=s;s=undefined}var t=typeof v==="undefined";if(t){v=this.offset}if(!this.noAssert){if(typeof v!=="number"||v%1!==0){throw TypeError("Illegal offset: "+v+" (not an integer)")}v>>>=0;if(v<0||v+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+v+" (+"+0+") <= "+this.buffer.byteLength)}}if(!(u instanceof n)){u=n.wrap(u,s)}var r=u.limit-u.offset;if(r<=0){return this}v+=r;var q=this.buffer.byteLength;if(v>q){this.resize((q*=2)>v?q:v)}v-=r;this.view.set(u.view.subarray(u.offset,u.limit),v);u.offset+=r;if(t){this.offset+=r}return this};l.appendTo=function(q,r){q.append(this,r);return this};l.assert=function(q){this.noAssert=!q;return this};l.capacity=function(){return this.buffer.byteLength};l.clear=function(){this.offset=0;this.limit=this.buffer.byteLength;this.markedOffset=-1;return this};l.clone=function(r){var q=new n(0,this.littleEndian,this.noAssert);if(r){q.buffer=new ArrayBuffer(this.buffer.byteLength);q.view=new Uint8Array(q.buffer)}else{q.buffer=this.buffer;q.view=this.view}q.offset=this.offset;q.markedOffset=this.markedOffset;q.limit=this.limit;return q};l.compact=function(u,t){if(typeof u==="undefined"){u=this.offset}if(typeof t==="undefined"){t=this.limit}if(!this.noAssert){if(typeof u!=="number"||u%1!==0){throw TypeError("Illegal begin: Not an integer")}u>>>=0;if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal end: Not an integer")}t>>>=0;if(u<0||u>t||t>this.buffer.byteLength){throw RangeError("Illegal range: 0 <= "+u+" <= "+t+" <= "+this.buffer.byteLength)}}if(u===0&&t===this.buffer.byteLength){return this}var q=t-u;if(q===0){this.buffer=p;this.view=null;if(this.markedOffset>=0){this.markedOffset-=u}this.offset=0;this.limit=0;return this}var s=new ArrayBuffer(q);var r=new Uint8Array(s);r.set(this.view.subarray(u,t));this.buffer=s;this.view=r;if(this.markedOffset>=0){this.markedOffset-=u}this.offset=0;this.limit=q;return this};l.copy=function(s,q){if(typeof s==="undefined"){s=this.offset}if(typeof q==="undefined"){q=this.limit}if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal begin: Not an integer")}s>>>=0;if(typeof q!=="number"||q%1!==0){throw TypeError("Illegal end: Not an integer")}q>>>=0;if(s<0||s>q||q>this.buffer.byteLength){throw RangeError("Illegal range: 0 <= "+s+" <= "+q+" <= "+this.buffer.byteLength)}}if(s===q){return new n(0,this.littleEndian,this.noAssert)}var r=q-s,t=new n(r,this.littleEndian,this.noAssert);t.offset=0;t.limit=r;if(t.markedOffset>=0){t.markedOffset-=s}this.copyTo(t,0,s,q);return t};l.copyTo=function(u,w,s,v){var t,r;if(!this.noAssert){if(!n.isByteBuffer(u)){throw TypeError("Illegal target: Not a ByteBuffer")}}w=(r=typeof w==="undefined")?u.offset:w|0;s=(t=typeof s==="undefined")?this.offset:s|0;v=typeof v==="undefined"?this.limit:v|0;if(w<0||w>u.buffer.byteLength){throw RangeError("Illegal target range: 0 <= "+w+" <= "+u.buffer.byteLength)}if(s<0||v>this.buffer.byteLength){throw RangeError("Illegal source range: 0 <= "+s+" <= "+this.buffer.byteLength)}var q=v-s;if(q===0){return u}u.ensureCapacity(w+q);u.view.set(this.view.subarray(s,v),w);if(t){this.offset+=q}if(r){u.offset+=q}return this};l.ensureCapacity=function(q){var r=this.buffer.byteLength;if(r<q){return this.resize((r*=2)>q?r:q)}return this};l.fill=function(t,r,q){var s=typeof r==="undefined";if(s){r=this.offset}if(typeof t==="string"&&t.length>0){t=t.charCodeAt(0)}if(typeof r==="undefined"){r=this.offset}if(typeof q==="undefined"){q=this.limit}if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal value: "+t+" (not an integer)")}t|=0;if(typeof r!=="number"||r%1!==0){throw TypeError("Illegal begin: Not an integer")}r>>>=0;if(typeof q!=="number"||q%1!==0){throw TypeError("Illegal end: Not an integer")}q>>>=0;if(r<0||r>q||q>this.buffer.byteLength){throw RangeError("Illegal range: 0 <= "+r+" <= "+q+" <= "+this.buffer.byteLength)}}if(r>=q){return this}while(r<q){this.view[r++]=t}if(s){this.offset=r}return this};l.flip=function(){this.limit=this.offset;this.offset=0;return this};l.mark=function(q){q=typeof q==="undefined"?this.offset:q;if(!this.noAssert){if(typeof q!=="number"||q%1!==0){throw TypeError("Illegal offset: "+q+" (not an integer)")}q>>>=0;if(q<0||q+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+q+" (+"+0+") <= "+this.buffer.byteLength)}}this.markedOffset=q;return this};l.order=function(q){if(!this.noAssert){if(typeof q!=="boolean"){throw TypeError("Illegal littleEndian: Not a boolean")}}this.littleEndian=!!q;return this};l.LE=function(q){this.littleEndian=typeof q!=="undefined"?!!q:true;return this};l.BE=function(q){this.littleEndian=typeof q!=="undefined"?!q:false;return this};l.prepend=function(q,s,t){if(typeof s==="number"||typeof s!=="string"){t=s;s=undefined}var r=typeof t==="undefined";if(r){t=this.offset}if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: "+t+" (not an integer)")}t>>>=0;if(t<0||t+0>this.buffer.byteLength){throw RangeError("Illegal offset: 0 <= "+t+" (+"+0+") <= "+this.buffer.byteLength)}}if(!(q instanceof n)){q=n.wrap(q,s)}var v=q.limit-q.offset;if(v<=0){return this}var y=v-t;if(y>0){var u=new ArrayBuffer(this.buffer.byteLength+y);var x=new Uint8Array(u);x.set(this.view.subarray(t,this.buffer.byteLength),v);this.buffer=u;this.view=x;this.offset+=y;if(this.markedOffset>=0){this.markedOffset+=y}this.limit+=y;t+=y}else{var w=new Uint8Array(this.buffer)}this.view.set(q.view.subarray(q.offset,q.limit),t-v);q.offset=q.limit;if(r){this.offset-=v}return this};l.prependTo=function(q,r){q.prepend(this,r);return this};l.printDebug=function(q){if(typeof q!=="function"){q=console.log.bind(console)}q(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(true))};l.remaining=function(){return this.limit-this.offset};l.reset=function(){if(this.markedOffset>=0){this.offset=this.markedOffset;this.markedOffset=-1}else{this.offset=0}return this};l.resize=function(s){if(!this.noAssert){if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal capacity: "+s+" (not an integer)")}s|=0;if(s<0){throw RangeError("Illegal capacity: 0 <= "+s)}}if(this.buffer.byteLength<s){var r=new ArrayBuffer(s);var q=new Uint8Array(r);q.set(this.view);this.buffer=r;this.view=q}return this};l.reverse=function(r,q){if(typeof r==="undefined"){r=this.offset}if(typeof q==="undefined"){q=this.limit}if(!this.noAssert){if(typeof r!=="number"||r%1!==0){throw TypeError("Illegal begin: Not an integer")}r>>>=0;if(typeof q!=="number"||q%1!==0){throw TypeError("Illegal end: Not an integer")}q>>>=0;if(r<0||r>q||q>this.buffer.byteLength){throw RangeError("Illegal range: 0 <= "+r+" <= "+q+" <= "+this.buffer.byteLength)}}if(r===q){return this}Array.prototype.reverse.call(this.view.subarray(r,q));return this};l.skip=function(q){if(!this.noAssert){if(typeof q!=="number"||q%1!==0){throw TypeError("Illegal length: "+q+" (not an integer)")}q|=0}var r=this.offset+q;if(!this.noAssert){if(r<0||r>this.buffer.byteLength){throw RangeError("Illegal length: 0 <= "+this.offset+" + "+q+" <= "+this.buffer.byteLength)}}this.offset=r;return this};l.slice=function(r,q){if(typeof r==="undefined"){r=this.offset}if(typeof q==="undefined"){q=this.limit}if(!this.noAssert){if(typeof r!=="number"||r%1!==0){throw TypeError("Illegal begin: Not an integer")}r>>>=0;if(typeof q!=="number"||q%1!==0){throw TypeError("Illegal end: Not an integer")}q>>>=0;if(r<0||r>q||q>this.buffer.byteLength){throw RangeError("Illegal range: 0 <= "+r+" <= "+q+" <= "+this.buffer.byteLength)}}var s=this.clone();s.offset=r;s.limit=q;return s};l.toBuffer=function(q){var t=this.offset,s=this.limit;if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal offset: Not an integer")}t>>>=0;if(typeof s!=="number"||s%1!==0){throw TypeError("Illegal limit: Not an integer")}s>>>=0;if(t<0||t>s||s>this.buffer.byteLength){throw RangeError("Illegal range: 0 <= "+t+" <= "+s+" <= "+this.buffer.byteLength)}}if(!q&&t===0&&s===this.buffer.byteLength){return this.buffer}if(t===s){return p}var r=new ArrayBuffer(s-t);new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(t,s),0);return r};l.toArrayBuffer=l.toBuffer;l.toString=function(s,r,q){if(typeof s==="undefined"){return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")"}if(typeof s==="number"){s="utf8",r=s,q=r}switch(s){case"utf8":return this.toUTF8(r,q);case"base64":return this.toBase64(r,q);case"hex":return this.toHex(r,q);case"binary":return this.toBinary(r,q);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+s)}};var h=function(){var r={};var u=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47];var t=[];for(var s=0,q=u.length;s<q;++s){t[u[s]]=s}r.encode=function(x,y){var v,w;while((v=x())!==null){y(u[(v>>2)&63]);w=(v&3)<<4;if((v=x())!==null){w|=(v>>4)&15;y(u[(w|((v>>4)&15))&63]);w=(v&15)<<2;if((v=x())!==null){y(u[(w|((v>>6)&3))&63]),y(u[v&63])}else{y(u[w&63]),y(61)}}else{y(u[w&63]),y(61),y(61)}}};r.decode=function(y,A){var z,x,w;function v(B){throw Error("Illegal character code: "+B)}while((z=y())!==null){x=t[z];if(typeof x==="undefined"){v(z)}if((z=y())!==null){w=t[z];if(typeof w==="undefined"){v(z)}A((x<<2)>>>0|(w&48)>>4);if((z=y())!==null){x=t[z];if(typeof x==="undefined"){if(z===61){break}else{v(z)}}A(((w&15)<<4)>>>0|(x&60)>>2);if((z=y())!==null){w=t[z];if(typeof w==="undefined"){if(z===61){break}else{v(z)}}A(((x&3)<<6)>>>0|w)}}}}};r.test=function(v){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(v)};return r}();l.toBase64=function(r,q){if(typeof r==="undefined"){r=this.offset}if(typeof q==="undefined"){q=this.limit}r=r|0;q=q|0;if(r<0||q>this.capacity||r>q){throw RangeError("begin, end")}var s;h.encode(function(){return r<q?this.view[r++]:null}.bind(this),s=f());return s()};n.fromBase64=function(t,r){if(typeof t!=="string"){throw TypeError("str")}var s=new n(t.length/4*3,r),q=0;h.decode(b(t),function(u){s.view[q++]=u});s.limit=q;return s};n.btoa=function(q){return n.fromBinary(q).toBase64()};n.atob=function(q){return n.fromBase64(q).toBinary()};l.toBinary=function(r,q){if(typeof r==="undefined"){r=this.offset}if(typeof q==="undefined"){q=this.limit}r|=0;q|=0;if(r<0||q>this.capacity()||r>q){throw RangeError("begin, end")}if(r===q){return""}var s=[],t=[];while(r<q){s.push(this.view[r++]);if(s.length>=1024){t.push(String.fromCharCode.apply(String,s)),s=[]}}return t.join("")+String.fromCharCode.apply(String,s)};n.fromBinary=function(v,t){if(typeof v!=="string"){throw TypeError("str")}var s=0,r=v.length,q,u=new n(r,t);while(s<r){q=v.charCodeAt(s);if(q>255){throw RangeError("illegal char code: "+q)}u.view[s++]=q}u.limit=r;return u};l.toDebug=function(u){var t=-1,r=this.buffer.byteLength,q,w="",v="",s="";while(t<r){if(t!==-1){q=this.view[t];if(q<16){w+="0"+q.toString(16).toUpperCase()}else{w+=q.toString(16).toUpperCase()}if(u){v+=q>32&&q<127?String.fromCharCode(q):"."}}++t;if(u){if(t>0&&t%16===0&&t!==r){while(w.length<3*16+3){w+=" "}s+=w+v+"\n";w=v=""}}if(t===this.offset&&t===this.limit){w+=t===this.markedOffset?"!":"|"}else{if(t===this.offset){w+=t===this.markedOffset?"[":"<"}else{if(t===this.limit){w+=t===this.markedOffset?"]":">"}else{w+=t===this.markedOffset?"'":(u||(t!==0&&t!==r)?" ":"")}}}}if(u&&w!==" "){while(w.length<3*16+3){w+=" "}s+=w+v+"\n"}return u?s:w};n.fromDebug=function(A,s,C){var w=A.length,z=new n(((w+1)/3)|0,s,C);var y=0,x=0,q,B,v=false,D=false,r=false,t=false,u=false;while(y<w){switch(q=A.charAt(y++)){case"!":if(!C){if(D||r||t){u=true;break}D=r=t=true}z.offset=z.markedOffset=z.limit=x;v=false;break;case"|":if(!C){if(D||t){u=true;break}D=t=true}z.offset=z.limit=x;v=false;break;case"[":if(!C){if(D||r){u=true;break}D=r=true}z.offset=z.markedOffset=x;v=false;break;case"<":if(!C){if(D){u=true;break}D=true}z.offset=x;v=false;break;case"]":if(!C){if(t||r){u=true;break}t=r=true}z.limit=z.markedOffset=x;v=false;break;case">":if(!C){if(t){u=true;break}t=true}z.limit=x;v=false;break;case"'":if(!C){if(r){u=true;break}r=true}z.markedOffset=x;v=false;break;case" ":v=false;break;default:if(!C){if(v){u=true;break}}B=parseInt(q+A.charAt(y++),16);if(!C){if(isNaN(B)||B<0||B>255){throw TypeError("Illegal str: Not a debug encoded string")}}z.view[x++]=B;v=true}if(u){throw TypeError("Illegal str: Invalid symbol at "+y)}}if(!C){if(!D||!t){throw TypeError("Illegal str: Missing offset or limit")}if(x<z.buffer.byteLength){throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+x+" < "+w)}}return z};l.toHex=function(t,r){t=typeof t==="undefined"?this.offset:t;r=typeof r==="undefined"?this.limit:r;if(!this.noAssert){if(typeof t!=="number"||t%1!==0){throw TypeError("Illegal begin: Not an integer")}t>>>=0;if(typeof r!=="number"||r%1!==0){throw TypeError("Illegal end: Not an integer")}r>>>=0;if(t<0||t>r||r>this.buffer.byteLength){throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}}var s=new Array(r-t),q;while(t<r){q=this.view[t++];if(q<16){s.push("0",q.toString(16))}else{s.push(q.toString(16))}}return s.join("")};n.fromHex=function(x,v,u){if(!u){if(typeof x!=="string"){throw TypeError("Illegal str: Not a string")}if(x.length%2!==0){throw TypeError("Illegal str: Length not a multiple of 2")}}var r=x.length,w=new n((r/2)|0,v),q;for(var t=0,s=0;t<r;t+=2){q=parseInt(x.substring(t,t+2),16);if(!u){if(!isFinite(q)||q<0||q>255){throw TypeError("Illegal str: Contains non-hex characters")}}w.view[s++]=q}w.limit=s;return w};var o=function(){var q={};q.MAX_CODEPOINT=1114111;q.encodeUTF8=function(s,t){var r=null;if(typeof s==="number"){r=s,s=function(){return null}}while(r!==null||(r=s())!==null){if(r<128){t(r&127)}else{if(r<2048){t(((r>>6)&31)|192),t((r&63)|128)}else{if(r<65536){t(((r>>12)&15)|224),t(((r>>6)&63)|128),t((r&63)|128)}else{t(((r>>18)&7)|240),t(((r>>12)&63)|128),t(((r>>6)&63)|128),t((r&63)|128)}}}r=null}};q.decodeUTF8=function(v,x){var t,r,w,u,s=function(y){y=y.slice(0,y.indexOf(null));var z=Error(y.toString());z.name="TruncatedError";z.bytes=y;throw z};while((t=v())!==null){if((t&128)===0){x(t)}else{if((t&224)===192){((r=v())===null)&&s([t,r]),x(((t&31)<<6)|(r&63))}else{if((t&240)===224){((r=v())===null||(w=v())===null)&&s([t,r,w]),x(((t&15)<<12)|((r&63)<<6)|(w&63))}else{if((t&248)===240){((r=v())===null||(w=v())===null||(u=v())===null)&&s([t,r,w,u]),x(((t&7)<<18)|((r&63)<<12)|((w&63)<<6)|(u&63))}else{throw RangeError("Illegal starting byte: "+t)}}}}}};q.UTF16toUTF8=function(t,u){var s,r=null;while(true){if((s=r!==null?r:t())===null){break}if(s>=55296&&s<=57343){if((r=t())!==null){if(r>=56320&&r<=57343){u((s-55296)*1024+r-56320+65536);r=null;continue}}}u(s)}if(r!==null){u(r)}};q.UTF8toUTF16=function(s,t){var r=null;if(typeof s==="number"){r=s,s=function(){return null}}while(r!==null||(r=s())!==null){if(r<=65535){t(r)}else{r-=65536,t((r>>10)+55296),t((r%1024)+56320)}r=null}};q.encodeUTF16toUTF8=function(r,s){q.UTF16toUTF8(r,function(t){q.encodeUTF8(t,s)})};q.decodeUTF8toUTF16=function(r,s){q.decodeUTF8(r,function(t){q.UTF8toUTF16(t,s)})};q.calculateCodePoint=function(r){return(r<128)?1:(r<2048)?2:(r<65536)?3:4};q.calculateUTF8=function(t){var s,r=0;while((s=t())!==null){r+=(s<128)?1:(s<2048)?2:(s<65536)?3:4}return r};q.calculateUTF16asUTF8=function(s){var t=0,r=0;q.UTF16toUTF8(s,function(u){++t;r+=(u<128)?1:(u<2048)?2:(u<65536)?3:4});return[t,r]};return q}();l.toUTF8=function(r,q){if(typeof r==="undefined"){r=this.offset}if(typeof q==="undefined"){q=this.limit}if(!this.noAssert){if(typeof r!=="number"||r%1!==0){throw TypeError("Illegal begin: Not an integer")}r>>>=0;if(typeof q!=="number"||q%1!==0){throw TypeError("Illegal end: Not an integer")}q>>>=0;if(r<0||r>q||q>this.buffer.byteLength){throw RangeError("Illegal range: 0 <= "+r+" <= "+q+" <= "+this.buffer.byteLength)}}var t;try{o.decodeUTF8toUTF16(function(){return r<q?this.view[r++]:null}.bind(this),t=f())}catch(s){if(r!==q){throw RangeError("Illegal range: Truncated data, "+r+" != "+q)}}return t()};n.fromUTF8=function(u,s,r){if(!r){if(typeof u!=="string"){throw TypeError("Illegal str: Not a string")}}var t=new n(o.calculateUTF16asUTF8(b(u),true)[1],s,r),q=0;o.encodeUTF16toUTF8(b(u),function(v){t.view[q++]=v});t.limit=q;return t};return n})(d);var e=(function(j,k,f){var l={};l.ByteBuffer=j;l.c=j;var n=j;l.Long=k||null;l.VERSION="5.0.1";l.WIRE_TYPES={};l.WIRE_TYPES.VARINT=0;l.WIRE_TYPES.BITS64=1;l.WIRE_TYPES.LDELIM=2;l.WIRE_TYPES.STARTGROUP=3;l.WIRE_TYPES.ENDGROUP=4;l.WIRE_TYPES.BITS32=5;l.PACKABLE_WIRE_TYPES=[l.WIRE_TYPES.VARINT,l.WIRE_TYPES.BITS64,l.WIRE_TYPES.BITS32];l.TYPES={int32:{name:"int32",wireType:l.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:l.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:l.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:l.WIRE_TYPES.VARINT,defaultValue:l.Long?l.Long.ZERO:undefined},uint64:{name:"uint64",wireType:l.WIRE_TYPES.VARINT,defaultValue:l.Long?l.Long.UZERO:undefined},sint64:{name:"sint64",wireType:l.WIRE_TYPES.VARINT,defaultValue:l.Long?l.Long.ZERO:undefined},bool:{name:"bool",wireType:l.WIRE_TYPES.VARINT,defaultValue:false},"double":{name:"double",wireType:l.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:l.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:l.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:l.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:l.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:l.WIRE_TYPES.BITS64,defaultValue:l.Long?l.Long.UZERO:undefined},sfixed64:{name:"sfixed64",wireType:l.WIRE_TYPES.BITS64,defaultValue:l.Long?l.Long.ZERO:undefined},"float":{name:"float",wireType:l.WIRE_TYPES.BITS32,defaultValue:0},"enum":{name:"enum",wireType:l.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:l.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:l.WIRE_TYPES.STARTGROUP,defaultValue:null}};l.MAP_KEY_TYPES=[l.TYPES.int32,l.TYPES.sint32,l.TYPES.sfixed32,l.TYPES.uint32,l.TYPES.fixed32,l.TYPES.int64,l.TYPES.sint64,l.TYPES.sfixed64,l.TYPES.uint64,l.TYPES.fixed64,l.TYPES.bool,l.TYPES.string,l.TYPES.bytes];l.ID_MIN=1;l.ID_MAX=536870911;l.convertFieldsToCamelCase=false;l.populateAccessors=true;l.populateDefaults=true;l.Util=(function(){var b={};b.IS_NODE=!!(typeof process==="object"&&process+""==="[object process]"&&!process.browser);b.XHR=function(){var r=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];var o=null;for(var q=0;q<r.length;q++){try{o=r[q]()}catch(p){continue}break}if(!o){throw Error("XMLHttpRequest is not supported")}return o};b.fetch=function(q,o){if(o&&typeof o!="function"){o=null}if(b.IS_NODE){if(o){g.readFile(q,function(t,s){if(t){o(null)}else{o(""+s)}})}else{try{return g.readFileSync(q)}catch(r){return null}}}else{var p=b.XHR();p.open("GET",q,o?true:false);p.setRequestHeader("Accept","text/plain");if(typeof p.overrideMimeType==="function"){p.overrideMimeType("text/plain")}if(o){p.onreadystatechange=function(){if(p.readyState!=4){return}if(p.status==200||(p.status==0&&typeof p.responseText==="string")){o(p.responseText)}else{o(null)}};if(p.readyState==4){return}p.send(null)}else{p.send(null);if(p.status==200||(p.status==0&&typeof p.responseText==="string")){return p.responseText}return null}}};b.toCamelCase=function(o){return o.replace(/_([a-zA-Z])/g,function(p,q){return q.toUpperCase()})};return b})();l.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g};l.DotProto=(function(s,t){var q={};var r=function(o){this.source=o+"";this.index=0;this.line=1;this.stack=[];this._stringOpen=null};var b=r.prototype;b._readString=function(){var o=this._stringOpen==='"'?t.STRING_DQ:t.STRING_SQ;o.lastIndex=this.index-1;var y=o.exec(this.source);if(!y){throw Error("unterminated string")}this.index=o.lastIndex;this.stack.push(this._stringOpen);this._stringOpen=null;return y[1]};b.next=function(){if(this.stack.length>0){return this.stack.shift()}if(this.index>=this.source.length){return null}if(this._stringOpen!==null){return this._readString()}var y,z,A;do{y=false;while(t.WHITESPACE.test(A=this.source.charAt(this.index))){if(A==="\n"){++this.line}if(++this.index===this.source.length){return null}}if(this.source.charAt(this.index)==="/"){++this.index;if(this.source.charAt(this.index)==="/"){while(this.source.charAt(++this.index)!=="\n"){if(this.index==this.source.length){return null}}++this.index;++this.line;y=true}else{if((A=this.source.charAt(this.index))==="*"){do{if(A==="\n"){++this.line}if(++this.index===this.source.length){return null}z=A;A=this.source.charAt(this.index)}while(z!=="*"||A!=="/");++this.index;y=true}else{return"/"}}}}while(y);if(this.index===this.source.length){return null}var C=this.index;t.DELIM.lastIndex=0;var o=t.DELIM.test(this.source.charAt(C++));if(!o){while(C<this.source.length&&!t.DELIM.test(this.source.charAt(C))){++C}}var B=this.source.substring(this.index,this.index=C);if(B==='"'||B==="'"){this._stringOpen=B}return B};b.peek=function(){if(this.stack.length===0){var o=this.next();if(o===null){return null}this.stack.push(o)}return this.stack[0]};b.skip=function(y){var o=this.next();if(o!==y){throw Error("illegal '"+o+"', '"+y+"' expected")}};b.omit=function(o){if(this.peek()===o){this.next();return true}return false};b.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"};q.Tokenizer=r;var u=function(o){this.tn=new r(o);this.proto3=false};var w=u.prototype;w.parse=function(){var A={name:"[ROOT]","package":null,messages:[],enums:[],imports:[],options:{},services:[]};var y,z=true;try{while(y=this.tn.next()){switch(y){case"package":if(!z||A["package"]!==null){throw Error("unexpected 'package'")}y=this.tn.next();if(!t.TYPEREF.test(y)){throw Error("illegal package name: "+y)}this.tn.skip(";");A["package"]=y;break;case"import":if(!z){throw Error("unexpected 'import'")}y=this.tn.peek();if(y==="public"){this.tn.next()}y=this._readString();this.tn.skip(";");A.imports.push(y);break;case"syntax":if(!z){throw Error("unexpected 'syntax'")}this.tn.skip("=");if((A.syntax=this._readString())==="proto3"){this.proto3=true}this.tn.skip(";");break;case"message":this._parseMessage(A,null);z=false;break;case"enum":this._parseEnum(A);z=false;break;case"option":this._parseOption(A);break;case"service":this._parseService(A);break;case"extend":this._parseExtend(A);break;default:throw Error("unexpected '"+y+"'")}}}catch(o){o.message="Parse error at line "+this.tn.line+": "+o.message;throw o}delete A.name;return A};u.parse=function(o){return new u(o).parse()};function x(y,z){var o=-1,A=1;if(y.charAt(0)=="-"){A=-1;y=y.substring(1)}if(t.NUMBER_DEC.test(y)){o=parseInt(y)}else{if(t.NUMBER_HEX.test(y)){o=parseInt(y.substring(2),16)}else{if(t.NUMBER_OCT.test(y)){o=parseInt(y.substring(1),8)}else{throw Error("illegal id value: "+(A<0?"-":"")+y)}}}o=(A*o)|0;if(!z&&o<0){throw Error("illegal id value: "+(A<0?"-":"")+y)}return o}function p(o){var y=1;if(o.charAt(0)=="-"){y=-1;o=o.substring(1)}if(t.NUMBER_DEC.test(o)){return y*parseInt(o,10)}else{if(t.NUMBER_HEX.test(o)){return y*parseInt(o.substring(2),16)}else{if(t.NUMBER_OCT.test(o)){return y*parseInt(o.substring(1),8)}else{if(o==="inf"){return y*Infinity}else{if(o==="nan"){return NaN}else{if(t.NUMBER_FLT.test(o)){return y*parseFloat(o)}}}}}}throw Error("illegal number value: "+(y<0?"-":"")+o)}w._readString=function(){var y="",z,o;do{o=this.tn.next();if(o!=="'"&&o!=='"'){throw Error("illegal string delimiter: "+o)}y+=this.tn.next();this.tn.skip(o);z=this.tn.peek()}while(z==='"'||z==='"');return y};w._readValue=function(z){var y=this.tn.peek(),o;if(y==='"'||y==="'"){return this._readString()}this.tn.next();if(t.NUMBER.test(y)){return p(y)}if(t.BOOL.test(y)){return(y.toLowerCase()==="true")}if(z&&t.TYPEREF.test(y)){return y}throw Error("illegal value: "+y)};w._parseOption=function(z,o){var A=this.tn.next(),y=false;if(A==="("){y=true;A=this.tn.next()}if(!t.TYPEREF.test(A)){throw Error("illegal option name: "+A)}var B=A;if(y){this.tn.skip(")");B="("+B+")";A=this.tn.peek();if(t.FQTYPEREF.test(A)){B+=A;this.tn.next()}}this.tn.skip("=");this._parseOptionValue(z,B);if(!o){this.tn.skip(";")}};function v(y,z,o){if(typeof y[z]==="undefined"){y[z]=o}else{if(!Array.isArray(y[z])){y[z]=[y[z]]}y[z].push(o)}}w._parseOptionValue=function(o,z){var y=this.tn.peek();if(y!=="{"){v(o.options,z,this._readValue(true))}else{this.tn.skip("{");while((y=this.tn.next())!=="}"){if(!t.NAME.test(y)){throw Error("illegal option name: "+z+"."+y)}if(this.tn.omit(":")){v(o.options,z+"."+y,this._readValue(true))}else{this._parseOptionValue(o,z+"."+y)}}}};w._parseService=function(y){var z=this.tn.next();if(!t.NAME.test(z)){throw Error("illegal service name at line "+this.tn.line+": "+z)}var A=z;var o={name:A,rpc:{},options:{}};this.tn.skip("{");while((z=this.tn.next())!=="}"){if(z==="option"){this._parseOption(o)}else{if(z==="rpc"){this._parseServiceRPC(o)}else{throw Error("illegal service token: "+z)}}}this.tn.omit(";");y.services.push(o)};w._parseServiceRPC=function(y){var z="rpc",A=this.tn.next();if(!t.NAME.test(A)){throw Error("illegal rpc service method name: "+A)}var B=A;var o={request:null,response:null,request_stream:false,response_stream:false,options:{}};this.tn.skip("(");A=this.tn.next();if(A.toLowerCase()==="stream"){o.request_stream=true;A=this.tn.next()}if(!t.TYPEREF.test(A)){throw Error("illegal rpc service request type: "+A)}o.request=A;this.tn.skip(")");A=this.tn.next();if(A.toLowerCase()!=="returns"){throw Error("illegal rpc service request type delimiter: "+A)}this.tn.skip("(");A=this.tn.next();if(A.toLowerCase()==="stream"){o.response_stream=true;A=this.tn.next()}o.response=A;this.tn.skip(")");A=this.tn.peek();if(A==="{"){this.tn.next();while((A=this.tn.next())!=="}"){if(A==="option"){this._parseOption(o)}else{throw Error("illegal rpc service token: "+A)}}this.tn.omit(";")}else{this.tn.skip(";")}if(typeof y[z]==="undefined"){y[z]={}}y[z][B]=o};w._parseMessage=function(z,A){var o=!!A,B=this.tn.next();var y={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(B)){throw Error("illegal "+(o?"group":"message")+" name: "+B)}y.name=B;if(o){this.tn.skip("=");A.id=x(this.tn.next());y.isGroup=true}B=this.tn.peek();if(B==="["&&A){this._parseFieldOptions(A)}this.tn.skip("{");while((B=this.tn.next())!=="}"){if(t.RULE.test(B)){this._parseMessageField(y,B)}else{if(B==="oneof"){this._parseMessageOneOf(y)}else{if(B==="enum"){this._parseEnum(y)}else{if(B==="message"){this._parseMessage(y)}else{if(B==="option"){this._parseOption(y)}else{if(B==="service"){this._parseService(y)}else{if(B==="extensions"){y.extensions=this._parseExtensionRanges()}else{if(B==="reserved"){this._parseIgnored()}else{if(B==="extend"){this._parseExtend(y)}else{if(t.TYPEREF.test(B)){if(!this.proto3){throw Error("illegal field rule: "+B)}this._parseMessageField(y,"optional",B)}else{throw Error("illegal message token: "+B)}}}}}}}}}}}this.tn.omit(";");z.messages.push(y);return y};w._parseIgnored=function(){while(this.tn.peek()!==";"){this.tn.next()}this.tn.skip(";")};w._parseMessageField=function(o,y,z){if(!t.RULE.test(y)){throw Error("illegal message field rule: "+y)}var A={rule:y,type:"",name:"",options:{},id:0};var B;if(y==="map"){if(z){throw Error("illegal type: "+z)}this.tn.skip("<");B=this.tn.next();if(!t.TYPE.test(B)&&!t.TYPEREF.test(B)){throw Error("illegal message field type: "+B)}A.keytype=B;this.tn.skip(",");B=this.tn.next();if(!t.TYPE.test(B)&&!t.TYPEREF.test(B)){throw Error("illegal message field: "+B)}A.type=B;this.tn.skip(">");B=this.tn.next();if(!t.NAME.test(B)){throw Error("illegal message field name: "+B)}A.name=B;this.tn.skip("=");A.id=x(this.tn.next());B=this.tn.peek();if(B==="["){this._parseFieldOptions(A)}this.tn.skip(";")}else{z=typeof z!=="undefined"?z:this.tn.next();if(z==="group"){var C=this._parseMessage(o,A);if(!/^[A-Z]/.test(C.name)){throw Error("illegal group name: "+C.name)}A.type=C.name;A.name=C.name.toLowerCase();this.tn.omit(";")}else{if(!t.TYPE.test(z)&&!t.TYPEREF.test(z)){throw Error("illegal message field type: "+z)}A.type=z;B=this.tn.next();if(!t.NAME.test(B)){throw Error("illegal message field name: "+B)}A.name=B;this.tn.skip("=");A.id=x(this.tn.next());B=this.tn.peek();if(B==="["){this._parseFieldOptions(A)}this.tn.skip(";")}}o.fields.push(A);return A};w._parseMessageOneOf=function(o){var y=this.tn.next();if(!t.NAME.test(y)){throw Error("illegal oneof name: "+y)}var A=y,z;var B=[];this.tn.skip("{");while((y=this.tn.next())!=="}"){z=this._parseMessageField(o,"optional",y);z.oneof=A;B.push(z.id)}this.tn.omit(";");o.oneofs[A]=B};w._parseFieldOptions=function(y){this.tn.skip("[");var z,o=true;while((z=this.tn.peek())!=="]"){if(!o){this.tn.skip(",")}this._parseOption(y,true);o=false}this.tn.next()};w._parseEnum=function(o){var A={name:"",values:[],options:{}};var z=this.tn.next();if(!t.NAME.test(z)){throw Error("illegal name: "+z)}A.name=z;this.tn.skip("{");while((z=this.tn.next())!=="}"){if(z==="option"){this._parseOption(A)}else{if(!t.NAME.test(z)){throw Error("illegal name: "+z)}this.tn.skip("=");var y={name:z,id:x(this.tn.next(),true)};z=this.tn.peek();if(z==="["){this._parseFieldOptions({options:{}})}this.tn.skip(";");A.values.push(y)}}this.tn.omit(";");o.enums.push(A)};w._parseExtensionRanges=function(){var A=[];var y,z,o;do{z=[];while(true){y=this.tn.next();switch(y){case"min":o=s.ID_MIN;break;case"max":o=s.ID_MAX;break;default:o=p(y);break}z.push(o);if(z.length===2){break}if(this.tn.peek()!=="to"){z.push(o);break}this.tn.next()}A.push(z)}while(this.tn.omit(","));this.tn.skip(";");return A};w._parseExtend=function(o){var z=this.tn.next();if(!t.TYPEREF.test(z)){throw Error("illegal extend reference: "+z)}var y={ref:z,fields:[]};this.tn.skip("{");while((z=this.tn.next())!=="}"){if(t.RULE.test(z)){this._parseMessageField(y,z)}else{if(t.TYPEREF.test(z)){if(!this.proto3){throw Error("illegal field rule: "+z)}this._parseMessageField(y,"optional",z)}else{throw Error("illegal extend token: "+z)}}}this.tn.omit(";");o.messages.push(y);return y};w.toString=function(){return"Parser at line "+this.tn.line};q.Parser=u;return q})(l,l.Lang);l.Reflect=(function(V){var aa={};var Z=function(q,o,p){this.builder=q;this.parent=o;this.name=p;this.className};var ab=Z.prototype;ab.fqn=function(){var p=this.name,o=this;do{o=o.parent;if(o==null){break}p=o.name+"."+p}while(true);return p};ab.toString=function(o){return(o?this.className+" ":"")+this.fqn()};ab.build=function(){throw Error(this.toString(true)+" cannot be built directly")};aa.T=Z;var P=function(r,o,p,q,s){Z.call(this,r,o,p);this.className="Namespace";this.children=[];this.options=q||{};this.syntax=s||"proto2"};var H=P.prototype=Object.create(Z.prototype);H.getChildren=function(o){o=o||null;if(o==null){return this.children.slice()}var p=[];for(var q=0,r=this.children.length;q<r;++q){if(this.children[q] instanceof o){p.push(this.children[q])}}return p};H.addChild=function(o){var p;if(p=this.getChild(o.name)){if(p instanceof ad.Field&&p.name!==p.originalName&&this.getChild(p.originalName)===null){p.name=p.originalName}else{if(o instanceof ad.Field&&o.name!==o.originalName&&this.getChild(o.originalName)===null){o.name=o.originalName}else{throw Error("Duplicate name in namespace "+this.toString(true)+": "+o.name)}}}this.children.push(o)};H.getChild=function(o){var p=typeof o==="number"?"id":"name";for(var q=0,r=this.children.length;q<r;++q){if(this.children[q][p]===o){return this.children[q]}}return null};H.resolve=function(q,t){var s=typeof q==="string"?q.split("."):q,o=this,r=0;if(s[r]===""){while(o.parent!==null){o=o.parent}r++}var p;do{do{if(!(o instanceof aa.Namespace)){o=null;break}p=o.getChild(s[r]);if(!p||!(p instanceof aa.T)||(t&&!(p instanceof aa.Namespace))){o=null;break}o=p;r++}while(r<s.length);if(o!=null){break}if(this.parent!==null){return this.parent.resolve(q,t)}}while(o!=null);return o};H.qn=function(q){var r=[],o=q;do{r.unshift(o.name);o=o.parent}while(o!==null);for(var s=1;s<=r.length;s++){var p=r.slice(r.length-s);if(q===this.resolve(p,q instanceof aa.Namespace)){return p.join(".")}}return q.fqn()};H.build=function(){var p={};var q=this.children;for(var r=0,s=q.length,o;r<s;++r){o=q[r];if(o instanceof P){p[o.name]=o.build()}}if(Object.defineProperty){Object.defineProperty(p,"$options",{value:this.buildOpt()})}return p};H.buildOpt=function(){var q={},p=Object.keys(this.options);for(var r=0,t=p.length;r<t;++r){var s=p[r],o=this.options[p[r]];q[s]=o}return q};H.getOption=function(o){if(typeof o==="undefined"){return this.options}return typeof this.options[o]!=="undefined"?this.options[o]:null};aa.Namespace=P;var J=function(o,q,p,r){this.type=o;this.resolvedType=q;this.isMapKey=p;this.syntax=r;if(p&&V.MAP_KEY_TYPES.indexOf(o)<0){throw Error("Invalid map key type: "+o.name)}};var b=J.prototype;function F(o){if(typeof o==="string"){o=V.TYPES[o]}if(typeof o.defaultValue==="undefined"){throw Error("default value for type "+o.name+" is not supported")}if(o==V.TYPES.bytes){return new n(0)}return o.defaultValue}J.defaultFieldValue=F;function W(o,p){if(o&&typeof o.low==="number"&&typeof o.high==="number"&&typeof o.unsigned==="boolean"&&o.low===o.low&&o.high===o.high){return new V.Long(o.low,o.high,typeof p==="undefined"?o.unsigned:p)}if(typeof o==="string"){return V.Long.fromString(o,p||false,10)}if(typeof o==="number"){return V.Long.fromNumber(o,p||false)}throw Error("not convertible to Long")}b.verifyValue=function(q){var t=function(v,u){throw Error("Illegal value for "+this.toString(true)+" of type "+this.type.name+": "+v+" ("+u+")")}.bind(this);switch(this.type){case V.TYPES.int32:case V.TYPES.sint32:case V.TYPES.sfixed32:if(typeof q!=="number"||(q===q&&q%1!==0)){t(typeof q,"not an integer")}return q>4294967295?q|0:q;case V.TYPES.uint32:case V.TYPES.fixed32:if(typeof q!=="number"||(q===q&&q%1!==0)){t(typeof q,"not an integer")}return q<0?q>>>0:q;case V.TYPES.int64:case V.TYPES.sint64:case V.TYPES.sfixed64:if(V.Long){try{return W(q,false)}catch(o){t(typeof q,o.message)}}else{t(typeof q,"requires Long.js")}case V.TYPES.uint64:case V.TYPES.fixed64:if(V.Long){try{return W(q,true)}catch(o){t(typeof q,o.message)}}else{t(typeof q,"requires Long.js")}case V.TYPES.bool:if(typeof q!=="boolean"){t(typeof q,"not a boolean")}return q;case V.TYPES["float"]:case V.TYPES["double"]:if(typeof q!=="number"){t(typeof q,"not a number")}return q;case V.TYPES.string:if(typeof q!=="string"&&!(q&&q instanceof String)){t(typeof q,"not a string")}return""+q;case V.TYPES.bytes:if(j.isByteBuffer(q)){return q}return j.wrap(q);case V.TYPES["enum"]:var s=this.resolvedType.getChildren(V.Reflect.Enum.Value);for(r=0;r<s.length;r++){if(s[r].name==q){return s[r].id}else{if(s[r].id==q){return s[r].id}}}if(this.syntax==="proto3"){if(typeof q!=="number"||(q===q&&q%1!==0)){t(typeof q,"not an integer")}if(q>4294967295||q<0){t(typeof q,"not in range for uint32")}return q}else{t(q,"not a valid enum value")}case V.TYPES.group:case V.TYPES.message:if(!q||typeof q!=="object"){t(typeof q,"object expected")}if(q instanceof this.resolvedType.clazz){return q}if(q instanceof V.Builder.Message){var p={};for(var r in q){if(q.hasOwnProperty(r)){p[r]=q[r]}}q=p}return new (this.resolvedType.clazz)(q)}throw Error("[INTERNAL] Illegal value for "+this.toString(true)+": "+q+" (undefined type "+this.type+")")};b.calculateLength=function(o,q){if(q===null){return 0}var p;switch(this.type){case V.TYPES.int32:return q<0?n.calculateVarint64(q):n.calculateVarint32(q);case V.TYPES.uint32:return n.calculateVarint32(q);case V.TYPES.sint32:return n.calculateVarint32(n.zigZagEncode32(q));case V.TYPES.fixed32:case V.TYPES.sfixed32:case V.TYPES["float"]:return 4;case V.TYPES.int64:case V.TYPES.uint64:return n.calculateVarint64(q);case V.TYPES.sint64:return n.calculateVarint64(n.zigZagEncode64(q));case V.TYPES.fixed64:case V.TYPES.sfixed64:return 8;case V.TYPES.bool:return 1;case V.TYPES["enum"]:return n.calculateVarint32(q);case V.TYPES["double"]:return 8;case V.TYPES.string:p=n.calculateUTF8Bytes(q);return n.calculateVarint32(p)+p;case V.TYPES.bytes:if(q.remaining()<0){throw Error("Illegal value for "+this.toString(true)+": "+q.remaining()+" bytes remaining")}return n.calculateVarint32(q.remaining())+q.remaining();case V.TYPES.message:p=this.resolvedType.calculate(q);return n.calculateVarint32(p)+p;case V.TYPES.group:p=this.resolvedType.calculate(q);return p+n.calculateVarint32((o<<3)|V.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(true)+": "+q+" (unknown type)")};b.encodeValue=function(o,r,s){if(r===null){return s}switch(this.type){case V.TYPES.int32:if(r<0){s.writeVarint64(r)}else{s.writeVarint32(r)}break;case V.TYPES.uint32:s.writeVarint32(r);break;case V.TYPES.sint32:s.writeVarint32ZigZag(r);break;case V.TYPES.fixed32:s.writeUint32(r);break;case V.TYPES.sfixed32:s.writeInt32(r);break;case V.TYPES.int64:case V.TYPES.uint64:s.writeVarint64(r);break;case V.TYPES.sint64:s.writeVarint64ZigZag(r);break;case V.TYPES.fixed64:s.writeUint64(r);break;case V.TYPES.sfixed64:s.writeInt64(r);break;case V.TYPES.bool:if(typeof r==="string"){s.writeVarint32(r.toLowerCase()==="false"?0:!!r)}else{s.writeVarint32(r?1:0)}break;case V.TYPES["enum"]:s.writeVarint32(r);break;case V.TYPES["float"]:s.writeFloat32(r);break;case V.TYPES["double"]:s.writeFloat64(r);break;case V.TYPES.string:s.writeVString(r);break;case V.TYPES.bytes:if(r.remaining()<0){throw Error("Illegal value for "+this.toString(true)+": "+r.remaining()+" bytes remaining")}var q=r.offset;s.writeVarint32(r.remaining());s.append(r);r.offset=q;break;case V.TYPES.message:var p=new n().LE();this.resolvedType.encode(r,p);s.writeVarint32(p.offset);s.append(p.flip());break;case V.TYPES.group:this.resolvedType.encode(r,s);s.writeVarint32((o<<3)|V.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(true)+": "+r+" (unknown type)")}return s};b.decode=function(r,s,o){if(s!=this.type.wireType){throw Error("Unexpected wire type for element")}var q,p;switch(this.type){case V.TYPES.int32:return r.readVarint32()|0;case V.TYPES.uint32:return r.readVarint32()>>>0;case V.TYPES.sint32:return r.readVarint32ZigZag()|0;case V.TYPES.fixed32:return r.readUint32()>>>0;case V.TYPES.sfixed32:return r.readInt32()|0;case V.TYPES.int64:return r.readVarint64();case V.TYPES.uint64:return r.readVarint64().toUnsigned();case V.TYPES.sint64:return r.readVarint64ZigZag();case V.TYPES.fixed64:return r.readUint64();case V.TYPES.sfixed64:return r.readInt64();case V.TYPES.bool:return !!r.readVarint32();case V.TYPES["enum"]:return r.readVarint32();case V.TYPES["float"]:return r.readFloat();case V.TYPES["double"]:return r.readDouble();case V.TYPES.string:return r.readVString();case V.TYPES.bytes:p=r.readVarint32();if(r.remaining()<p){throw Error("Illegal number of bytes for "+this.toString(true)+": "+p+" required but got only "+r.remaining())}q=r.clone();q.limit=q.offset+p;r.offset+=p;return q;case V.TYPES.message:p=r.readVarint32();return this.resolvedType.decode(r,p);case V.TYPES.group:return this.resolvedType.decode(r,-1,o)}throw Error("[INTERNAL] Illegal decode type")};b.valueFromString=function(o){if(!this.isMapKey){throw Error("valueFromString() called on non-map-key element")}switch(this.type){case V.TYPES.int32:case V.TYPES.sint32:case V.TYPES.sfixed32:case V.TYPES.uint32:case V.TYPES.fixed32:return this.verifyValue(parseInt(o));case V.TYPES.int64:case V.TYPES.sint64:case V.TYPES.sfixed64:case V.TYPES.uint64:case V.TYPES.fixed64:return this.verifyValue(o);case V.TYPES.bool:return o==="true";case V.TYPES.string:return this.verifyValue(o);case V.TYPES.bytes:return n.fromBinary(o)}};b.valueToString=function(o){if(!this.isMapKey){throw Error("valueToString() called on non-map-key element")}if(this.type===V.TYPES.bytes){return o.toString("binary")}else{return o.toString()}};aa.Element=J;var ad=function(s,p,q,r,o,t){P.call(this,s,p,q,r,t);this.className="Message";this.extensions=undefined;this.clazz=null;this.isGroup=!!o;this._fields=null;this._fieldsById=null;this._fieldsByName=null};var L=ad.prototype=Object.create(P.prototype);L.build=function(s){if(this.clazz&&!s){return this.clazz}var q=(function(y,E){var A=E.getChildren(y.Reflect.Message.Field),v=E.getChildren(y.Reflect.Message.OneOf);var x=function(ak,ag){y.Builder.Message.call(this);for(var aj=0,af=v.length;aj<af;++aj){this[v[aj].name]=null}for(aj=0,af=A.length;aj<af;++aj){var ah=A[aj];this[ah.name]=ah.repeated?[]:(ah.map?new y.Map(ah):null);if((ah.required||E.syntax==="proto3")&&ah.defaultValue!==null){this[ah.name]=ah.defaultValue}}if(arguments.length>0){var ai;if(arguments.length===1&&ak!==null&&typeof ak==="object"&&(typeof ak.encode!=="function"||ak instanceof x)&&!Array.isArray(ak)&&!(ak instanceof y.Map)&&!n.isByteBuffer(ak)&&!(ak instanceof ArrayBuffer)&&!(y.Long&&ak instanceof y.Long)){this.$set(ak)}else{for(aj=0,af=arguments.length;aj<af;++aj){if(typeof(ai=arguments[aj])!=="undefined"){this.$set(A[aj].name,ai)}}}}};var B=x.prototype=Object.create(y.Builder.Message.prototype);B.add=function(af,ai,ah){var ag=E._fieldsByName[af];if(!ah){if(!ag){throw Error(this+"#"+af+" is undefined")}if(!(ag instanceof y.Reflect.Message.Field)){throw Error(this+"#"+af+" is not a field: "+ag.toString(true))}if(!ag.repeated){throw Error(this+"#"+af+" is not a repeated field")}ai=ag.verifyValue(ai,true)}if(this[af]===null){this[af]=[]}this[af].push(ai);return this};B.$add=B.add;B.set=function(ag,ak,ah){if(ag&&typeof ag==="object"){ah=ak;for(var aj in ag){if(ag.hasOwnProperty(aj)&&typeof(ak=ag[aj])!=="undefined"){this.$set(aj,ak,ah)}}return this}var ai=E._fieldsByName[ag];if(!ah){if(!ai){throw Error(this+"#"+ag+" is not a field: undefined")}if(!(ai instanceof y.Reflect.Message.Field)){throw Error(this+"#"+ag+" is not a field: "+ai.toString(true))}this[ai.name]=(ak=ai.verifyValue(ak))}else{this[ag]=ak}if(ai&&ai.oneof){var af=this[ai.oneof.name];if(ak!==null){if(af!==null&&af!==ai.name){this[af]=null}this[ai.oneof.name]=ai.name}else{if(af===ag){this[ai.oneof.name]=null}}}return this};B.$set=B.set;B.get=function(af,ag){if(ag){return this[af]}var ah=E._fieldsByName[af];if(!ah||!(ah instanceof y.Reflect.Message.Field)){throw Error(this+"#"+af+" is not a field: undefined")}if(!(ah instanceof y.Reflect.Message.Field)){throw Error(this+"#"+af+" is not a field: "+ah.toString(true))}return this[ah.name]};B.$get=B.get;for(var D=0;D<A.length;D++){var w=A[D];if(w instanceof y.Reflect.Message.ExtensionField){continue}if(E.builder.options.populateAccessors){(function(ai){var aj=ai.originalName.replace(/(_[a-zA-Z])/g,function(ak){return ak.toUpperCase().replace("_","")});aj=aj.substring(0,1).toUpperCase()+aj.substring(1);var ah=ai.originalName.replace(/([A-Z])/g,function(ak){return"_"+ak});var ag=function(al,ak){this[ai.name]=ak?al:ai.verifyValue(al);return this};var af=function(){return this[ai.name]};if(E.getChild("set"+aj)===null){B["set"+aj]=ag}if(E.getChild("set_"+ah)===null){B["set_"+ah]=ag}if(E.getChild("get"+aj)===null){B["get"+aj]=af}if(E.getChild("get_"+ah)===null){B["get_"+ah]=af}})(w)}}B.encode=function(aj,ai){if(typeof aj==="boolean"){ai=aj,aj=undefined}var af=false;if(!aj){aj=new j(),af=true}var ah=aj.littleEndian;try{E.encode(this,aj.LE(),ai);return(af?aj.flip():aj).LE(ah)}catch(ag){aj.LE(ah);throw (ag)}};x.encode=function(ag,af,ah){return new x(ag).encode(af,ah)};B.calculate=function(){return E.calculate(this)};B.encodeDelimited=function(ah){var af=false;if(!ah){ah=new n(),af=true}var ag=new n().LE();E.encode(this,ag).flip();ah.writeVarint32(ag.remaining());ah.append(ag);return af?ah.flip():ah};B.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(af){if(af.encoded){af.encoded=af.encoded.toArrayBuffer()}throw (af)}};B.toArrayBuffer=B.encodeAB;B.encodeNB=function(){try{return this.encode().toBuffer()}catch(af){if(af.encoded){af.encoded=af.encoded.toBuffer()}throw (af)}};B.toBuffer=B.encodeNB;B.encode64=function(){try{return this.encode().toBase64()}catch(af){if(af.encoded){af.encoded=af.encoded.toBase64()}throw (af)}};B.toBase64=B.encode64;B.encodeHex=function(){try{return this.encode().toHex()}catch(af){if(af.encoded){af.encoded=af.encoded.toHex()}throw (af)}};B.toHex=B.encodeHex;function u(aj,aq,at,am){if(aj===null||typeof aj!=="object"){if(am&&am instanceof y.Reflect.Enum){var al=y.Reflect.Enum.getName(am.object,aj);if(al!==null){return al}}return aj}if(n.isByteBuffer(aj)){return aq?aj.toBase64():aj.toBuffer()}if(y.Long.isLong(aj)){return at?aj.toString():y.Long.fromValue(aj)}var ao;if(Array.isArray(aj)){ao=[];aj.forEach(function(ag,af){ao[af]=u(ag,aq,at,am)});return ao}ao={};if(aj instanceof y.Map){var ai=aj.entries();for(var ar=ai.next();!ar.done;ar=ai.next()){ao[aj.keyElem.valueToString(ar.value[0])]=u(ar.value[1],aq,at,aj.valueElem.resolvedType)}return ao}var ap=aj.$type,an=undefined;for(var ak in aj){if(aj.hasOwnProperty(ak)){if(ap&&(an=ap.getChild(ak))){ao[ak]=u(aj[ak],aq,at,an.resolvedType)}else{ao[ak]=u(aj[ak],aq,at)}}}return ao}B.toRaw=function(af,ag){return u(this,!!af,!!ag,this.$type)};B.encodeJSON=function(){return JSON.stringify(u(this,true,true,this.$type))};x.decode=function(af,aj){if(typeof af==="string"){af=n.wrap(af,aj?aj:"base64")}af=n.isByteBuffer(af)?af:n.wrap(af);var ai=af.littleEndian;try{var ag=E.decode(af.LE());af.LE(ai);return ag}catch(ah){af.LE(ai);throw (ah)}};x.decodeDelimited=function(ak,aj){if(typeof ak==="string"){ak=n.wrap(ak,aj?aj:"base64")}ak=n.isByteBuffer(ak)?ak:n.wrap(ak);if(ak.remaining()<1){return null}var ag=ak.offset,af=ak.readVarint32();if(ak.remaining()<af){ak.offset=ag;return null}try{var ah=E.decode(ak.slice(ak.offset,ak.offset+af).LE());ak.offset+=af;return ah}catch(ai){ak.offset+=af;throw ai}};x.decode64=function(af){return x.decode(af,"base64")};x.decodeHex=function(af){return x.decode(af,"hex")};x.decodeJSON=function(af){return new x(JSON.parse(af))};B.toString=function(){return E.toString()};var ae;var C;var t;var z;if(Object.defineProperty){Object.defineProperty(x,"$options",{value:E.buildOpt()}),Object.defineProperty(B,"$options",{value:x["$options"]}),Object.defineProperty(x,"$type",{value:E}),Object.defineProperty(B,"$type",{value:E})}return x})(V,this);this._fields=[];this._fieldsById={};this._fieldsByName={};for(var p=0,r=this.children.length,o;p<r;p++){o=this.children[p];if(o instanceof M||o instanceof ad||o instanceof Q){if(q.hasOwnProperty(o.name)){throw Error("Illegal reflect child of "+this.toString(true)+": "+o.toString(true)+" cannot override static property '"+o.name+"'")}q[o.name]=o.build()}else{if(o instanceof ad.Field){o.build(),this._fields.push(o),this._fieldsById[o.id]=o,this._fieldsByName[o.name]=o}else{if(!(o instanceof ad.OneOf)&&!(o instanceof T)){throw Error("Illegal reflect child of "+this.toString(true)+": "+this.children[p].toString(true))}}}}return this.clazz=q};L.encode=function(o,s,r){var w=null,p;for(var q=0,t=this._fields.length,v;q<t;++q){p=this._fields[q];v=o[p.name];if(p.required&&v===null){if(w===null){w=p}}else{p.encode(r?v:p.verifyValue(v),s,o)}}if(w!==null){var u=Error("Missing at least one required field for "+this.toString(true)+": "+w);u.encoded=s;throw (u)}return s};L.calculate=function(r){for(var o=0,s=0,t=this._fields.length,q,p;s<t;++s){q=this._fields[s];p=r[q.name];if(q.required&&p===null){throw Error("Missing at least one required field for "+this.toString(true)+": "+q)}else{o+=q.calculate(p,r)}}return o};function O(p,q){var r=q.readVarint32(),s=r&7,o=r>>>3;switch(s){case V.WIRE_TYPES.VARINT:do{r=q.readUint8()}while((r&128)===128);break;case V.WIRE_TYPES.BITS64:q.offset+=8;break;case V.WIRE_TYPES.LDELIM:r=q.readVarint32();q.offset+=r;break;case V.WIRE_TYPES.STARTGROUP:O(o,q);break;case V.WIRE_TYPES.ENDGROUP:if(o===p){return false}else{throw Error("Illegal GROUPEND after unknown group: "+o+" ("+p+" expected)")}case V.WIRE_TYPES.BITS32:q.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+p+": "+s)}return true}L.decode=function(w,A,u){A=typeof A==="number"?A:-1;var C=w.offset,z=new (this.clazz)(),o,p,B,r;while(w.offset<C+A||(A===-1&&w.remaining()>0)){o=w.readVarint32();p=o&7;B=o>>>3;if(p===V.WIRE_TYPES.ENDGROUP){if(B!==u){throw Error("Illegal group end indicator for "+this.toString(true)+": "+B+" ("+(u?u+" expected":"not a group")+")")}break}if(!(r=this._fieldsById[B])){switch(p){case V.WIRE_TYPES.VARINT:w.readVarint32();break;case V.WIRE_TYPES.BITS32:w.offset+=4;break;case V.WIRE_TYPES.BITS64:w.offset+=8;break;case V.WIRE_TYPES.LDELIM:var t=w.readVarint32();w.offset+=t;break;case V.WIRE_TYPES.STARTGROUP:while(O(B,w)){}break;default:throw Error("Illegal wire type for unknown field "+B+" in "+this.toString(true)+"#decode: "+p)}continue}if(r.repeated&&!r.options.packed){z[r.name].push(r.decode(p,w))}else{if(r.map){var s=r.decode(p,w);z[r.name].set(s[0],s[1])}else{z[r.name]=r.decode(p,w);if(r.oneof){var q=z[r.oneof.name];if(q!==null&&q!==r.name){z[q]=null}z[r.oneof.name]=r.name}}}}for(var v=0,x=this._fields.length;v<x;++v){r=this._fields[v];if(z[r.name]===null){if(this.syntax==="proto3"){z[r.name]=r.defaultValue}else{if(r.required){var y=Error("Missing at least one required field for "+this.toString(true)+": "+r.name);y.decoded=z;throw (y)}else{if(V.populateDefaults&&r.defaultValue!==null){z[r.name]=r.defaultValue}}}}}return z};aa.Message=ad;var X=function(t,p,q,v,r,x,w,o,s,u){Z.call(this,t,p,x);this.className="Message.Field";this.required=q==="required";this.repeated=q==="repeated";this.map=q==="map";this.keyType=v||null;this.type=r;this.resolvedType=null;this.id=w;this.options=o||{};this.defaultValue=null;this.oneof=s||null;this.syntax=u||"proto2";this.originalName=this.name;this.element=null;this.keyElement=null;if(this.builder.options.convertFieldsToCamelCase&&!(this instanceof ad.ExtensionField)){this.name=V.Util.toCamelCase(this.name)}};var N=X.prototype=Object.create(Z.prototype);N.build=function(){this.element=new J(this.type,this.resolvedType,false,this.syntax);if(this.map){this.keyElement=new J(this.keyType,undefined,true,this.syntax)}if(this.syntax==="proto3"&&!this.repeated&&!this.map){this.defaultValue=J.defaultFieldValue(this.type)}else{if(typeof this.options["default"]!=="undefined"){this.defaultValue=this.verifyValue(this.options["default"])}}};N.verifyValue=function(o,r){r=r||false;var s=function(t,u){throw Error("Illegal value for "+this.toString(true)+" of type "+this.type.name+": "+t+" ("+u+")")}.bind(this);if(o===null){if(this.required){s(typeof o,"required")}if(this.syntax==="proto3"&&this.type!==V.TYPES.message){s(typeof o,"proto3 field without field presence cannot be null")}return null}var p;if(this.repeated&&!r){if(!Array.isArray(o)){o=[o]}var q=[];for(p=0;p<o.length;p++){q.push(this.element.verifyValue(o[p]))}return q}if(this.map&&!r){if(!(o instanceof V.Map)){if(!(o instanceof Object)){s(typeof o,"expected ProtoBuf.Map or raw object for map field")}return new V.Map(this,o)}else{return o}}if(!this.repeated&&Array.isArray(o)){s(typeof o,"no array expected")}return this.element.verifyValue(o)};N.hasWirePresence=function(o,p){if(this.syntax!=="proto3"){return(o!==null)}if(this.oneof&&p[this.oneof.name]===this.name){return true}switch(this.type){case V.TYPES.int32:case V.TYPES.sint32:case V.TYPES.sfixed32:case V.TYPES.uint32:case V.TYPES.fixed32:return o!==0;case V.TYPES.int64:case V.TYPES.sint64:case V.TYPES.sfixed64:case V.TYPES.uint64:case V.TYPES.fixed64:return o.low!==0||o.high!==0;case V.TYPES.bool:return o;case V.TYPES["float"]:case V.TYPES["double"]:return o!==0;case V.TYPES.string:return o.length>0;case V.TYPES.bytes:return o.remaining()>0;case V.TYPES["enum"]:return o!==0;case V.TYPES.message:return o!==null;default:return true}};N.encode=function(p,t,o){if(this.type===null||typeof this.type!=="object"){throw Error("[INTERNAL] Unresolved type in "+this.toString(true)+": "+this.type)}if(p===null||(this.repeated&&p.length==0)){return t}try{if(this.repeated){var s;if(this.options.packed&&V.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){t.writeVarint32((this.id<<3)|V.WIRE_TYPES.LDELIM);t.ensureCapacity(t.offset+=1);var w=t.offset;for(s=0;s<p.length;s++){this.element.encodeValue(this.id,p[s],t)}var r=t.offset-w,u=n.calculateVarint32(r);if(u>1){var v=t.slice(w,t.offset);w+=u-1;t.offset=w;t.append(v)}t.writeVarint32(r,w-u)}else{for(s=0;s<p.length;s++){t.writeVarint32((this.id<<3)|this.type.wireType),this.element.encodeValue(this.id,p[s],t)}}}else{if(this.map){p.forEach(function(x,z,A){var y=n.calculateVarint32((1<<3)|this.keyType.wireType)+this.keyElement.calculateLength(1,z)+n.calculateVarint32((2<<3)|this.type.wireType)+this.element.calculateLength(2,x);t.writeVarint32((this.id<<3)|V.WIRE_TYPES.LDELIM);t.writeVarint32(y);t.writeVarint32((1<<3)|this.keyType.wireType);this.keyElement.encodeValue(1,z,t);t.writeVarint32((2<<3)|this.type.wireType);this.element.encodeValue(2,x,t)},this)}else{if(this.hasWirePresence(p,o)){t.writeVarint32((this.id<<3)|this.type.wireType);this.element.encodeValue(this.id,p,t)}}}}catch(q){throw Error("Illegal value for "+this.toString(true)+": "+p+" ("+q+")")}return t};N.calculate=function(q,r){q=this.verifyValue(q);if(this.type===null||typeof this.type!=="object"){throw Error("[INTERNAL] Unresolved type in "+this.toString(true)+": "+this.type)}if(q===null||(this.repeated&&q.length==0)){return 0}var o=0;try{if(this.repeated){var s,t;if(this.options.packed&&V.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){o+=n.calculateVarint32((this.id<<3)|V.WIRE_TYPES.LDELIM);t=0;for(s=0;s<q.length;s++){t+=this.element.calculateLength(this.id,q[s])}o+=n.calculateVarint32(t);o+=t}else{for(s=0;s<q.length;s++){o+=n.calculateVarint32((this.id<<3)|this.type.wireType),o+=this.element.calculateLength(this.id,q[s])}}}else{if(this.map){q.forEach(function(v,x,u){var w=n.calculateVarint32((1<<3)|this.keyType.wireType)+this.keyElement.calculateLength(1,x)+n.calculateVarint32((2<<3)|this.type.wireType)+this.element.calculateLength(2,v);o+=n.calculateVarint32((this.id<<3)|V.WIRE_TYPES.LDELIM);o+=n.calculateVarint32(w);o+=w},this)}else{if(this.hasWirePresence(q,r)){o+=n.calculateVarint32((this.id<<3)|this.type.wireType);o+=this.element.calculateLength(this.id,q)}}}}catch(p){throw Error("Illegal value for "+this.toString(true)+": "+q+" ("+p+")")}return o};N.decode=function(s,x,v){var t,w;var p=(!this.map&&s==this.type.wireType)||(!v&&this.repeated&&this.options.packed&&s==V.WIRE_TYPES.LDELIM)||(this.map&&s==V.WIRE_TYPES.LDELIM);if(!p){throw Error("Illegal wire type for field "+this.toString(true)+": "+s+" ("+this.type.wireType+" expected)")}if(s==V.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&V.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){if(!v){w=x.readVarint32();w=x.offset+w;var q=[];while(x.offset<w){q.push(this.decode(this.type.wireType,x,true))}return q}}if(this.map){var r=J.defaultFieldValue(this.keyType);t=J.defaultFieldValue(this.type);w=x.readVarint32();if(x.remaining()<w){throw Error("Illegal number of bytes for "+this.toString(true)+": "+w+" required but got only "+x.remaining())}var u=x.clone();u.limit=u.offset+w;x.offset+=w;while(u.remaining()>0){var o=u.readVarint32();s=o&7;var y=o>>>3;if(y===1){r=this.keyElement.decode(u,s,y)}else{if(y===2){t=this.element.decode(u,s,y)}else{throw Error("Unexpected tag in map field key/value submessage")}}}return[r,t]}return this.element.decode(x,s,this.id)};aa.Message.Field=X;var I=function(u,q,p,r,s,o,t){X.call(this,u,q,p,null,r,s,o,t);this.extension};I.prototype=Object.create(X.prototype);aa.Message.ExtensionField=I;var G=function(q,o,p){Z.call(this,q,o,p);this.fields=[]};aa.Message.OneOf=G;var M=function(r,o,p,q,s){P.call(this,r,o,p,q,s);this.className="Enum";this.object=null};M.getName=function(s,o){var p=Object.keys(s);for(var q=0,r;q<p.length;++q){if(s[r=p[q]]===o){return r}}return null};var Y=M.prototype=Object.create(P.prototype);Y.build=function(s){if(this.object&&!s){return this.object}var p=new V.Builder.Enum(),q=this.getChildren(M.Value);for(var o=0,r=q.length;o<r;++o){p[q[o]["name"]]=q[o]["id"]}if(Object.defineProperty){Object.defineProperty(p,"$options",{value:this.buildOpt(),enumerable:false})}return this.object=p};aa.Enum=M;var R=function(r,p,q,o){Z.call(this,r,p,q);this.className="Enum.Value";this.id=o};R.prototype=Object.create(Z.prototype);aa.Enum.Value=R;var T=function(r,p,q,o){Z.call(this,r,p,q);this.field=o};T.prototype=Object.create(Z.prototype);aa.Extension=T;var Q=function(q,r,o,p){P.call(this,q,r,o,p);this.className="Service";this.clazz=null};var S=Q.prototype=Object.create(P.prototype);S.build=function(o){if(this.clazz&&!o){return this.clazz}return this.clazz=(function(r,w){var x=function(z){r.Builder.Service.call(this);this.rpcImpl=z||function(C,B,A){setTimeout(A.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}};var q=x.prototype=Object.create(r.Builder.Service.prototype);var t=w.getChildren(r.Reflect.Service.RPCMethod);for(var v=0;v<t.length;v++){(function(z){q[z.name]=function(B,A){try{try{B=z.resolvedRequestType.clazz.decode(n.wrap(B))}catch(C){if(!(C instanceof TypeError)){throw C}}if(B===null||typeof B!=="object"){throw Error("Illegal arguments")}if(!(B instanceof z.resolvedRequestType.clazz)){B=new z.resolvedRequestType.clazz(B)}this.rpcImpl(z.fqn(),B,function(E,ae){if(E){A(E);return}try{ae=z.resolvedResponseType.clazz.decode(ae)}catch(D){}if(!ae||!(ae instanceof z.resolvedResponseType.clazz)){A(Error("Illegal response type received in service method "+w.name+"#"+z.name));return}A(null,ae)})}catch(C){setTimeout(A.bind(this,C),0)}};x[z.name]=function(C,B,A){new x(C)[z.name](B,A)};if(Object.defineProperty){Object.defineProperty(x[z.name],"$options",{value:z.buildOpt()}),Object.defineProperty(q[z.name],"$options",{value:x[z.name]["$options"]})}})(t[v])}var y;var u;var p;var s;if(Object.defineProperty){Object.defineProperty(x,"$options",{value:w.buildOpt()}),Object.defineProperty(q,"$options",{value:x["$options"]}),Object.defineProperty(x,"$type",{value:w}),Object.defineProperty(q,"$type",{value:w})}return x})(V,this)};aa.Service=Q;var ac=function(r,o,p,q){Z.call(this,r,o,p);this.className="Service.Method";this.options=q||{}};var U=ac.prototype=Object.create(Z.prototype);U.buildOpt=H.buildOpt;aa.Service.Method=ac;var K=function(s,v,p,o,t,q,u,r){ac.call(this,s,v,p,r);this.className="Service.RPCMethod";this.requestName=o;this.responseName=t;this.requestStream=q;this.responseStream=u;this.resolvedRequestType=null;this.resolvedResponseType=null};K.prototype=Object.create(ac.prototype);aa.Service.RPCMethod=K;return aa})(l);l.Builder=(function(p,q,b){var o=function(t){this.ns=new b.Namespace(this,null,"");this.ptr=this.ns;this.resolved=false;this.result=null;this.files={};this.importRoot=null;this.options=t||{}};var s=o.prototype;o.isMessage=function(t){if(typeof t.name!=="string"){return false}if(typeof t.values!=="undefined"||typeof t.rpc!=="undefined"){return false}return true};o.isMessageField=function(t){if(typeof t.rule!=="string"||typeof t.name!=="string"||typeof t.type!=="string"||typeof t.id==="undefined"){return false}return true};o.isEnum=function(t){if(typeof t.name!=="string"){return false}if(typeof t.values==="undefined"||!Array.isArray(t.values)||t.values.length===0){return false}return true};o.isService=function(t){if(typeof t.name!=="string"||typeof t.rpc!=="object"||!t.rpc){return false}return true};o.isExtend=function(t){if(typeof t.ref!=="string"){return false}return true};s.reset=function(){this.ptr=this.ns;return this};s.define=function(t){if(typeof t!=="string"||!q.TYPEREF.test(t)){throw Error("illegal namespace: "+t)}t.split(".").forEach(function(u){var v=this.ptr.getChild(u);if(v===null){this.ptr.addChild(v=new b.Namespace(this,this.ptr,u))}this.ptr=v},this);return this};s.create=function(t){if(!t){return this}if(!Array.isArray(t)){t=[t]}else{if(t.length===0){return this}t=t.slice()}var u=[t];while(u.length>0){t=u.pop();if(!Array.isArray(t)){throw Error("not a valid namespace: "+JSON.stringify(t))}while(t.length>0){var w=t.shift();if(o.isMessage(w)){var v=new b.Message(this,this.ptr,w.name,w.options,w.isGroup,w.syntax);var x={};if(w.oneofs){Object.keys(w.oneofs).forEach(function(z){v.addChild(x[z]=new b.Message.OneOf(this,v,z))},this)}if(w.fields){w.fields.forEach(function(A){if(v.getChild(A.id|0)!==null){throw Error("duplicate or invalid field id in "+v.name+": "+A.id)}if(A.options&&typeof A.options!=="object"){throw Error("illegal field options in "+v.name+"#"+A.name)}var z=null;if(typeof A.oneof==="string"&&!(z=x[A.oneof])){throw Error("illegal oneof in "+v.name+"#"+A.name+": "+A.oneof)}A=new b.Message.Field(this,v,A.rule,A.keytype,A.type,A.name,A.id,A.options,z,w.syntax);if(z){z.fields.push(A)}v.addChild(A)},this)}var y=[];if(w.enums){w.enums.forEach(function(z){y.push(z)})}if(w.messages){w.messages.forEach(function(z){y.push(z)})}if(w.services){w.services.forEach(function(z){y.push(z)})}if(w.extensions){if(typeof w.extensions[0]==="number"){v.extensions=[w.extensions]}else{v.extensions=w.extensions}}this.ptr.addChild(v);if(y.length>0){u.push(t);t=y;y=null;this.ptr=v;v=null;continue}y=null}else{if(o.isEnum(w)){v=new b.Enum(this,this.ptr,w.name,w.options,w.syntax);w.values.forEach(function(z){v.addChild(new b.Enum.Value(this,v,z.name,z.id))},this);this.ptr.addChild(v)}else{if(o.isService(w)){v=new b.Service(this,this.ptr,w.name,w.options);Object.keys(w.rpc).forEach(function(z){var A=w.rpc[z];v.addChild(new b.Service.RPCMethod(this,v,z,A.request,A.response,!!A.request_stream,!!A.response_stream,A.options))},this);this.ptr.addChild(v)}else{if(o.isExtend(w)){v=this.ptr.resolve(w.ref,true);if(v){w.fields.forEach(function(C){if(v.getChild(C.id|0)!==null){throw Error("duplicate extended field id in "+v.name+": "+C.id)}if(v.extensions){var A=false;v.extensions.forEach(function(E){if(C.id>=E[0]&&C.id<=E[1]){A=true}});if(!A){throw Error("illegal extended field id in "+v.name+": "+C.id+" (not within valid ranges)")}}var D=C.name;if(this.options.convertFieldsToCamelCase){D=p.Util.toCamelCase(D)}var z=new b.Message.ExtensionField(this,v,C.rule,C.type,this.ptr.fqn()+"."+D,C.id,C.options);var B=new b.Extension(this,this.ptr,C.name,z);z.extension=B;this.ptr.addChild(B);v.addChild(z)},this)}else{if(!/\.?google\.protobuf\./.test(w.ref)){throw Error("extended message "+w.ref+" is not defined")}}}else{throw Error("not a valid definition: "+JSON.stringify(w))}}}}w=null;v=null}t=null;this.ptr=this.ptr.parent}this.resolved=false;this.result=null;return this};function r(t){if(t.messages){t.messages.forEach(function(u){u.syntax=t.syntax;r(u)})}if(t.enums){t.enums.forEach(function(u){u.syntax=t.syntax})}}s["import"]=function(D,C){var A="/";if(typeof C==="string"){if(p.Util.IS_NODE){}if(this.files[C]===true){return this.reset()}this.files[C]=true}else{if(typeof C==="object"){var F=C.root;if(p.Util.IS_NODE){}if(F.indexOf("\\")>=0||C.file.indexOf("\\")>=0){A="\\"}var z=F+A+C.file;if(this.files[z]===true){return this.reset()}this.files[z]=true}}if(D.imports&&D.imports.length>0){var x,G=false;if(typeof C==="object"){this.importRoot=C.root;G=true;x=this.importRoot;C=C.file;if(x.indexOf("\\")>=0||C.indexOf("\\")>=0){A="\\"}}else{if(typeof C==="string"){if(this.importRoot){x=this.importRoot}else{if(C.indexOf("/")>=0){x=C.replace(/\/[^\/]*$/,"");if(x===""){x="/"}}else{if(C.indexOf("\\")>=0){x=C.replace(/\\[^\\]*$/,"");A="\\"}else{x="."}}}}else{x=null}}for(var w=0;w<D.imports.length;w++){if(typeof D.imports[w]==="string"){if(!x){throw Error("cannot determine import root")}var E=D.imports[w];if(E==="google/protobuf/descriptor.proto"){continue}E=x+A+E;if(this.files[E]===true){continue}if(/\.proto$/i.test(E)&&!p.DotProto){E=E.replace(/\.proto$/,".json")}var y=p.Util.fetch(E);if(y===null){throw Error("failed to import '"+E+"' in '"+C+"': file not found")}if(/\.json$/i.test(E)){this["import"](JSON.parse(y+""),E)}else{this["import"](p.DotProto.Parser.parse(y),E)}}else{if(!C){this["import"](D.imports[w])}else{if(/\.(\w+)$/.test(C)){this["import"](D.imports[w],C.replace(/^(.+)\.(\w+)$/,function(t,u,v){return u+"_import"+w+"."+v}))}else{this["import"](D.imports[w],C+"_import"+w)}}}}if(G){this.importRoot=null}}if(D["package"]){this.define(D["package"])}if(D.syntax){r(D)}var B=this.ptr;if(D.options){Object.keys(D.options).forEach(function(t){B.options[t]=D.options[t]})}if(D.messages){this.create(D.messages),this.ptr=B}if(D.enums){this.create(D.enums),this.ptr=B}if(D.services){this.create(D.services),this.ptr=B}if(D["extends"]){this.create(D["extends"])}return this.reset()};s.resolveAll=function(){var t;if(this.ptr==null||typeof this.ptr.type==="object"){return this}if(this.ptr instanceof b.Namespace){this.ptr.children.forEach(function(u){this.ptr=u;this.resolveAll()},this)}else{if(this.ptr instanceof b.Message.Field){if(!q.TYPE.test(this.ptr.type)){if(!q.TYPEREF.test(this.ptr.type)){throw Error("illegal type reference in "+this.ptr.toString(true)+": "+this.ptr.type)}t=(this.ptr instanceof b.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,true);if(!t){throw Error("unresolvable type reference in "+this.ptr.toString(true)+": "+this.ptr.type)}this.ptr.resolvedType=t;if(t instanceof b.Enum){this.ptr.type=p.TYPES["enum"];if(this.ptr.syntax==="proto3"&&t.syntax!=="proto3"){throw Error("proto3 message cannot reference proto2 enum")}}else{if(t instanceof b.Message){this.ptr.type=t.isGroup?p.TYPES.group:p.TYPES.message}else{throw Error("illegal type reference in "+this.ptr.toString(true)+": "+this.ptr.type)}}}else{this.ptr.type=p.TYPES[this.ptr.type]}if(this.ptr.map){if(!q.TYPE.test(this.ptr.keyType)){throw Error("illegal key type for map field in "+this.ptr.toString(true)+": "+this.ptr.keyType)}this.ptr.keyType=p.TYPES[this.ptr.keyType]}}else{if(this.ptr instanceof p.Reflect.Service.Method){if(this.ptr instanceof p.Reflect.Service.RPCMethod){t=this.ptr.parent.resolve(this.ptr.requestName,true);if(!t||!(t instanceof p.Reflect.Message)){throw Error("Illegal type reference in "+this.ptr.toString(true)+": "+this.ptr.requestName)}this.ptr.resolvedRequestType=t;t=this.ptr.parent.resolve(this.ptr.responseName,true);if(!t||!(t instanceof p.Reflect.Message)){throw Error("Illegal type reference in "+this.ptr.toString(true)+": "+this.ptr.responseName)}this.ptr.resolvedResponseType=t}else{throw Error("illegal service type in "+this.ptr.toString(true))}}else{if(!(this.ptr instanceof p.Reflect.Message.OneOf)&&!(this.ptr instanceof p.Reflect.Extension)&&!(this.ptr instanceof p.Reflect.Enum.Value)){throw Error("illegal object in namespace: "+typeof(this.ptr)+": "+this.ptr)}}}}return this.reset()};s.build=function(w){this.reset();if(!this.resolved){this.resolveAll(),this.resolved=true,this.result=null}if(this.result===null){this.result=this.ns.build()}if(!w){return this.result}var u=typeof w==="string"?w.split("."):w,v=this.result;for(var t=0;t<u.length;t++){if(v[u[t]]){v=v[u[t]]}else{v=null;break}}return v};s.lookup=function(t,u){return t?this.ns.resolve(t,u):this.ns};s.toString=function(){return"Builder"};o.Message=function(){};o.Enum=function(){};o.Service=function(){};return o})(l,l.Lang,l.Reflect);l.Map=(function(q,b){var r=function(w,x){if(!w.map){throw Error("field is not a map")}this.field=w;this.keyElem=new b.Element(w.keyType,null,true,w.syntax);this.valueElem=new b.Element(w.type,w.resolvedType,false,w.syntax);this.map={};Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}});if(x){var s=Object.keys(x);for(var t=0;t<s.length;t++){var u=this.keyElem.valueFromString(s[t]);var v=this.valueElem.verifyValue(x[s[t]]);this.map[this.keyElem.valueToString(u)]={key:u,value:v}}}};var p=r.prototype;function o(s){var t=0;return{next:function(){if(t<s.length){return{done:false,value:s[t++]}}return{done:true}}}}p.clear=function(){this.map={}};p["delete"]=function(t){var s=this.keyElem.valueToString(this.keyElem.verifyValue(t));var u=s in this.map;delete this.map[s];return u};p.entries=function(){var u=[];var v=Object.keys(this.map);for(var t=0,s;t<v.length;t++){u.push([(s=this.map[v[t]]).key,s.value])}return o(u)};p.keys=function(){var t=[];var s=Object.keys(this.map);for(var u=0;u<s.length;u++){t.push(this.map[s[u]].key)}return o(t)};p.values=function(){var u=[];var s=Object.keys(this.map);for(var t=0;t<s.length;t++){u.push(this.map[s[t]].value)}return o(u)};p.forEach=function(u,t){var v=Object.keys(this.map);for(var s=0,w;s<v.length;s++){u.call(t,(w=this.map[v[s]]).value,w.key,this)}};p.set=function(u,s){var v=this.keyElem.verifyValue(u);var t=this.valueElem.verifyValue(s);this.map[this.keyElem.valueToString(v)]={key:v,value:t};return this};p.get=function(t){var s=this.keyElem.valueToString(this.keyElem.verifyValue(t));if(!(s in this.map)){return undefined}return this.map[s].value};p.has=function(t){var s=this.keyElem.valueToString(this.keyElem.verifyValue(t));return(s in this.map)};return r})(l,l.Reflect);l.loadProto=function(b,o,p){if(typeof o==="string"||(o&&typeof o.file==="string"&&typeof o.root==="string")){p=o,o=undefined}return l.loadJson(l.DotProto.Parser.parse(b),o,p)};l.protoFromString=l.loadProto;l.loadProtoFile=function(p,b,q){if(b&&typeof b==="object"){q=b,b=null}else{if(!b||typeof b!=="function"){b=null}}if(b){return l.Util.fetch(typeof p==="string"?p:p.root+"/"+p.file,function(s){if(s===null){b(Error("Failed to fetch file"));return}try{b(null,l.loadProto(s,q,p))}catch(r){b(r)}})}var o=l.Util.fetch(typeof p==="object"?p.root+"/"+p.file:p);return o===null?null:l.loadProto(o,q,p)};l.protoFromFile=l.loadProtoFile;l.newBuilder=function(b){b=b||{};if(typeof b.convertFieldsToCamelCase==="undefined"){b.convertFieldsToCamelCase=l.convertFieldsToCamelCase}if(typeof b.populateAccessors==="undefined"){b.populateAccessors=l.populateAccessors}return new l.Builder(b)};l.loadJson=function(b,o,p){if(typeof o==="string"||(o&&typeof o.file==="string"&&typeof o.root==="string")){p=o,o=null}if(!o||typeof o!=="object"){o=l.newBuilder()}if(typeof b==="string"){b=JSON.parse(b)}o["import"](b,p);o.resolveAll();return o};l.loadJsonFile=function(p,b,q){if(b&&typeof b==="object"){q=b,b=null}else{if(!b||typeof b!=="function"){b=null}}if(b){return l.Util.fetch(typeof p==="string"?p:p.root+"/"+p.file,function(s){if(s===null){b(Error("Failed to fetch file"));return}try{b(null,l.loadJson(JSON.parse(s),q,p))}catch(r){b(r)}})}var o=l.Util.fetch(typeof p==="object"?p.root+"/"+p.file:p);return o===null?null:l.loadJson(JSON.parse(o),q,p)};var m=function(b){var s,u,v,w,r,p,t,q=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);p=b.length;r=0;t="";while(r<p){do{s=q[b.charCodeAt(r++)&255]}while(r<p&&s==-1);if(s==-1){break}do{u=q[b.charCodeAt(r++)&255]}while(r<p&&u==-1);if(u==-1){break}t+=String.fromCharCode((s<<2)|((u&48)>>4));do{v=b.charCodeAt(r++)&255;if(v==61){return t}v=q[v]}while(r<p&&v==-1);if(v==-1){break}t+=String.fromCharCode(((u&15)<<4)|((v&60)>>2));do{w=b.charCodeAt(r++)&255;if(w==61){return t}w=q[w]}while(r<p&&w==-1);if(w==-1){break}t+=String.fromCharCode(((v&3)<<6)|w)}return t};var h=m("cGFja2FnZSBNb2R1bGVzOwptZXNzYWdlIHByb2J1ZiB7CiAgICBtZXNzYWdlIFNldFVzZXJTdGF0dXNJbnB1dAogICAgewogICAgICAgIG9wdGlvbmFsIGludDMyIHN0YXR1cz0xOwogICAgfQoKICAgIG1lc3NhZ2UgU2V0VXNlclN0YXR1c091dHB1dAogICAgewogICAgICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTsKICAgIH0KCiAgICBtZXNzYWdlIEdldFVzZXJTdGF0dXNJbnB1dAogICAgewogICAgICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTsKICAgIH0KCiAgICBtZXNzYWdlIEdldFVzZXJTdGF0dXNPdXRwdXQKICAgIHsKICAgICAgICBvcHRpb25hbCBzdHJpbmcgc3RhdHVzPTE7Ly8mIzIzMTvClCYjMTY4OyYjMjMwO8KIJiMxODM7JiMyMjg7JiMxOTE7JiMxNjE7JiMyMzA7woEmIzE3NTsKICAgICAgICBvcHRpb25hbCBzdHJpbmcgc3ViVXNlcklkPTI7Ly8mIzIzMjsmIzE2MjsmIzE3MTsmIzIzMjsmIzE3NDsmIzE2MjsmIzIzMzvCmMKFJiMyMzI7woDChQogICAgfQoKICAgIG1lc3NhZ2UgU3ViVXNlclN0YXR1c0lucHV0CiAgICB7CiAgICAgICAgcmVwZWF0ZWQgc3RyaW5nIHVzZXJpZCA9MTsgIC8vJiMyMzE7wpQmIzE2ODsmIzIzMDvCiCYjMTgzOyYjMjI5O8KIwpcmIzIzMjsmIzE2MTsmIzE2ODsKICAgIH0KCiAgICBtZXNzYWdlIFN1YlVzZXJTdGF0dXNPdXRwdXQKICAgIHsKICAgICAgICBvcHRpb25hbCBpbnQzMiBub3RoaW5nPTE7ICAgIC8vJiMyMjk7wo0mIzE2MDsmIzIyODsmIzE4OTvCjQogICAgfQogICAgbWVzc2FnZSBWb2lwRHluYW1pY0lucHV0CiAgICB7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgIGVuZ2luZVR5cGUgPSAxOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyBjaGFubmVsTmFtZSA9IDI7CiAgICAgICAgb3B0aW9uYWwgc3RyaW5nIGNoYW5uZWxFeHRyYSA9IDM7CiAgICB9CgogICAgbWVzc2FnZSBWb2lwRHluYW1pY091dHB1dAogICAgewogICAgICAgICByZXF1aXJlZCBzdHJpbmcgZHluYW1pY0tleT0xOwogICAgfQogICAgbWVzc2FnZSBOb3RpZnlNc2cgewogICAgICAgIHJlcXVpcmVkIGludDMyIHR5cGUgPSAxOwogICAgICAgIG9wdGlvbmFsIGludDY0IHRpbWUgPSAyOwogICAgICAgIG9wdGlvbmFsIHN0cmluZyBjaHJtSWQ9MzsKICAgIH0KICAgIG1lc3NhZ2UgU3luY1JlcXVlc3RNc2cgewogICAgICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMTsKICAgICAgICByZXF1aXJlZCBib29sIGlzcG9sbGluZyA9IDI7CiAgICAgICAgb3B0aW9uYWwgYm9vbCBpc3dlYj0zOwogICAgICAgIG9wdGlvbmFsIGJvb2wgaXNQdWxsU2VuZD00OwogICAgICAgIG9wdGlvbmFsIGJvb2wgaXNLZWVwaW5nPTU7CiAgICAgICAgb3B0aW9uYWwgaW50NjQgc2VuZEJveFN5bmNUaW1lPTY7CiAgICB9CiAgICBtZXNzYWdlIFVwU3RyZWFtTWVzc2FnZSB7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgc2Vzc2lvbklkID0gMTsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgY2xhc3NuYW1lID0gMjsKICAgICAgICByZXF1aXJlZCBieXRlcyBjb250ZW50ID0gMzsKICAgICAgICBvcHRpb25hbCBzdHJpbmcgcHVzaFRleHQgPSA0OwogICAgICAgIG9wdGlvbmFsIHN0cmluZyBhcHBEYXRhID0gNTsKICAgICAgICByZXBlYXRlZCBzdHJpbmcgdXNlcklkID0gNjsKICAgIH0KICAgIG1lc3NhZ2UgRG93blN0cmVhbU1lc3NhZ2VzIHsKICAgICAgICByZXBlYXRlZCBEb3duU3RyZWFtTWVzc2FnZSBsaXN0ID0gMTsKICAgICAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7CiAgICAgICAgb3B0aW9uYWwgYm9vbCBmaW5pc2hlZCA9IDM7CiAgICB9CiAgICBtZXNzYWdlIERvd25TdHJlYW1NZXNzYWdlIHsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgZnJvbVVzZXJJZCA9IDE7CiAgICAgICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDI7CiAgICAgICAgb3B0aW9uYWwgc3RyaW5nIGdyb3VwSWQgPSAzOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyBjbGFzc25hbWUgPSA0OwogICAgICAgIHJlcXVpcmVkIGJ5dGVzIGNvbnRlbnQgPSA1OwogICAgICAgIHJlcXVpcmVkIGludDY0IGRhdGFUaW1lID0gNjsKICAgICAgICByZXF1aXJlZCBpbnQ2NCBzdGF0dXMgPSA3OwogICAgICAgIG9wdGlvbmFsIGludDY0IGV4dHJhID0gODsKICAgICAgICBvcHRpb25hbCBzdHJpbmcgbXNnSWQgPSA5OwogICAgICAgIG9wdGlvbmFsIGludDMyIGRpcmVjdGlvbiA9IDEwOyAKICAgIH0KICAgIGVudW0gQ2hhbm5lbFR5cGUgewogICAgICAgIFBFUlNPTiA9IDE7CiAgICAgICAgUEVSU09OUyA9IDI7CiAgICAgICAgR1JPVVAgPSAzOwogICAgICAgIFRFTVBHUk9VUCA9IDQ7CiAgICAgICAgQ1VTVE9NRVJTRVJWSUNFID0gNTsKICAgICAgICBOT1RJRlkgPSA2OwogICAgICAgIE1DPTc7CiAgICAgICAgTVA9ODsKICAgIH0KICAgIG1lc3NhZ2UgQ3JlYXRlRGlzY3Vzc2lvbklucHV0IHsKICAgICAgICBvcHRpb25hbCBzdHJpbmcgbmFtZSA9IDE7CiAgICB9CiAgICBtZXNzYWdlIENyZWF0ZURpc2N1c3Npb25PdXRwdXQgewogICAgICAgIHJlcXVpcmVkIHN0cmluZyBpZCA9IDE7CiAgICB9CiAgICBtZXNzYWdlIENoYW5uZWxJbnZpdGF0aW9uSW5wdXQgewogICAgICAgIHJlcGVhdGVkIHN0cmluZyB1c2VycyA9IDE7CiAgICB9CiAgICBtZXNzYWdlIExlYXZlQ2hhbm5lbElucHV0IHsKICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsKICAgIH0KICAgIG1lc3NhZ2UgQ2hhbm5lbEV2aWN0aW9uSW5wdXQgewogICAgICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyID0gMTsKICAgIH0KICAgIG1lc3NhZ2UgUmVuYW1lQ2hhbm5lbElucHV0IHsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgbmFtZSA9IDE7CiAgICB9CiAgICBtZXNzYWdlIENoYW5uZWxJbmZvSW5wdXQgewogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxOwogICAgfQogICAgbWVzc2FnZSBDaGFubmVsSW5mb091dHB1dCB7CiAgICAgICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7CiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGNoYW5uZWxJZCA9IDI7CiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGNoYW5uZWxOYW1lID0gMzsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgYWRtaW5Vc2VySWQgPSA0OwogICAgICAgIHJlcGVhdGVkIHN0cmluZyBmaXJzdFRlblVzZXJJZHMgPSA1OwogICAgICAgIHJlcXVpcmVkIGludDMyIG9wZW5TdGF0dXMgPSA2OwogICAgfQogICAgbWVzc2FnZSBDaGFubmVsSW5mb3NJbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgcGFnZSA9IDE7CiAgICAgICAgb3B0aW9uYWwgaW50MzIgbnVtYmVyID0gMjsKICAgIH0KICAgIG1lc3NhZ2UgQ2hhbm5lbEluZm9zT3V0cHV0IHsKICAgICAgICByZXBlYXRlZCBDaGFubmVsSW5mb091dHB1dCBjaGFubmVscyA9IDE7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgdG90YWwgPSAyOwogICAgfQogICAgbWVzc2FnZSBNZW1iZXJJbmZvIHsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlck5hbWUgPSAyOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyUG9ydHJhaXQgPSAzOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyBleHRlbnNpb24gPSA0OwogICAgfQogICAgbWVzc2FnZSBHcm91cE1lbWJlcnNJbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgcGFnZSA9IDE7CiAgICAgICAgb3B0aW9uYWwgaW50MzIgbnVtYmVyID0gMjsKICAgIH0KICAgIG1lc3NhZ2UgR3JvdXBNZW1iZXJzT3V0cHV0IHsKICAgICAgICByZXBlYXRlZCBNZW1iZXJJbmZvIG1lbWJlcnMgPSAxOwogICAgICAgIHJlcXVpcmVkIGludDMyIHRvdGFsID0gMjsKICAgIH0KICAgIG1lc3NhZ2UgR2V0VXNlckluZm9JbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7CiAgICB9CiAgICBtZXNzYWdlIEdldFVzZXJJbmZvT3V0cHV0IHsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlck5hbWUgPSAyOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyUG9ydHJhaXQgPSAzOwogICAgfQogICAgbWVzc2FnZSBHZXRTZXNzaW9uSWRJbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7CiAgICB9CiAgICBtZXNzYWdlIEdldFNlc3Npb25JZE91dHB1dCB7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgc2Vzc2lvbklkID0gMTsKICAgIH0KICAgIGVudW0gRmlsZVR5cGUgewogICAgICAgIGltYWdlID0gMTsKICAgICAgICBhdWRpbyA9IDI7CiAgICAgICAgdmlkZW8gPSAzOwogICAgICAgIGZpbGUgPSA0OwogICAgfQogICAgbWVzc2FnZSBHZXRRTnVwVG9rZW5JbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgRmlsZVR5cGUgdHlwZSA9IDE7CiAgICB9CiAgICBtZXNzYWdlIEdldFFOZG93bmxvYWRVcmxJbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgRmlsZVR5cGUgdHlwZSA9IDE7CiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGtleSA9IDI7CiAgICAgICAgb3B0aW9uYWwgc3RyaW5nICBmaWxlTmFtZSA9IDM7CiAgICB9CiAgICBtZXNzYWdlIEdldFFOdXBUb2tlbk91dHB1dCB7CiAgICAgICAgcmVxdWlyZWQgaW50NjQgZGVhZGxpbmUgPSAxOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyB0b2tlbiA9IDI7CiAgICB9CiAgICBtZXNzYWdlIEdldFFOZG93bmxvYWRVcmxPdXRwdXQgewogICAgICAgIHJlcXVpcmVkIHN0cmluZyBkb3dubG9hZFVybCA9IDE7CiAgICB9CiAgICBtZXNzYWdlIEFkZDJCbGFja0xpc3RJbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7CiAgICB9CiAgICBtZXNzYWdlIFJlbW92ZUZyb21CbGFja0xpc3RJbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7CiAgICB9CiAgICBtZXNzYWdlIFF1ZXJ5QmxhY2tMaXN0SW5wdXQgewogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxOwogICAgfQogICAgbWVzc2FnZSBRdWVyeUJsYWNrTGlzdE91dHB1dCB7CiAgICAgICAgcmVwZWF0ZWQgc3RyaW5nIHVzZXJJZHMgPSAxOwogICAgfQogICAgbWVzc2FnZSBCbGFja0xpc3RTdGF0dXNJbnB1dCB7CiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7CiAgICB9CiAgICBtZXNzYWdlIEJsb2NrUHVzaElucHV0IHsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgYmxvY2tlZUlkID0gMTsKICAgIH0KICAgIG1lc3NhZ2UgTW9kaWZ5UGVybWlzc2lvbklucHV0IHsKICAgICAgICByZXF1aXJlZCBpbnQzMiBvcGVuU3RhdHVzID0gMTsKICAgIH0KICAgIG1lc3NhZ2UgR3JvdXBJbnB1dCB7CiAgICAgICAgcmVwZWF0ZWQgR3JvdXBJbmZvIGdyb3VwSW5mbyA9IDE7CiAgICB9CiAgICBtZXNzYWdlIEdyb3VwT3V0cHV0IHsKICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsKICAgIH0KICAgIG1lc3NhZ2UgR3JvdXBJbmZvIHsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgaWQgPSAxOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyBuYW1lID0gMjsKICAgIH0KICAgIG1lc3NhZ2UgR3JvdXBIYXNoSW5wdXQgewogICAgICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyBncm91cEhhc2hDb2RlID0gMjsKICAgIH0KICAgIG1lc3NhZ2UgR3JvdXBIYXNoT3V0cHV0IHsKICAgICAgICByZXF1aXJlZCBHcm91cEhhc2hUeXBlIHJlc3VsdCA9IDE7CiAgICB9CiAgICBlbnVtIEdyb3VwSGFzaFR5cGUgewogICAgICAgIGdyb3VwX3N1Y2Nlc3MgPSAweDAwOwogICAgICAgIGdyb3VwX2ZhaWx1cmUgPSAweDAxOwogICAgfQogICAgbWVzc2FnZSBDaHJtSW5wdXQgewogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxOwogICAgfQogICAgbWVzc2FnZSBDaHJtT3V0cHV0IHsKICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsKICAgIH0KICAgIG1lc3NhZ2UgQ2hybVB1bGxNc2cgewogICAgICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMTsKICAgICAgICByZXF1aXJlZCBpbnQzMiBjb3VudCA9IDI7CiAgICB9CiAgICAKICAgIG1lc3NhZ2UgQ2hybVB1bGxNc2dOZXcgIC8vJiMyMjk7JiMxNzQ7JiMxNjI7JiMyMzA7wogmIzE4MzsmIzIzMTsmIzE3MTsmIzE3NTsmIzIzMDvCliYjMTc2OyYjMjMxO8KawoQmIzIzMDvCi8KJJiMyMjk7wo/CliYjMjMyO8KBwoomIzIyOTsmIzE2NDsmIzE2OTsmIzIyOTsmIzE3NDsmIzE2NDsmIzIzMDsmIzE4MjvCiCYjMjMwO8KBJiMxNzU7CiAgICB7CiAgICAgcmVxdWlyZWQgaW50MzIgY291bnQgPSAxOy8vJiMyMzA7wovCiSYjMjI5O8KPwpYmIzIzMDvCnSYjMTYxOyYjMjMwO8KVJiMxNzY7ICAgMDomIzIzMzvCgMKaJiMyMzE7wp8mIzE2NTsmIzIzMDvCi8KJJiMyMjk7wo/CliAgICYjMjMzO8Kdwp4wJiMyMzk7JiMxODg7wpomIzIyODsmIzE4NDsmIzE4NzsmIzIyOTvCiiYjMTY4OyYjMjMwO8KLwokmIzIyOTvCj8KWJiMyMjk7wo7ChiYjMjI5O8KPJiMxNzg7JiMyMzA7JiMxODI7wogmIzIzMDvCgSYjMTc1OyYjMjMwO8KdJiMxNjE7JiMyMzA7wpUmIzE3NjsKICAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7Ly8mIzIyOTvCkMKMJiMyMzA7JiMxNzM7JiMxNjU7JiMyMzA7wovCiSYjMjI5O8KPwpYmIzIzMDvClyYjMTgyOyYjMjMzO8KXJiMxODA7CiAgICAgb3B0aW9uYWwgc3RyaW5nIGNocm1JZD0zOy8vJiMyMzI7woHCiiYjMjI5OyYjMTY0OyYjMTY5OyYjMjI5OyYjMTc0OyYjMTY0O0lECiAgICB9CiAgICAKICAgIG1lc3NhZ2UgUmVsYXRpb25zSW5wdXQKICAgIHsKICAgICAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTsKICAgICAgICBvcHRpb25hbCBEb3duU3RyZWFtTWVzc2FnZSBtc2cgPTI7CiAgICAgICAgb3B0aW9uYWwgaW50MzIgY291bnQgPSAzOwogICAgICAgIG9wdGlvbmFsIGludDMyIG9mZnNldCA9IDQ7CiAgICAgICAgb3B0aW9uYWwgaW50NjQgc3RhcnRUaW1lID0gNTsKICAgICAgICBvcHRpb25hbCBpbnQ2NCBlbmRUaW1lID0gNjsKICAgIH0KICAgIG1lc3NhZ2UgUmVsYXRpb25zT3V0cHV0CiAgICB7CiAgICAgICAgcmVwZWF0ZWQgUmVsYXRpb25JbmZvIGluZm8gPSAxOwogICAgfQogICAgbWVzc2FnZSBSZWxhdGlvbkluZm8KICAgIHsKICAgICAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMjsKICAgICAgICBvcHRpb25hbCBEb3duU3RyZWFtTWVzc2FnZSBtc2cgPTM7CiAgICAgICAgb3B0aW9uYWwgaW50NjQgcmVhZE1zZ1RpbWU9IDQ7CiAgICB9CiAgICBtZXNzYWdlIFJlbGF0aW9uSW5mb1JlYWRUaW1lCiAgICB7CiAgICAgICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7CiAgICAgICAgcmVxdWlyZWQgaW50NjQgcmVhZE1zZ1RpbWU9IDI7CiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHRhcmdldElkID0gMzsKICAgIH0KICAgIG1lc3NhZ2UgQ2xlYW5IaXNNc2dJbnB1dAogICAgewogICAgICAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQgPSAxOy8vJiMyMjk7wo8mIzE3NTsmIzIzMjvCgyYjMTg5OyYjMjMwO8KYJiMxNzU7JiMyMzE7wpQmIzE2ODsmIzIzMDvCiCYjMTgzO2lkJiMyMzk7JiMxODg7wowmIzIzMTsmIzE5MDsmIzE2NDsmIzIzMTsmIzE4NzvChGlkJiMyMzE7JiMxNzM7wokmIzIyNzvCgMKCCiAgICAgICAgIHJlcXVpcmVkIGludDY0IGRhdGFUaW1lID0gMjsvLyYjMjMwOyYjMTg0O8KFJiMyMzM7wpkmIzE2NDsmIzIzMDvClyYjMTgyOyYjMjMzO8KXJiMxODA7CiAgICAgICAgIG9wdGlvbmFsIGludDMyIGNvbnZlcnNhdGlvblR5cGU9IDM7Ly8gJiMyMjk7JiMxNjQ7wocmIzIzMzvCgMKJJiMyMjk7JiMxNzM7wpcmIzIzMDsmIzE3NDsmIzE4MTsmIzIzMDvCmsKCJiMyMjg7JiMxODQ7wo0mIzIzMzvCnMKAJiMyMzI7JiMxNjY7woEKICAgIH0KICAgIG1lc3NhZ2UgSGlzdG9yeU1lc3NhZ2VJbnB1dAogICAgewogICAgICAgIHJlcXVpcmVkIHN0cmluZyB0YXJnZXRJZCA9IDE7CiAgICAgICAgcmVxdWlyZWQgaW50NjQgZGF0YVRpbWUgPTI7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgc2l6ZSAgPSAzOwogICAgfQoKICAgIG1lc3NhZ2UgSGlzdG9yeU1lc3NhZ2VzT3VwdXQKICAgIHsKICAgICAgICByZXBlYXRlZCBEb3duU3RyZWFtTWVzc2FnZSBsaXN0ID0gMTsKICAgICAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7CiAgICAgICAgcmVxdWlyZWQgaW50MzIgaGFzTXNnID0gMzsKICAgIH0KICAgIG1lc3NhZ2UgUXVlcnlDaGF0cm9vbUluZm9JbnB1dAogICAgewogICAgIHJlcXVpcmVkIGludDMyIGNvdW50PSAxOy8vJiMyMzA7wpzCnyYjMjMwO8KcwpsmIzIzMjvCjiYjMTgzOyYjMjI5O8KPwpYmIzIzMjvCgcKKJiMyMjk7JiMxNjQ7JiMxNjk7JiMyMjk7JiMxNzQ7JiMxNjQ7JiMyMzE7wpQmIzE2ODsmIzIzMDvCiCYjMTgzOyYjMjMxO8KawoQmIzIyODsmIzE4NjsmIzE4NjsmIzIzMDvClSYjMTc2OyYjMjM5OyYjMTg4O8KMJiMyMzI7wozCgyYjMjI5O8KbJiMxODA7JiMyMjg7JiMxODQ7JiMxODY7MH4yMAogICAgIG9wdGlvbmFsIGludDMyIG9yZGVyPSAyOy8vJiMyMzA7wozCiSYjMjMwO8KXJiMxODI7JiMyMzM7wpcmIzE4MDsmIzIzMDvCjsKSJiMyMjk7JiMxODY7wo8mIzIzOTsmIzE4ODvCjCYjMjMyO8KMwoMmIzIyOTvCmyYjMTgwOyYjMjM5OyYjMTg4O8KaMCYjMjM5OyYjMTg4O8KMMSYjMjM5OyYjMTg4O8KMMi4mIzIzOTsmIzE4ODvCiDA6JiMyMjg7JiMxODQ7wo0mIzIzMjsmIzE5MTvClCYjMjI5O8Kbwp4mIzIzOTsmIzE4ODvCmzE6JiMyMzA7JiMxNzM7JiMxNjM7JiMyMjk7JiMxODY7wo8oJiMyMzA7wpzCgCYjMjMwO8KXJiMxNjk7JiMyMjk7woomIzE2MDsmIzIyOTvChSYjMTY1OykmIzIzOTsmIzE4ODvCmzI6JiMyMjk7woDCkiYjMjI5OyYjMTg2O8KPKCYjMjMwO8KcwoAmIzIzMDvCmcKaJiMyMjk7woomIzE2MDsmIzIyOTvChSYjMTY1OykmIzIzOTsmIzE4ODvCiQogICAgfQoKICAgIG1lc3NhZ2UgUXVlcnlDaGF0cm9vbUluZm9PdXRwdXQKICAgIHsKICAgICBvcHRpb25hbCBpbnQzMiB1c2VyVG90YWxOdW1zID0gMTsvLyYjMjI5OyYjMTg5O8KTJiMyMjk7wonCjSYjMjMyO8KBwoomIzIyOTsmIzE2NDsmIzE2OTsmIzIyOTsmIzE3NDsmIzE2NDsmIzIyODsmIzE4NDsmIzE3MzsmIzIzMTvCmsKEJiMyMzA7woAmIzE4NzsmIzIyODsmIzE4NjsmIzE4NjsmIzIzMDvClSYjMTc2OwogICAgIHJlcGVhdGVkIENocm1NZW1iZXIgdXNlckluZm9zID0gMjsvLyYjMjMyOyYjMTkxO8KUJiMyMjk7wpvCniYjMjMzO8KDJiMxNjg7JiMyMjk7wojChiYjMjMxO8KUJiMxNjg7JiMyMzA7wogmIzE4MzsmIzIyODsmIzE5MTsmIzE2MTsmIzIzMDvCgSYjMTc1OyYjMjI5O8KIwpcmIzIzMjsmIzE2MTsmIzE2ODsmIzIzOTsmIzE4ODvCiCYjMjI5O8KPJiMxNzA7JiMyMjk7wozChSYjMjI5O8KQJiMxNzE7dXNlcklkJiMyMjk7wpLCjGpvaW5UaW1lJiMyMjk7JiMxNzc7wp4mIzIzMDvCgCYjMTY3OyYjMjM5OyYjMTg4O8KJCiAgICB9CiAgICBtZXNzYWdlIENocm1NZW1iZXIKICAgIHsKICAgICByZXF1aXJlZCBpbnQ2NCB0aW1lID0gMTsvL01lbWJlciYjMjMxO8KawoRqb2luVGltZQogICAgIHJlcXVpcmVkIHN0cmluZyBpZCA9IDI7Ly9NZW1iZXImIzIzMTvCmsKEdXNlcklkCiAgICB9CiAgICBtZXNzYWdlIE1QRm9sbG93SW5wdXQgIC8vbXAmIzIyOTvChSYjMTc5OyYjMjMwOyYjMTc5OyYjMTY4Oy8mIzIyOTvCj8KWJiMyMzA7JiMxODI7wogmIzIyOTvChSYjMTc5OyYjMjMwOyYjMTc5OyYjMTY4OwogICAgewogICAgICAgIHJlcXVpcmVkIHN0cmluZyBpZCA9IDE7Ly9tcGlkCiAgICB9CgogICAgbWVzc2FnZSBNUEZvbGxvd091dHB1dAogICAgewogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxOy8vJiMyMjk7wo0mIzE2MDsmIzIyODsmIzE4OTvCjSYjMjI5OyYjMTczO8KXJiMyMzA7JiMxNzQ7JiMxODE7CiAgICAgICAgb3B0aW9uYWwgTXBJbmZvIGluZm8gPTI7Ly8mIzIyOTvChSYjMTc5OyYjMjMwOyYjMTc5OyYjMTY4OyYjMjMxO8KawoRtcGluZm8KICAgIH0KCiAgICBtZXNzYWdlIE1DRm9sbG93SW5wdXQgICAvL21jJiMyMjk7woUmIzE3OTsmIzIzMDsmIzE3OTsmIzE2ODsvJiMyMjk7wo/CliYjMjMwOyYjMTgyO8KIJiMyMjk7woUmIzE3OTsmIzIzMDsmIzE3OTsmIzE2ODsKICAgIHsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgaWQgPSAxOy8vbWNpZAogICAgfQoKICAgIG1lc3NhZ2UgTUNGb2xsb3dPdXRwdXQKICAgIHsKICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsvLyYjMjI5O8KNJiMxNjA7JiMyMjg7JiMxODk7wo0mIzIyOTsmIzE3MzvClyYjMjMwOyYjMTc0OyYjMTgxOwogICAgICAgIG9wdGlvbmFsIE1wSW5mbyBpbmZvID0yOy8vJiMyMjk7woUmIzE3OTsmIzIzMDsmIzE3OTsmIzE2ODsmIzIzMTvCmsKEbXBpbmZvCiAgICB9CgogICAgbWVzc2FnZSBNcEluZm8gIC8vbXAmIzIyOTvCnyYjMTg2OyYjMjMwO8KcJiMxNzI7JiMyMjg7JiMxOTE7JiMxNjE7JiMyMzA7woEmIzE3NTsKICAgIHsKICAgICAgICByZXF1aXJlZCBzdHJpbmcgbXBpZD0xOy8vbXAvbWNpZAogICAgICAgIHJlcXVpcmVkIHN0cmluZyBuYW1lID0gMjsvL2Rpc3BsYXlOYW1lCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHR5cGUgPSAzOy8vbXAvbWMKICAgICAgICByZXF1aXJlZCBpbnQ2NCB0aW1lPTQ7Ly8mIzIyOTvChSYjMTcyOyYjMjI4OyYjMTg4O8KXJiMyMjk7JiMxODQ7wpAmIzIyOTvCjyYjMTgzOyYjMjI4OyYjMTkxOyYjMTc0OyYjMjMwO8KUJiMxODU7JiMyMzA7wpcmIzE4MjsmIzIzMzvClyYjMTgwOwogICAgICAgIG9wdGlvbmFsIHN0cmluZyBwb3J0cmFpdFVybD01Oy8vJiMyMjk7JiMxNjQ7JiMxODA7JiMyMjk7woPCjwogICAgICAgIG9wdGlvbmFsIHN0cmluZyBleHRyYSA9NjsvLyYjMjI5O8KFJiMxODI7JiMyMjg7JiMxODc7wpYmIzIyODsmIzE5MTsmIzE2MTsmIzIzMDvCgSYjMTc1Oyhqc29uKSYjMjM5OyYjMTg4O8KMJiMyMzA7wovCiSYjMjI5O8KPwpYmIzIzMTvCmsKEJiMyMzA7wpcmIzE4MjsmIzIyOTvCgMKZJiMyMjk7wozChSYjMjI5O8KQJiMxNzE7JiMyMzI7wo/CnCYjMjI5O8KNwpUmIzIyNzvCgMKBJiMyMzE7JiMxNzQ7woAmIzIyODsmIzE4NzvCiyYjMjMxOyYjMTczO8KJJiMyMjg7JiMxOTE7JiMxNjE7JiMyMzA7woEmIzE3NTsmIzIyNzvCgMKCCiAgICB9CgogICAgbWVzc2FnZSBTZWFyY2hNcElucHV0IC8vJiMyMzA7JiMxNjA7JiMxODU7JiMyMzA7wo0mIzE3NDsmIzIyOTvChSYjMTcyOyYjMjI4OyYjMTg4O8KXJiMyMjk7JiMxODQ7wpAmIzIyOTvCjyYjMTgzO2lkJiMyMjk7JiMxNzQ7wowmIzIyOTvChSYjMTY4OyYjMjI5O8KMJiMxODU7JiMyMzM7woXCjSYjMjMwO8KfJiMxNjU7JiMyMzA7wokmIzE5MDsKICAgIHsKICAgICAgICByZXF1aXJlZCBpbnQzMiB0eXBlPTE7Ly8mIzIzMDsmIzE2MDvChyYjMjI5OyYjMTkxO8KXJiMyMjg7JiMxODk7wo0sJiMyMzA7wpcmIzE2NTsmIzIyOTvCkMKOJiMyMzA7wozCiSYjMjI4OyYjMTg5O8KNJiMyMzA7wp0mIzE2NTsmIzIyOTvCgcKaJiMyMzA7wokmIzE2OTsmIzIyOTsmIzE3NzvClQogICAgICAgIHJlcXVpcmVkIHN0cmluZyBpZD0yOy8vbXBpZC9tY2lkL2Rpc3BsYXlOYW1lCiAgICB9CgogICAgbWVzc2FnZSBTZWFyY2hNcE91dHB1dAogICAgewogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmc9MTsvLyYjMjI5O8KNJiMxNjA7JiMyMjg7JiMxODk7wo0mIzIzMTsmIzE3MjsmIzE2NjsKICAgICAgICByZXBlYXRlZCBNcEluZm8gaW5mbyA9IDI7Ly8mIzIyOTvChSYjMTcyOyYjMjI4OyYjMTg4O8KXJiMyMjk7JiMxODQ7wpAmIzIyOTvCjyYjMTgzOwogICAgfQoKICAgIG1lc3NhZ2UgUHVsbE1wSW5wdXQgLy8mIzIzMTsmIzE3MTsmIzE3NTsmIzIyODsmIzE4NDvCiiYjMjMwO8KLwokmIzIyOTvCj8KWJiMyMjk7woUmIzE3MjsmIzIyODsmIzE4ODvClyYjMjMyOyYjMTgwOyYjMTY2OyYjMjI5O8KPJiMxODM7JiMyMjg7JiMxOTE7JiMxNjE7JiMyMzA7woEmIzE3NTsKICAgIHsKICAgICAgICByZXF1aXJlZCBpbnQ2NCB0aW1lPTE7Ly8mIzIyOTvChSYjMTcyOyYjMjI4OyYjMTg4O8KXJiMyMjk7JiMxODQ7wpAmIzIyOTvCjyYjMTgzOyYjMjI4OyYjMTkxOyYjMTc0OyYjMjMwO8KUJiMxODU7JiMyMzA7wpcmIzE4MjsmIzIzMzvClyYjMTgwOwogICAgICAgIHJlcXVpcmVkIHN0cmluZyBtcGlkPTI7Ly8mIzIzMTsmIzE3MTsmIzE3NTsmIzIyODsmIzE4NDvCiiYjMjMxOyYjMTg4O8KTJiMyMjk7JiMxNzM7wpgmIzIyOTvChSYjMTcyOyYjMjI4OyYjMTg4O8KXJiMyMjk7JiMxODQ7wpAmIzIyOTvCjyYjMTgzOyYjMjMxO8KawoRpZCYjMjMxO8KawoRtZDUmIzIyODsmIzE4NDsmIzE3ODsKICAgIH0KCiAgICBtZXNzYWdlIFB1bGxNcE91dHB1dAogICAgewogICAgICAgIHJlcXVpcmVkIGludDMyIHN0YXR1cz0xOy8vJiMyMzA7wpgmIzE3NTsmIzIyOTvCkCYjMTY2OyYjMjMwO8KcwokmIzIzMDsmIzE4MzsmIzE4NzsmIzIyOTvCiiYjMTYwOyYjMjI5O8KSwowmIzIyOTvCiCYjMTYwOyYjMjMzO8KZJiMxNjQ7JiMyMzk7JiMxODg7wowmIzIyOTsmIzE2NjvCgiYjMjMwO8KewpwmIzIzMDvCnMKJJiMyMjk7wo/CmCYjMjI5O8KMwpYmIzIyOTvCiMKZJiMyMzI7JiMxOTE7wpQmIzIyOTvCm8KeJiMyMjk7woUmIzE2ODsmIzIzMzvCgyYjMTY4OyYjMjM5OyYjMTg4O8KMJiMyMjk7wpAmIzE2NjsmIzIyOTvCiMKZJiMyMzI7JiMxOTE7wpQmIzIyOTvCm8KeJiMyMzA7wpsmIzE4MDsmIzIzMDvCliYjMTc2OyYjMjMxO8KawoQKICAgICAgICByZXBlYXRlZCBNcEluZm8gaW5mbyA9IDI7Ly8mIzIyOTvChSYjMTcyOyYjMjI4OyYjMTg4O8KXJiMyMjk7JiMxODQ7wpAmIzIyOTvCjyYjMTgzOwogICAgfQogICAgbWVzc2FnZSBIaXN0b3J5TXNnSW5wdXQgIAogICAgewogICAgICAgIG9wdGlvbmFsIHN0cmluZyB0YXJnZXRJZCA9IDE7Ly8mIzIzMjvCgcKKJiMyMjk7JiMxNjQ7JiMxNjk7JiMyMjk7JiMxNzQ7JiMxNjQ7SUQKICAgICAgICBvcHRpb25hbCBpbnQ2NCB0aW1lID0gMjsvLyYjMjMwO8KfJiMxNjU7JiMyMzI7JiMxNzU7JiMxNjI7JiMyMzA7wpcmIzE4MjsmIzIzMzvClyYjMTgwOyYjMjMxO8KCJiMxODU7CiAgICAgICAgb3B0aW9uYWwgaW50MzIgY291bnQgID0gMzsvLyYjMjMwO8KLwokmIzIyOTvCj8KWJiMyMzA7wp0mIzE2MTsmIzIzMDvClSYjMTc2OwogICAgICAgIG9wdGlvbmFsIGludDMyIG9yZGVyID0gNDsvLyYjMjMwO8KLwokmIzIyOTvCj8KWJiMyMzM7JiMxNjE7JiMxODY7JiMyMjk7JiMxODY7wo8gKDEmIzIzOTsmIzE4ODvCmiYjMjMwOyYjMTczOyYjMTYzOyYjMjI5OyYjMTg2O8KPJiMyMzk7JiMxODg7wpswJiMyMzk7JiMxODg7wpomIzIyOTvCgMKSJiMyMjk7JiMxODY7wo8pCiAgICB9CgogICAgbWVzc2FnZSBIaXN0b3J5TXNnT3VwdXQgIC8vJiMyMzI7JiMxOTE7wpQmIzIyOTvCm8KeJiMyMzI7woHCiiYjMjI5OyYjMTY0OyYjMTY5OyYjMjI5OyYjMTc0OyYjMTY0OyYjMjI5O8KOwoYmIzIyOTvCjyYjMTc4OyYjMjMwOyYjMTgyO8KIJiMyMzA7woEmIzE3NTsKICAgIHsKICAgICAgICByZXBlYXRlZCBEb3duU3RyZWFtTWVzc2FnZSBsaXN0PTE7Ly8mIzIzMDvCicKAJiMyMzA7wosmIzE2NTsmIzIzMDvCnMKJJiMyMzE7wprChCYjMjMwOyYjMTgyO8KIJiMyMzA7woEmIzE3NTsmIzIzOTsmIzE4ODvCiGxpc3QmIzIyOTsmIzE2NDvCjSYjMjMxOyYjMTc3OyYjMTg3OyYjMjI5O8KewosmIzIzOTsmIzE4ODvCiQogICAgICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lPTI7Ly8mIzIyOTvCkMKMJiMyMzA7JiMxNzM7JiMxNjU7JiMyMzA7wpcmIzE4MjsmIzIzMzvClyYjMTgwOwogICAgICAgIHJlcXVpcmVkIGludDMyIGhhc01zZz0zOyAvLyYjMjMwO8KYJiMxNzU7JiMyMjk7wpAmIzE2NjsmIzIzMjsmIzE5MTvCmCYjMjMwO8KcwokmIzIyOTvCkMKOJiMyMzE7JiMxODc7JiMxNzM7JiMyMjk7wo7ChiYjMjI5O8KPJiMxNzg7JiMyMzA7JiMxODI7wogmIzIzMDvCgSYjMTc1OwogICAgfQogICAgbWVzc2FnZSBSdGNRdWVyeUxpc3RJbnB1dHsKICAgICAgb3B0aW9uYWwgaW50MzIgb3JkZXI9MTsgLy8mIzIzMDvCnSYjMTYxOyYjMjMwO8KVJiMxNzY7JiMyMzM7wpnCkCYjMjI5O8KIJiMxODI7JiMyMjk7wpwmIzE2ODsmIzIzMDvCnMKNJiMyMjk7woomIzE2MTsmIzIzMTsmIzE3MTsmIzE3NTsmIzIyOTvCgcKaIDEgJiMyMzA7wpgmIzE3NTsmIzIzMDsmIzE3MzsmIzE2MzsmIzIyOTsmIzE4NjvCjywyJiMyMzA7wpgmIzE3NTsmIzIyOTvCgMKSJiMyMjk7JiMxODY7wo8KICAgIH0KCiAgICBtZXNzYWdlIFJ0Y0tleURlbGV0ZUlucHV0ewogICAgICByZXBlYXRlZCBzdHJpbmcga2V5PTE7CiAgICB9CgogICAgbWVzc2FnZSBSdGNWYWx1ZUluZm97CiAgICAgIHJlcXVpcmVkIHN0cmluZyBrZXk9MTsKICAgICAgcmVxdWlyZWQgc3RyaW5nIHZhbHVlPTI7CiAgICB9CgogICAgbWVzc2FnZSBSdGNVc2VySW5mb3sKICAgICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZD0xOwogICAgICByZXBlYXRlZCBSdGNWYWx1ZUluZm8gdXNlckRhdGE9MjsKICAgIH0KCiAgICBtZXNzYWdlIFJ0Y1VzZXJMaXN0T3V0cHV0ewogICAgICByZXBlYXRlZCBSdGNVc2VySW5mbyBsaXN0PTE7CiAgICAgIG9wdGlvbmFsIHN0cmluZyB0b2tlbj0yOwogICAgfQogICAgbWVzc2FnZSBSdGNSb29tSW5mb091dHB1dHsKICAgICAgICBvcHRpb25hbCBzdHJpbmcgcm9vbUlkID0gMTsKICAgICAgICByZXBlYXRlZCBSdGNWYWx1ZUluZm8gcm9vbURhdGEgPSAyOwogICAgICAgIG9wdGlvbmFsIGludDMyIHVzZXJDb3VudCA9IDM7CiAgICAgICAgcmVwZWF0ZWQgUnRjVXNlckluZm8gbGlzdD00OwogICAgfQogICAgbWVzc2FnZSBSdGNJbnB1dHsKICAgICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xOwogICAgfQogICAgbWVzc2FnZSBSdGNRcnlJbnB1dHsgLy9xdWVyeSAmIzIyOTvCjyYjMTc1OyYjMjI4OyYjMTg3OyYjMTY1OyYjMjMwO8KYJiMxNzU7JiMyMzA7wp8mIzE2NTsmIzIzMjsmIzE3NTsmIzE2MjsmIzIyOTvCjcKVJiMyMjg7JiMxODQ7JiMxNzA7JiMyMjk7JiMxNzc7wp4mIzIzMDvCgCYjMTY3OyYjMjI4OyYjMTg1O8KfJiMyMjk7wo8mIzE3NTsmIzIyODsmIzE4NzsmIzE2NTsmIzIzMDvCnyYjMTY1OyYjMjMyOyYjMTc1OyYjMTYyOyYjMjI5OyYjMTY0O8KaJiMyMjg7JiMxODQ7JiMxNzA7JiMyMjk7JiMxNzc7wp4mIzIzMDvCgCYjMTY3OwogICAgICByZXF1aXJlZCBib29sIGlzSW50ZXJpb3I9MTsvLyYjMjMwO8KYJiMxNzU7JiMyMjk7wpAmIzE2NjsmIzIyODsmIzE4NDsmIzE4NjsmIzIzMjvCjiYjMTgzOyYjMjI5O8KPwpYmIzIyOTvChsKFJiMyMzM7woMmIzE2ODsmIzIzMDvClSYjMTc2OyYjMjMwO8KNJiMxNzQ7CiAgICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTI7CiAgICAgIHJlcGVhdGVkIHN0cmluZyBrZXk9MzsgLy8mIzIyOTvCiCYjMTYwOyYjMjMzO8KZJiMxNjQ7JiMyMzA7wozChyYjMjI5OyYjMTc0O8KaIHVzZXIgJiMyMzA7wojCliYjMjMyO8KAwoUgcm9vbSBJZCYjMjMxO8KawoQga2V5CiAgICB9CiAgICBtZXNzYWdlIFJ0Y1FyeU91dHB1dHsKICAgICAgcmVwZWF0ZWQgUnRjVmFsdWVJbmZvIG91dEluZm89MTsKICAgIH0KICAgIG1lc3NhZ2UgUnRjRGVsRGF0YUlucHV0ewogICAgICByZXBlYXRlZCBzdHJpbmcga2V5PTE7IC8vJiMyMjk7wogmIzE2MDsmIzIzMzvCmSYjMTY0OyYjMjMwO8KMwocmIzIyOTsmIzE3NDvCmiB1c2VyICYjMjMwO8KIwpYmIzIzMjvCgMKFIHJvb20gSWQmIzIzMTvCmsKEIGtleQogICAgICByZXF1aXJlZCBib29sIGlzSW50ZXJpb3I9MjsvLyYjMjMwO8KYJiMxNzU7JiMyMjk7wpAmIzE2NjsmIzIyODsmIzE4NDsmIzE4NjsmIzIyOTsmIzE2NDvChCYjMjMxO8KQwoYmIzIyOTvChsKFJiMyMzM7woMmIzE2ODsmIzIzMDvClSYjMTc2OyYjMjMwO8KNJiMxNzQ7CiAgICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTM7CiAgICB9CiAgICBtZXNzYWdlIFJ0Y0RhdGFJbnB1dHsgCiAgICAgIHJlcXVpcmVkIGJvb2wgaW50ZXJpb3I9MTsKICAgICAgLy8mIzIzMDvCmCYjMTc1OyYjMjI5O8KQJiMxNjY7JiMyMjg7JiMxODQ7JiMxODY7JiMyMzI7wo4mIzE4MzsmIzIyOTvCj8KWJiMyMjk7wobChSYjMjMzO8KDJiMxNjg7JiMyMzA7wpUmIzE3NjsmIzIzMDvCjSYjMTc0OwogICAgICByZXF1aXJlZCB0YXJnZXRUeXBlIHRhcmdldD0yOwogICAgICAvLyYjMjI5O8KIJiMxNjA7JiMyMzM7wpkmIzE2NDsmIzIzMDvCjMKHJiMyMjk7JiMxNzQ7wpogdXNlciAmIzIzMDvCiMKWJiMyMzI7woDChSByb29tIElkJiMyMzE7wprChCBrZXkKICAgICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0zOwogICAgICBvcHRpb25hbCBzdHJpbmcgb2JqZWN0TmFtZT01OwogICAgICBvcHRpb25hbCBzdHJpbmcgY29udGVudD02OwogICAgfQogICAgbWVzc2FnZSBSdGNTZXREYXRhSW5wdXR7CiAgICAgIHJlcXVpcmVkIGJvb2wgaW50ZXJpb3I9MTsvLyYjMjMwO8KYJiMxNzU7JiMyMjk7wpAmIzE2NjsmIzIyODsmIzE4NDsmIzE4NjsmIzIyOTvCj8KRJiMyMjk7JiMxODQ7woMmIzIyOTvChsKFJiMyMzM7woMmIzE2ODsmIzIzMDvClSYjMTc2OyYjMjMwO8KNJiMxNzQ7CiAgICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTI7CiAgICAgIHJlcXVpcmVkIHN0cmluZyBrZXk9MzsKICAgICAgcmVxdWlyZWQgc3RyaW5nIHZhbHVlPTQ7CiAgICAgIG9wdGlvbmFsIHN0cmluZyBvYmplY3ROYW1lPTU7CiAgICAgIG9wdGlvbmFsIHN0cmluZyBjb250ZW50PTY7CiAgICB9CiAgICBtZXNzYWdlIFJ0Y091dHB1dAogICAgewogICAgICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTsgICAgLy8mIzIyOTvCjSYjMTYwOyYjMjI4OyYjMTg5O8KNCiAgICB9CiAgICBtZXNzYWdlIFJ0Y1Rva2VuT3V0cHV0ewogICAgICByZXF1aXJlZCBzdHJpbmcgcnRjVG9rZW49MTsKICAgIH0KICAgIGVudW0gdGFyZ2V0VHlwZSB7CiAgICAgIFJPT00gPTEgOwogICAgICBQRVJTT04gPSAyOwogICAgfQp9");var i=l.loadProto(h,undefined,"").build("Modules").probuf;return i})(c,d,a);return e});
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__("../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/process/browser.js")))

/***/ }),

/***/ "./src/pages/index/index.cml":
/***/ (function(module, exports, __webpack_require__) {

var __cml__style0 = __webpack_require__("../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/cml-extract-css-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/vue-style-loader/index.js!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/css-loader/index.js?{\"sourceMap\":false}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/chameleon-css-loader/index.js?{\"platform\":\"miniapp\",\"cmlType\":\"wx\"}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/postcss-loader/lib/index.js?{\"sourceMap\":false,\"config\":{\"path\":\"/Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/configs/postcss/wx/.postcssrc.js\"}}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/less-loader/dist/cjs.js?{\"sourceMap\":false}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/chameleon-css-loader/index.js?{\"media\":true,\"cmlType\":\"wx\"}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/chameleon-loader/src/selector.js?type=styles&index=0&fileType=page&media=dev&cmlType=wx&isInjectBaseStyle=true&check={\"enable\":true,\"enableTypes\":[]}!./src/pages/index/index.cml");
var __cml__script = __webpack_require__("../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/babel-loader/lib/index.js?{\"filename\":\"/Users/wangyonghao/.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/chameleon.js\"}!../../../../../.nvm/versions/node/v10.16.0/lib/node_modules/chameleon-tool/node_modules/chameleon-loader/src/selector.js?type=script&index=0&fileType=page&media=dev&cmlType=wx&isInjectBaseStyle=true&check={\"enable\":true,\"enableTypes\":[]}!./src/pages/index/index.cml");


/***/ })

},["./src/pages/index/index.cml"]);